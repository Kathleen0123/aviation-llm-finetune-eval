
	
	
		
OverviewThis document summarizes activities defining and executing the first demonstration of the NASA-FAA Research Transition Team (RTT) Data Exchange and Information Architecture (DEIA) working group (DWG).The demonstration focused on testing the interactions between two key components in the future Unmanned Aircraft Systems (UAS) Traffic Management (UTM) System through a collaborative and distributed simulation of representative scenarios.The summary incorporates written feedback from each of the participants in the demonstration.In addition to reporting the activities, this report also provides some insight into future steps of this working group.
BackgroundThe NASA-FAA RTT on UTM has been in force since 2014, however recently the team has formalized its approaches and organization.As part of this formalization, a meeting of FAA, NASA and industry partners with an interest in UTM was hosted by NASA on the 21st of July 2016.The agenda included the following:• FAA's work to date on UAS integration activities • The form of the RTT in terms of the working groups • An initial UTM architecture • Kickstarting collaboration between all stakeholdersThe development and field-testing efforts of NASA to that point had been significant enough to offer a platform for this working group to begin collaborative testing activities.The hope was that these testing activities could serve as a catalyst for other discussions within and between the various UTM working groups.NASA and industry tentatively agreed on a plan to architect and test an initial data exchange system to support UTM by the end of the 2016 calendar year.The result from that decision forward is documented herein.Additional background on the architecture under test is provided in Appendix A, but the highlevel architecture diagram used to guide this effort is provided here for reference (Figure 1).Note that Figure 1 represents an updated, evolved version of the architecture in Appendix A, but is indicative of the same concept.While there are many components of this system, the two central pieces to enabling the UTM System are the Flight Information Management System (FIMS) and the UAS Service Supplier (USS), which are provided by the Air Navigation Service Provider (ANSP) and industry, respectively.This specific demonstration focused on the data exchanges between the FIMS and the USS; all other components and data exchanges were explicitly out of scope.Other exchanges needed to enable an effective demonstration were appropriately emulated and not necessarily documented in detail here.The philosophy with this initial test was to build confidence in and acceptance of the central components, thus enabling further definition of the other components and interfaces of the overall UTM System.
Figure 1: UTM ArchitectureNote that all of the NASA-related UTM discussions, implementations, artifacts, and other elements must be viewed as part of a research effort and not a rule-making or regulatory effort.The use cases discussed, the specific technologies tested, and the methods used do not necessarily constitute a view of how a future UTM System will look or operate.Rather, these exercises are used to provide insight into how such a system should or might operate.At the most aggressive, these activities may be seen as a validation of particular options for a future system, not necessarily a roadmap to a future system.NASA has run several other field tests and simulations leading up to the DWG demonstration described in this document.For further information on those tests and other related documentation, please see https://utm.arc.nasa.gov/documents.shtml.
Related DocumentsAdditional detailed information is provided in four related documents, for convenience included as appendices below.Appendix A is the overall plan initially formulated through discussions with the working group.Appendix B is the detailed implementation of the plan carried out through coordination with the demonstration participants.Appendix C is a technical document describing the interface to the NASA UTM server used by developers participating in the collaborative demonstration.Finally, Appendix D is the technical checkout document NASA used to collaboratively test that the various partner-developed systems implemented the specifications in Appendix C correctly.
Demonstration ObjectivesFor this initial demonstration of the DWG there were four high-level objectives:• Map existing schema to requirements • Demonstrate reasonable situational awareness • Accelerate related efforts • Develop an initial architecture Each of these objectives is described in the following subsections.
Mapping existing schema to requirementsNASA has been developing the concept of UTM since originating it in 2013.As such, there were already field-tested data schemas to support small UAS (sUAS) -UAS less than 55 lbs.research operations at low altitudes.In parallel, the FAA developed initial data requirements for a potential operational system to support Part 107 (non-hobbyist) and Part 101-E (hobbyist) operations in an automated environment.To accompany this effort, NASA endeavored to map the existing NASA UTM research platform schemas to the FAA-identified data requirements, while identifying any gaps in the requirements that would be needed to enable future automated management of operations and the airspace.This was an initial effort.The goal was not to finalize a schema for future tests and operational purposes, but to obtain a first cut at a reasonable schema that supported basic use cases.This first cut should be sufficient to act as a platform for future improvement and building in coverage of additional use cases.This mapping and initial schema-definition exercise was the primary objective of the demonstration.
Demonstrate reasonable situational awarenessOne of the major functions of the data schema is to provide the basis for tools to provide appropriate situational awareness to human and automated UTM stakeholders.This demonstration did not prioritize this objective; however, with the implementation as tested, we were able to demonstrate how disparate systems could request, process, and display information, thus creating an initial level of situational awareness.
Accelerate related effortsThe sUAS industry is progressing rapidly.Research and development efforts need to keep pace in order to ensure safe, efficient, and fair access to the National Airspace System for these sUAS platforms.By building out an initial capability, soliciting feedback on how it performs, and sharing it amongst the stakeholders of this system, the goal is to define and refine the UTM concept.
Develop initial architectureIn order to perform this demonstration, an initial UTM architecture was required.This architecture, while not intended to be an operational system, can inform how a future operational system should be built.More specifically, through this exercise, it is hoped that lessons learned may help define requirements of the future operational version of UTM.
Demonstration OverviewA detailed description of the demonstration is provided in Appendices A and B. This section provides a short summary of the information provided there.The DWG developed future sUAS scenarios that would necessitate operational information exchanges.These included an sUAS fly-away in a remote area, incursion into a no-fly zone, an all-land scenario, and a capacity-management scenario.Using these scenarios together with an initial set of data elements that the FAA drafted for future automated waivers of Part 107 rules, the DWG looked for gaps in the data-exchange elements that might need to be filled in order to provide appropriate situational awareness for all stakeholders.By leveraging previous work by NASA on the UTM project, a complete data schema was drafted that is hypothesized to cover the situational awareness needs of the identified scenarios.Using the scenarios, the drafted data schema, and previous UTM architectural efforts by NASA, a collaborative demonstration was planned to test the data exchanges and initial architecture.NASA served as the ANSP within the demonstration by implementing the FIMS.Partners and NASA then each implemented a USS adhering to a collaboratively defined Interface Control Document (ICD) and Application Programming Interface (API).The execution plan involved having the external partners complete a software checkout to ensure their systems implemented the agreed-upon specification correctly, then meeting virtually as a group to run through several nominal scenarios, then meeting once more to run through the more involved scenarios.Following these steps, NASA collected qualitative feedback in the form of written evaluations from the partners and then produced this document.The testing was built up in a hierarchical fashion.First, specific Data Exchanges were identified (see Appendix B) based on the previously defined use cases.A single Data Exchange is a collection of data elements representing all of the information sent from one party to another party in a single data message.These Data Exchanges were then organized into sequences of exchanges that described an interaction between various stakeholders.These were called "Tests" for this demonstration.Finally, collections of these Tests were grouped to run together into Experiments wherein every participant had a distinct role within exactly one Test.Thus, individual Data Exchanges were logically sequenced into Tests which were then grouped into Experiments to tell the story of a particular scenario.Each experiment could be run multiple times with varying assignments of roles for each run.These were termed "Configurations" for this demonstration.
ExecutionThere were two dates of execution.On the 4th of November, 2016, the DWG met via a shared video conference and completed two Experiments.On the 14th of November, 2016, the group met again and completed the remaining Experiments.Overall, the execution was smooth.The team was able to adjust the schedule on the fly to accelerate execution, which helped end each day's work early.There was no absenteeism and no significant technical problems.The sessions were recorded and are available from NASA for appropriate use.
ResultsThis was not an overly quantitative demonstration.It could be better described as an acceptance activity or initial validation of the concept.As such, the success criteria as encapsulated in the demonstration objectives can be said to have been met.Each of the objectives are reviewed here in light of the completed demonstration.
Mapping existing schema to requirementsThis was identified as a primary objective and can be evaluated as complete or successful through inspection of the resulting API.Given that the API (and associated data schema) allowed for completion of the identified experiments to the participants' satisfaction, we can claim there is a reasonable data mapping to meet the requirements as currently understood.
Demonstrate reasonable situational awarenessThe NASA systems were able to see the plans and data as they were submitted.At least two of the UTM partners developed systems that allowed for visualization of other operators' submitted data by querying the FIMS and/or subscribing to data message queues.The data they received were deemed reasonable for those operators to appropriately plan their operations such that they would avoid other conflicting operations.Thus, reasonable situational awareness was possible via this initial architecture.
Accelerate related effortsThe efforts of the DWG provided topics for discussion within NASA and within the related Concepts Working Group of the RTT.The format of the DWG also allowed for an initial blueprint for the Communication & Navigation and Sense & Avoid working groups.Thus, the efforts of the DWG with this demonstration aided in the acceleration of related efforts.
Develop an initial architecture.This was indeed completed to allow for the demonstration to occur.From this initial architecture and the various lessons learned, future iterations of the architecture will be developed.
Lessons LearnedAfter the demonstration was complete, a qualitative report was requested from each of the non-NASA participants discussing their impressions of the activity.In this section, we provide some of this feedbackthe five participants will remain anonymous and have been randomly labeled as Participant A through E.
Overall ImpressionsOverall, the feedback was positive.The way in which the concept was presented and demonstrated resonated well with the participants.The "demonstration was successful and beneficial" A and the "architecture has proven to be a great starting-point."B There was a general belief "that simulation is the most appropriate methodology for these kind of tests and research activities."C "The execution of the tests was fairly smooth" D with the "demo documentation [being] thorough and help[ing] ... development go smoothly."E The process made "users/teams think about certain aspects of flight ... that would otherwise be overlooked."C Also, "the group as a whole learned more about this subject than it would have with each team doing these tests individually."B
Architecture DesignSeveral participants had detailed comments on the overall architecture of the FIMS-USS subsystem within UTM.Those comments are grouped by participant below.The takeaway message from NASA's perspective is that the individual technologies selected for this initial demonstration (based on prior NASA development efforts) were both reasonable, at least for the demonstration, and also potentially applicable for future implementations as an operational system.As noted by several participants-and as known by the NASA UTM project-the technologies were not tested or selected based on a full engineering analysis.Such an analysis is needed in the future and should include elements of cybersecurity, scalability, reliability, and other measurable qualities.
Comments of Participant "B""It allows an authority (such as the FAA) to both audit ongoing sUAS flight operations, as well as intervene with specific restrictions when necessary.Especially notable is the fact that it is designed on the concept of 'no human in the loop' of operations-meaning that it can ultimately scale to meet demand.This exercise was limited enough in scope that the working group could demonstrate the basic functionality of the architecture-although there are still plenty of hurdles before we can confirm that this works in all cases."The NASA-designed scheme supports provisions for many features that are not yet supported in the implementation.Of course, much of this design will require some degree of refactoring as the implementation evolves and is tested, but the NASA designed architecture suggests how these features could be incorporated into a more comprehensive and scalable implementation."The current design relies on a mix of technologies, with HTTPS at the core and higher-level components (i.e."web sockets") on top of this.This makes the implementation of a UTM client somewhat clumsy.It would be relatively straight-forward to develop a simpler approach that would streamline this implementation and eliminate the dependency on higher-level constructs."No attention was given to concepts such as: (a) detecting/preventing loss of data, (b) the system's methods and processes for identifying/reacting to delayed data transmissions or vehicles that lose communication.Although these were not an objective of the initial trial, we are confident that these issues can be addressed in future trials."
Comments of Participant "C""We are in support of using RESTful APIs and use of STOMP was a good choice.Down the line, we may as a group need to look at the scalability/load testing aspects of the solution when UTM goes past the limited research/experimentation traffic."
Comments of Participant "D""[It was] beneficial to test stomp as a data exchange mechanism [but as a] sender [it was] hard to maintain connections.[We] lost messages if not connected until [we] went to full broker [and it] worked better in TCL2.Swagger was great for specifics about APIs [but] no change history to clearly point out changes."
Comments of Participant "E""The REST/STOMPoverWS combination is not the most natural to code against.It might be more performant at scale to have positions sent via WS as well.STOMP was actually very easy to work with and is an easy protocol to debug because it is text based."
Development ProcessThe planning and execution of the demonstration occurred between July and November 2016.This timeline was extremely tight.The aggressive schedule was driven by many factors, including other UAS/UTM related activities on the calendar, providing input to the other working groups, keeping momentum on the overall effort moving forward, amongst others.The activity was impacted by other parallel UTM project efforts, not the least of which was the TCL 2 Demonstration held at Reno-Stead airport in Nevada in October 2016.That demonstration was the highest priority for the UTM project given the long lead times for performing live, beyond visual line of sight (BVLOS) flights in the National Airspace System in coordination with dozens of partners.Thus, the NASA software development team was splitting time between competing versions of the server side of UTM, with the TCL 2 Demonstration taking priority.Also, it needs to be noted that the concepts driving this DWG demonstration were being developed in parallel with the software.All of these issues negatively affected the partners participating in this DWG demonstration.The documentation from NASA that was required for the partners to build their software clients was often incomplete and/or late arriving, necessitating many last-minute adjustments to their code and our collaborative plans.Below are some quotations from the partners related to this impact:• "The only gripe we have is that the interfaces/API/Parameters were changing [until] the last minute (some not even in line with the documentation) for each of the two tests which required last minute troubleshooting and changes."C • "FIMS was operated in a manual way which made it difficult to develop against when it only worked with operators on the back end."D • "Many API changes right up to the client checkout requiring us to essentially certify twice."D • "Too many API and messaging changes close to the end that required significant effort...Breaking changes so we had to code on the spot."D • "Only very near the test did the FIMS start posting geometries for closures."D • "Without participant access to Confluence, we were always working with old documentation."D • "In the future, it might be better to be more specific about flight paths and UAV speeds to reduce the amount of waiting."E • "Testing should be made simpler as the implementation evolves.Many of the test cases in this trial required manual intervention to inject simulated events.It is preferable to automate these events so that the client tests could be easily regression-tested as well as expanded in scope."B • "Operation areas did not always line up with the defined scenario.Some of the operating areas that were supposed to be in compliance were submitted in no-fly areas.Some of the submitted geometries seemed to have points that were not in order or transposed."A
SummarySynthesizing the feedback, the following may be a reasonable list of lessons learned to help guide future demonstrations:• Provide adequate time for planning and implementation of future demonstrations.This includes appropriate planning in conjunction with all of the UAS/UTM activities to ensure availability of resources to appropriately execute.• Build on the architecture and open up the technology choices to include more future operational requirements.• Define parameters even more precisely for simulated operations to ensure smooth compatibility.• Attempt to open up the documentation process to avoid outdated, slow releases of required information.
Next StepsThis demonstration helped highlight and test a reasonable architecture for the future UTM System, including definitions of several key data exchanges.However, this demonstration focused on communications between the ANSP and users of the airspace.In architectural terms, the only data exchanges exercised were those between the FIMS and USS.Moving forward, there are several other data exchanges that need to be formalized.Of current highest priority are the exchanges between various USSs (i.e., USS-to-USS communication).Some of the basic questions are as follows:1. What data are required to be shared amongst USSs? 2. How should those data be shared?3. How does a USS become vetted?4. How do other stakeholders "find" or "discover" a USS?There are many other questions that can be formed.Via the DWG, NASA will define these questions and develop additional collaborative demonstrations to prove and refine the concepts.In addition to USS-to-USS communication, the other high-value technical questions to be addressed include, but are not limited to the following:1. How is authentication, authorization, and accounting achieved within the UTM System? 2. How do public safety and other public entities interact with UTM? 3. What is the general discovery mechanism needed for the various components in UTM? 4. What levels of quality of service are required for the various components in UTM? 5. What, precisely, is the complete set of roles and responsibilities in UTM?Each of these questions, as well as others not explicitly listed, need discussion, documentation, and some level of testing.These will be the issues dictating the next steps of the DWG.
ConclusionNASA previously conducted simulations and flight tests as part of the UTM Project, but the effort described here was the first under the banner of the NASA-FAA RTT for UTM.Not only was the demonstration successful, it provided a solid foundation for future demonstrations, helped give some clarity to the overall concept development, offered a chance for more industry partners to have direct input on the concept, and produced lessons-learned that can make future demonstrations even more successful.The DWG is an excellent resource for the RTT and the UTM cause as a whole.Leveraging this resource by actively engaging in demonstrations and producing software artifacts will help push the concept along.
Appendix A -DWG Demonstration 1 PlanThe content of this appendix was originally a stand-alone document.The information contained herein represents the initial planning of the demonstration and may be out of sync with the actual execution as described in the main document or the more recently written Appendix B. This appendix is included for completeness, reference, and context.
OverviewThis document describes the plan for a collaborative demonstration between NASA and industry partners as part of the UTM RTT Data Exchange Working Group (UTM-DWG).This demonstration will exercise the initially proposed data exchange models for the UTM System.The focus of the initial models and this demonstration is upon the data exchanged between the operator and the Airspace Navigation Service Provider (ANSP).To demonstrate the data exchange, the initial models will be developed to support specific demonstration scenarios.Those scenarios are described in this document.Given that the scope of this collaborative demonstration is limited to the exchange between operator and ANSP, there may be future work and demonstrations for other aspects of the overall data exchange model in the UTM System.
BackgroundOn Wednesday, July 20th, 2016 NASA hosted a meeting that included representatives from the FAA and several partners from industry and academia interested in sUAS access to the lowaltitude airspace.This meeting represents an element of the overall NASA-FAA Research Transition Team effort related to UTM research.The FAA provided some background on their UAS work to date and their current thoughts on how sUAS may access the airspace in the future.The FAA is seeking input to inform this process and proposed five working groups.The first of these to begin is the UTM-DWG.A self-selected subset of those organizations in attendance met the following week on Wednesday, July 27th, 2016.NASA produced this document as a result of that initial meeting.At the July 20th meeting, the group used a diagram supplied by NASA as a basis for discussion of the overall concept and the flow of data in particular.That diagram has evolved into the following:
Current ScopeThe scope of this working group is driven by test scenarios for this collaborative demonstration.Those test scenarios are detailed below.To focus the technical discussion on a manageable and meaningful part of the diagrams above, the connection between the USS and the FIMS will drive the technical work associated with this demonstration.This does not intend to lessen the importance of the other connections in the diagram and eventual UTM System, however, through the process of defining and developing the FIMS-USS connections, the requirements and path forward for the other connections may become clearer.
DeliverablesThis activity will produce, at a minimum, the following deliverables (Table A-1).The customer for these deliverables is UTM Research Transition Team including NASA, FAA, other government participants, and industry partners.
Test Scenarios
AssumptionsThe scenarios are detailed in the following subsections.For each scenario, the following assumptions are in place:• Operations are BVLOS of the UAS controller.• BVLOS operations require notification of intent.• The Operator acts as a "full stack" operator (UAS, UAS Operator, USS, Supplemental Data Service Provider all under control of one entity) • These are not real flights, only simulated.• Any roles that are believed to be filled by humans will be filled by humans for the demonstration/test.Note that not all of these assumptions are necessarily part of any future operational environment.These assumptions simply provide a clearer baseline for all participants in the demonstration.
Scenario 1: Operator Incursion
OverviewWhile performing an operation near the boundary of U.S. National Park that is located in a suburban or urban area, an operator inadvertently crosses over that boundary.This incursion into an unauthorized area will trigger a series of data exchanges between the operator and the FIMS, these exchanges may trigger further data exchanges between:• FIMS and other operators • The offending operator and other operators • FIMS and other NAS elements This scenario will exercise data exchanges that occur for operations flying near and within National Park boundaries.
Story AAn operator plans an operation in a populated area.This operation's planned trajectory keeps it clear of all known constraints.The platform being flown has been registered with the ANSP for operation in the airspace and meets all operational and maintenance requirements.The operator has the appropriate licensing and credentials to perform such operations.The operator begins the operation as planned, however during the operation the vehicle deviates from its planned course and enters airspace that is restricted to sUAS operations.This incursion is into a national park area.As soon as the operator is aware of the incursion, it sends a message to the FIMS indicating a deviation in its intended operation.This communication occurs in parallel with the operator's attempts to correct the incursion.The operator receives directives from the FIMS to correct its current trajectory.Other nearby operators receive directives and messages related to the offending operation.The operator is able to correct the trajectory and return its operation to the originally intended plan.The operator updates the FIMS on its deviation status.
Story BAn operator plans an operation in a populated area.This operation's planned trajectory keeps it clear of all known constraints.The platform being flown has been registered with the ANSP for operation in the airspace and meets all operational and maintenance requirements.The operator has the appropriate licensing and credentials to perform such operations.The operator does not have any special role or credentials (e.g.public safety).The operator begins the operation as planned, however during the operation the operator notices an opportunity for a more optimal flight plan that would take the UAS over National Park territory.The operator sends a request to the FIMS for access to the nominally off-limits area for a time-limited, planned incursion.The FIMS receives the request and approves it.The operator adjusts the flight plans accordingly and completes the operation including the segment through the National Park territory.When trying the same request for a similar operation at a later time, the request is not granted and the operator is obliged to use the original plan for that second operation.
Story CAn operator plans an operation in a populated area.This operation's planned trajectory keeps it clear of all known constraints.The platform being flown has been registered with the ANSP for operation in the airspace and meets all operational and maintenance requirements.The operator has the appropriate licensing and credentials to perform such operations.The operator does not have any special role or credentials (e.g.public safety).The operator begins the operation as planned.During the flight, the vehicle deviates from its planned trajectory, though does not enter any "no-fly" areas.The operator begins to take corrective actions while announcing the deviation to other stakeholders.
DiscussionTo focus this scenario, two specific National Parks will be used.More precisely, two National Historic Sites will be used.The shapefile within that zip file was imported to QGIS.The specific sites were extracted using QGIS and exported as a GeoJSON file.The focus of this scenario is on the exchange between the operator and the FIMS.As a stretch goal, other exchanges may be investigated.The technical mechanisms for data exchange will not be finalized with this demonstration, however, various options may be discussed and a reasonable method for actually sending and receiving data will be chosen by the working group.This chosen method may inform future demonstrations and working groups.The working group will decide on the necessary and sufficient data to be exchanged to satisfy this scenario from all involved perspectives (ANSP and operator).
QuestionsWhat are the time requirements for these communications?How quickly must operator report?How long can the operation fly in the constraint before some other action by ANSP takes place?Which other operators should be notified?What directives, if any, are they provided?What if there is surveillance active in these areas?Do those systems alert anyone?
Scenario 2: Airspace Constraint Change
OverviewOperations are allowed near an airport, but the available areas are dictated on the current runway configuration.An unplanned configuration change triggers data exchange between the FIMS and operators.While the initial data exchange is a push from the FIMS, subsequent data exchanges would be required to keep operations in the appropriate areas.
StoryMineta San Jose International Airport (SJC) has parallel runways 12L-30R/12R-30L and has two major flows: South Flow and North Flow indicating the direction of the departing and arriving traffic.These configurations typically change based on weather (wind) events.Given the altitude of the manned aircraft on approach, the arriving traffic has a protected zone added to keep sUAS from operating in that zone.Thus, on a configuration change, that zone changes as well.When a configuration change happens, there is a ten-minute delay before any arrivals, thus the ANSP allows for a five-minute period for existing operations to clear the newly established protected zone.New sUAS operations may immediately use the other protected zone that was deactivated.
DiscussionA pseudo (hand drawn) dataset for the airport configurations was hastily created and placed here:https://gist.github.com/alotau/cfd4695f79208ac0b980b00259cbac9cIf real-world data for an airport configuration change is easily available for an airport in an urban area, we should substitute those real data.
Questions
OverviewThis scenario exercises the case where the ANSP provides a directive to all operators to clear the airspace (also known as an "all land" scenario).There will be operations that are active that need to land and operations planned for the near future that need to stay grounded.
StoryA national security issue is affecting the entire conterminous United States.The ANSP decides it is safest to ground all sUAS operations until further analysis of the situation can be completed.A message from the FIMS provides the directive for all active operations to go to ground within the next five minutes and to cancel any planned operations.Operators submit their deviation plans to comply with the directive and commence grounding operations.Operations that are in an unsafe or unknown state are reported to the FIMS to allow the ANSP to incorporate that information into NAS-wide contingency management.
DiscussionThis seems like an important functionality to begin hashing out.We need to think about how each type of operation might be affected by such a scenario.This can help make the discussion about the need for reliable communication between FIMS and USS more concrete.The argument should be that each operation should be reachable within some time window to enable these types of contingencies.
Questions1. What does the directive look like? 2. What time parameters make sense?Time to execute, time to notify of diversion plans, time to notify of failure to comply, etc. 3. What do the messages from the operator look like? 4. What happens to priority operations (public safety, military, etc.) in this scenario?Should we mock them out?
Scenario 4: Dense Operations
OverviewDespite the vast airspace and current low density of sUAS operations, there are cases in the future where multiple sUAS will seek to access the same volume of airspace.There may be a need to implement some traffic management directives to maintain safety and efficiency in the system.At the very least, there should be availability of data for operators to make informed decisions about their operations with respect to other known sUAS operations.This scenario aims to explore this issue in terms of the data exchanges necessary to support these operations and the ANSP.
StoryThe daughter of a B-list actor is getting married.The day of the wedding sparks a plethora of activity at the site of the event.The videographer is planning to use two sUAS to capture aerial shots.Paparazzi drones want to perform a few flybys to capture footage.Some last-minute items are ordered by the caterer for the reception requiring three separate drone deliveries.One of the guests realize that their favorite beverage is not available at the bar and orders some to be delivered directly to him via sUAS.Meanwhile in the park next door to the site, there is a soccer game being recorded by a separate sUAS.In addition, there is a planned surveying activity by the state of the local roads.The local police also routinely patrol with drones at various times during the day along/above the public streets.Each operation announces its plan to operate per requirements since the wedding site is within 2 miles of an active airport.
DiscussionThis is an artificial, though possible, scenario.The goal is to begin investigating what data need to be exchanged to keep the airspace safe and efficient.We will not focus on the algorithms or rules that the FIMS may use to calculate capacity of the airspace.An initial area where this might fictionally occur is proposed here (near San Francisco (SFO) and San Carlos airports, has parks, suburban/urban environment):https://gist.github.com/alotau/f01ad7fdf4571061819c6a7e27b85cc511.5.5.4 Questions 1. Are the operation notifications really requests in this scenario?2. Is there a static procedure/rule that operator should follow in terms of managing the density of operations? 3. Does the FIMS keep track of the density of operations? 4. How does the FIMS notify if a critical density is reached? 5. How do USSs respond?
DataTo facilitate the scenarios described above, the data to be exchanged need definition.For this process, concepts from the FAA and NASA are used as a starting point to identify gaps and suitability for these scenarios.
Initial Requirements from FAAThe FAA has some initial thoughts on the data to be exchanged between the operator and the FIMS.These are detailed in the Table A-2 below: • Changes in authorization status prior to proposed flight (acceptance/authorization -> denial)• Changes in authorization status during the proposed flight (acceptance/authorization -> termination)• Cancellation of flight operation (prior to operation)• Change in flight operation end time (if operation ends earlier than originally planned; extension requires new request)• Operator acknowledgement that flight operation will no longer be conducted (if initially accepted / authorized, then denied or terminated by ATC)1 The data elements identified herein are limited to Part 101-E and Part 107 data exchanges with the Flight Information Management System (FIMS), and are not inclusive of all possible operations that require notification/authorization in lieu of an IFR flight plan.2 The UAS Operator will access relevant NAS information via NAS Data Services to ensure regulatory compliance and safety of flight.NAS Data Services may provide information such as locations of Special Activity Airspace, controlled airspace boundaries, airspace within 5 miles of an airport, airport-specific "no-fly zones" and "fly zones", and other areas designated as "no-fly zones".
Initial Implementation by NASAThe following are a subset of the elements from NASA's current (as of this writing) implementation of UTM.More details are available in the UTM Client Interface Control Document.
OperationAn operation within NASA's research platform consists of vehicle, operator, and intent information for a particular sUAS operationthis information is listed in Table A-3 below.Note that this table is directly from the ICD so some context for the comments and section references may be missing.
Field name Data type Req'd on submission
Allowed on submission
Description operation_volumes
Array of type operation_volumeYes.Yes.The actual geographical information for the operation.
Operation VolumeOperation volumes are used to describe where and when an operation is to take place.Multiple operation volumes can be used for a single operation.This promotes more efficient use of the airspace by allowing operators to only claim/announce use of the airspace they really need during a particular time period.Table A-4 describes the information used to describe an operation volume.
MessagesTo convey information between the UTM Core and operators within the UTM research platform, message can be exchanged.The schema for messages is presented in Table A-5 below: • INFORM: The UTM System sends this message when an operation changes state for any reason.• INTENT: A message from a UTM Client or UTM Manager requesting a state change in an operation.• ALERT: An alert sent from the UTM System or UTM Manager to UTM Clients.• RESPONSE: A response from the UTM System to a UTM Client/Manager that a prior message was received.
Mapping FAA Initial Requirements to NASA UTM Research Platform SchemaIn this section, we present an initial mapping of the FAA's initial thoughts on data exchange with the existing NASA schema (Table A-6).• operation_volumes Operation_volume:• effective_time_begin • effective_time_end • min_altitude_wgs84_ft • max_altitude_wgs84_ft • flight_geographyEach operation in the UTM research platform provides a set of operation_volumes to define where and when it will be operating.This maps cleanly to the data elements requested by the FAA.The only gap is the "indication if operating within 400ft radius of structure."Further details on this data requirement may be needed from the FAA side.An additional field may be required by the UTM research platform to accommodate this data element.Operation Information • Changes in authorization status prior to proposed flight (acceptance/authorization -> denial)• Changes in authorization status during the proposed flight (acceptance/authorization -> termination)Message• INFORM • INTENTThe various messages in the UTM research platform should be adaptable to the initial requirements of the FAA data exchange.Specific instances will need to be mapped out to determine any gaps.• Cancellation of flight operation (prior to operation) This message type should be able to meet the FAA initial requirements.Specific instances will need to be mapped out to determine any gaps.
Data Schema CommentsFor the other data fields that do not directly map to those suggested by the FAA, we propose to still include them in the demonstration under the current rules of the UTM research platform.As an example, we would require the inclusion of GCS location information even though there is not a direct mapping to the FAA elements because that is the current implementation of the UTM research platform.In the future, extraneous elements (as determined by this working group and the RTT as a whole) can be eliminated if needed.Finalize roles within the scenarios All Each participant will have clearly defined roles for participation within the scenarios.These roles will define, for example, the type of operation(s) that the participant will be responsible for portraying within the scenario.
ScheduleThe interaction/timing of the roles/operation will be defined as well.For example, participant A submits operation X at t=3, participant B submits operation Y at t=5, FIMS issues message Q at time=8, etc.Note that some scenarios will not necessarily have precisely
Appendix B -DWG Demonstration 1 Test DetailsThe content of this appendix was originally a stand-alone document.The information contained herein represents the main guiding documentation for the execution of the demonstration.This document was kept on a NASA-internal website that was frequently updated and occasionally exported for sharing with external partners.This set of test details grew from the original information presented in Appendix A.
OverviewThis document details the testing that will occur as part of the Data Exchange Working Group (DWG) Demonstration 1.An individual test is related to a single operator interacting with the Flight Information Management System (FIMS).Each test maps to a particular scenario as described in the DWG Demonstration 1 Plan.Each step in a test illustrates a single data exchange.Sets of tests may be performed simultaneously in a single experiment.The rest of this document describes some of the testing logistics and then the data exchanges, tests, and experiments.
ParticipantsThe following organizations are participating in this demonstration (Table B-1).The abbreviations will be used for reference in the test planning.
ScheduleThe Demonstration will take place over several non-consecutive dates.The nominal schedules for those dates are as follows:
4th Nov 2016
LocationThe testing will be completed remotely.The FIMS role will be filled by NASA Ames Research Center (ARC) by hosting a server reachable by the other participants.The other participants will connect remotely to the FIMS for data exchange.The other participants will not need to connect to each other in any way.Each participant may offer connections to data for monitoring and visualization of the Demonstration.Throughout the test, there will be an ongoing telecon for communications.In addition, there will be an ongoing video conference for coordination and communication.Only the participants will be on the video conference, but the telecon may be open to nonparticipants.The telecon and the video conference will be recorded.
ArchitectureThe architecture for this activity is not to be assumed to be the architecture of any future system.This architecture is mostly based on previous Unmanned Aircraft Systems Traffic Management (UTM) work by NASA.The FIMS and the Operator will build to a known application programming interface (API).The API will use a RESTful architecture for submitting and requesting data in a synchronous way to and from the FIMS (Figure B-1).This RESTful API will be described in an OpenAPI Specification file.For asynchronous messages, WebSockets will be used.All data exchanges will be over port 443 on the FIMS.
AssumptionsIn this section, we capture some of the assumptions of this test.
Data ExchangesTable B-5 lists the individual data exchanges that are currently expected between FIMS and operators.This list will likely evolve as testing and discussions continue.For each data exchange, an identifier has been assigned.This identifier will allow for reference within the individual tests to ensure traceability.Most of these are taken from the provided Federal Aviation Administration (FAA) documentation.The rows highlighted in yellow are new data exchanges that may be needed to satisfy the identified scenarios.
Scenario 0The purpose of the tests described in Tables B-8 through B-17 below is to get a baseline of data exchange.These tests are not tied to a particular use case.
Scenario 1The tests described in Tables B-18 through B-23 exercise the ability of the data exchanges to handle cases wherein there is an incursion of an operation into a region that is not typically allocated for use by that operation.To illustrate this scenario, we use National Park boundaries, which have been traditionally off-limits to commercial and hobby drone use.
Scenario 3Tables B-27 and B-28 describe Scenario 3.
ExperimentsEach experiment is comprised of one of more tests.The experiments may be performed multiple times to either verify certain concepts or integrate multiple participants in different roles.The experiments are labeled D1 (for Demonstration 1), followed by 'X' and a number.For each run of an experiment there may be a different configuration.For example, different participants may take different roles, or some starting assumptions may be altered.For each experiment below, we list the planned configurations.A summary of the six experiments is provided in Table B-29 below:
D1X4All Land Demonstrate notification of an all-land instruction from FIMS.
D1X5 Airport Configuration ChangeDemonstrate a change in the airspace relative to no-fly zones.
D1X6Operator Incursion Demonstrate interactions between operators and FIMS during incursions to a no-fly zone.
D1X1: Nominal 1In this experiment, we run the six non-fly-away, nominal scenarios in parallel.The roles for the operators are rotated through the six tests, so there are six configurations (Table B -30).For timing purposes, at T=0, the FIMS is verified to be operational and reachable.The Test Director then announces "All Tests are GO" at which point each participant is free to execute the assigned test for that configuration per the experiment sequence described in Table B-31.
Configurations
D1X2: Nominal 2The fly-away test (D1S0T7 "FlyAwayFigs") is exercised here.One operator reports a fly-away while the other five operators are executing nominal scenarios.The assumptions in this experiment include: 1.• None of the nominal tests are operating near the fly-away.• None of the nominal tests alter their plans based on the fly-away.• The no-fly zone implemented based on the fly-away does not intersect any of the nominal operations.Each participant takes the fly-away role once, allowing for six runs of this experiment (Table B -32).The experiment sequence is described in Table B-33.The fly-away operation will follow this plan:
Configurationshttps://gist.github.com/alotau/9206e45fdc6803a0efa62f20f749a552.The plans for all the tests in this experiment may file any other appropriate plans for that test such that those plans are well clear of the fly-away plan.The fly-away message should be sent by the operator upon their first position report outside their planned area.We could issue a fly-away message earlier than that, assuming the operator would know about loss of command earlier.
SequenceStep Time (min:sec) Action Notes 6 > 2:00 Per D1S0T7, operator continues to landing location at constant altitude then lands.Other operations (all unaffected by fly-away) complete their operations, 7 * Experiment completes.
D1X3: Fly-Away ExerciseThis experiment allows for D1S0T7 (FlyAwayFigs) to interact with active plans by other operators.This implies the affected operators are clearing the newly created no-fly zone and providing appropriate messages to the FIMS.In the configuration table (Table B-34), those operators tagged as "affected" will have a plan that intersects the fly-away no-fly zone.The others are not affected.
Configurations
SequenceThe experiment will begin on the mark of the Command Center and will be considered "T=0" for the experiment and then progress as detailed in Table B-35 below:   The fly-away message should be sent by the operator upon their first position report outside their planned area.We could issue a fly-away message earlier than that, assuming the operator would know about loss of command earlier.
5> 1:30 Per D1S0T7, operator continues to landing location at constant altitude then lands.Step Time (min:sec)
Action NotesAffected operations (D1S2T1) safely land ASAP while staying within planned operation area.6 * Experiment completes.12.9.4D1X4: All Land This experiment exercises Scenario 3 wherein all small unmanned aircraft system (sUAS) operations are ordered to "land now."There are two modes of operation that we are testing in terms of the operator response to this directive.First, the operator just figures out a safe way to land then executes that landing, finally indicating to the FIMS that the operation is complete.Second, the operator may plan a new path to safely terminate, submit that plan to the FIMS for acceptance, then execute (assuming acceptance is granted).Note that there are other information flows that may be equally valid and perhaps better for the concept, but we will only exercise these two options.Other options may include the requirement that such contingency plans are part of the original flight request, or that all operations literally go to ground ASAP from the time receiving the directive, and there could be others.
ConfigurationsNote that in Table B-36 we indicate the test that is run together with a label for the expected initial plan.The initial plans are detailed after the table.For example, in the set of initial plans, one is labeled as "β" so each test in the table that references "β" would use that plan with that test.
Table B-36: D1X4 Configurations
SequenceThe experiment will begin on the mark of the Command Center and will be considered "T=0" for the experiment and then progress as detailed in Table B-37 below:
D1X5: Airport Configuration ChangeThis experiment exercises Scenario 2 wherein an airport changes its configuration, which affects nearby sUAS operations by removing a no-fly zone and adding a different no-fly zone.This scenario and experiment is undertaken with the understanding that some of the underlying National Airspace System (NAS) data that would be required to implement such a scenario may not be easily available.Specifically, the dissemination of airport configurations are not necessarily part of the current NAS.San Jose International airport (SJC) is known to have two major configurations, a south flow configuration and a north flow configuration.The north flow is the nominal configuration.However due to weather/wind or coordination with other airports (SFO and OAK) in the Bayarea metroplex, there may be a need to switch to a south flow.Often this is planned, but the lead time to complete the configuration may be relatively short.To bound this experiment, we choose the artificial value of 10 minutes to allow all sUAS to clear the approach side of the airport when the configuration change is being implemented.More specifically, from the time that the configuration change is announced via the FIMS to Operators, all operations must cease operations in the new no-fly zone, while operations may commence in the newly freed no-fly zone from the other side of the airport.The airspaces to be used in this experiment are detailed here:https://gist.github.com/alotau/bfb98a6d372b0c21bacfc881f88581b7.
These are illustrated in
SequenceThe experiment will begin on the mark of the Command Center and will be considered "T=0" for the experiment and then progress as detailed in the Table B-39 below:
D1X6: Operator IncursionThis experiment exercises Scenario 1, wherein an operation unintentionally enters a no-fly zone.In this scenario, the no-fly zone is a National Park area that is nominally off-limits to sUAS operations.Two National Historic Sites will be used in this experiment: John Muir National Historic Site and the William Howard Taft National Historic Site.The boundaries of these sites are provided as a GitHub gist.
ConfigurationsThe configurations for this experiment are listed in Table B-40 below:
SequenceThe experiment will begin on the mark of the Command Center and will be considered "T=0" for the experiment and then progress as detailed in Table B-41 below:
Data Exchange Test CoverageIn this section, the individual data exchanges are mapped to the tests and experiments in which they are invoked.This will establish a minimal coverage of the data exchanges under test.As this document has been evolving, it may be that each test or experiment that would cover a data exchange is not listed, however since the goal of Table B-42 below is to establish minimum coverage of the data elements, these potential omissions are acceptable.The content of this appendix was originally a stand-alone document.The information contained herein provided some technical details for partners to aid in development.It is mainly included for completeness of documentation.Each operator has a designated queue for decisions.This queue will provide InformMessage data related to the specified operator's operations.For example, after an operator POSTs an operation to the /operations RESTful endpoint, that operator will receive the appropriate InformMessage (ACCEPTED, DENIED, etc.) via this queue.See the schema information describing InformMessages included within this document to understand the data that will be received via this queue.Note that if you are viewing this in a SwaggerUI, the "try it out" feature will not work since this is not a RESTful endpoint.responses description: "The user that created the operation.It is possible that an operation is created on behalf of an operator by, say, a manager.Nominally, this field will be equal to user_id."type: string primary_contact_name:description: "These are required fields.They are not currently checked for validity, but clients should endeavor to provide useful, appropriate information in these fields.Validity will be checked in the future.These values should represent the contact that should be used in case of an issue with the operation before, during, or after that operation."type: string primary_contact_phone:type: string primary_contact_email:type: string extra_contact_info: description: "Any additional contact information that may be useful (hours of availability, fax number, communication limitations, etc. gufi: "00000000-0000-4444-8888-000000000000" submit_time: "2016-10-04T09:15:40.727Z" decision_time: "2016-10-04T09:15:40.727Z" aircraft_comments: "Comments about the aircraft" flight_comments: "Comments about the flight" flight_geography_description: "A description of the geography" registration: "00000000-0000-4444-8888-000000000000" flight_number: "Flight number" user_id: "fimsUser" created_by: "fimsUser" primary_contact_name: "Jane Pilot" primary_contact_phone: "XXX-XXX-XXXX" primary_contact_email: "pilotjane@janepilot.com" extra_contact_info: "Fax:FigureFigure A-1: UTM Architecture
Figure A-2 shows an example sequence diagram for this scenario.
FigureFigure A-2: Incursion into No-Fly Zone
Figure A-3 shows an example sequence diagram for this scenario.
FigureFigure A-3: Request to Enter No-Fly Zone
FigureFigure B-1: FIMS RESTful Architecture
5 1 :100 to 1:30 Per D1S0T7, operator sends flyaway message to FIMS.FIMS issues no-fly zone announcement.
These plans are illustrated in Figure B-2 below.The fly-away operation is in orange, the affected operations are in blue, and the unaffected operations are in brown.The fan-shaped FIMS-generated no-fly zone is in red.
FigureFigure B-2: D1X3 Operation Plans
for each of the plans illustrated in Figure B-3 below are provided at https://gist.github.com/alotau/223fc7bca3d7eb93678868208b6f5484.
FigureFigure B-3: D1X4 Operation Plans
Figure B-4 below:
FigureFigure B-4: D1X5 Operation Plans

Table A -1: Deliverable DWG Artifacts Date Artifact(s) DescriptionADate Artifact(s)Description• Any media recorded during demonstration (telecon, videocon,etc.)TBD Qualitative statementsEach participant will provide feedback on the working group anddemonstration.TBD Plan for future UTM DWGretiring? continuing with additional demos? etc.TBD Demonstration plan document A final version of this document.TBD Data collected during• Log of communications to and from FIMSdemonstration• Log of communications to and from each Operator
The first is the John Muir National Historic Site in Martinez, CA, which is in the Bay Area to the east of San Francisco, CA.The second is the William Howard Taft National Historic Site located in Cincinnati, OH.GeoJSON descriptions of these areas are provided here:https://gist.github.com/alotau/4ff38d01fa6a7dee6132e474c3bf08bfThese data were collected from the US Department of Transportation data website.Specifically, the URL for the National Park data is:http://www.rita.dot.gov/bts/sites/rita.dot.gov.bts/files/AdditionalAttachmentFiles/parks.zip
11.5.4 Scenario 3: All LandWhat does the constraint announcement contain from the FIMS?How do operators with active operations in the new constraint react safely?What if they can't land within five minutes?Should they not have been allowed to operate in that zone in the first place in that case?What if they can't land within five minutes due to some safety issue?How does the airport ultimately get notified?Are the time values proposed reasonable?
Table A -2: Initial FAA Data-Exchange Requirements UAS Operator (Part 101-E and Part 107) 1 Data Exchanges with FIMS Flight Request (Operator -> FIMS) Flight Authorization (FIMS -> Operator)AFlight Status (Operator ->FIMS) 2• Operator Information• Indication if flight information iso Operator Namesubmitted too far in advance ofo Phone Numberoperation• Aircraft Information• Indication that flight informationo Registration Numberhas been received(or Serial Number if• Response to flight operation<250g)request:• Operation Informationo Accepted (Part 101-E)o Indication whether/ Authorized (Part 107)operation is under Parto Denied101-E, Part 107, or Parto ATC notification not107 waiver; If waiverrequired (Part 101-E) /then:ATC authorization not▪ Waiverrequired (Part 107)CertificateNumbero Date of ProposedOperationo Start Time of Operationo Duration of Operationo Geographical OperatingAreao Maximum OperatingAltitude▪ Indication ifoperating within400ft radius ofstructureo Purpose of Operation(voluntary)• Acceptance of Terms andConditions• Flight denial challenge (Part107 only if flight is initiallydenied)
Table A -3: Vehicle, Operator and Intent InformationAField name Field nameData type Data typeReq'd on Req'd onAllowed on Allowed onDescription Descriptionsubmission submissionsubmission submissioncurrently. This registration information in these fields.value is provided to Validity will be checked inoperators upon manual the future. These valuesregistration of their vehicle should represent the back-with NASA. See Section up contact that should be4.3.3. used in case of an issueflight_numberStringNo.Yes.Optional. Currently with the operation before,unused by the UTM during, or after thatSystem, may be useful to operation.extra_contact_infoStringNo.Yes.the operator for Any additional contactidentification purposes. information that may beField name unmannedData type String, BooleanReq'd on submission Yes.Allowed on Yes. submissionDescription useful (hours of Please include "unmanned":"true" with all availability, fax number,gufiString, UUIDNo.No.Each operation has a submissions. communication limitations,user_id state submit_time created_by controller_locationString String String, Date String Geometry of type POINTNo. No. No. No. Yes.Yes. No. No. No. Yes.globally unique flight etc.). This field is populated identifier (GUFI) assigned The current state of the based on the provided upon submission. It is a operation. Not required credentials in the HTTPS JSON string that conforms for submission, will be header. If submitted by a to the UUID version 4 assigned by the UTM user, the value will be specification (see Section System. ignored. 3.1) The planned position of The user that created the Time the operation the UAS Controller during operation. It is possible submission was received the operation. Assumed to that an operation is by UTM System. created on behalf of an be a static location.decision_time gcs_locationString, Date Geometry of typeNo. No.No. Yes.A timestamp set by the operator by, say, a If not submitted, the UTMPOINTUTM System any time the manager. Nominally, this System will assume thestate of the operation is field will be equal to GCS is co-located with theupdated, for example user_id. UAS Controller. Assumedprimary_contact_name primary_contact_phone faa_rule primary_contact_emailString StringYes. No.Yes. Yes.when the flight goes from to be a static location. These are required fields. PROPOSING to They are not currently Indication whether this ACCEPTED (see Section checked for validity, but operation is under Part 4.1) clients should endeavor to 101-E, Part 107, Part 107aircraft_commentsStringNo.Yes.Informative text about the provide useful, appropriate waiver, or a Part TBD.aircraft. Not used by the information in these fields. Part TBD is a potentialUTM System. Validity will be checked in future rule that may coverflight_commentsStringNo.Yes.Informative text about the the future. These values operations such as thoseoperation. Not used by should represent the under test by UTM.waiver_certificate_numberStringNo.Yes.the UTM System. contact that should be If a waiver has beenflight_geography_description StringNo.Yes.used in case of an issue obtained for the Part 107 Informative text about the with the operation before, rules, then the operator operational geography. during, or after that would have a waiver Not used by the UTM System. operation. certificate number. For anyregistration secondary_contact_name secondary _contact_phone secondary _contact_emailString, UUID StringYes. No.Yes. Yes.These are optional fields. operation submissions The registration ID of the They are not currently with vehicle flying this checked for validity, but faa_rule=PART_107W, operation. Note the UTM vehicle per operation provide useful, appropriate System assumes a single clients should endeavor to this field is required.
Table A -4: Operation Volume Information Field name Data type Req'd on submission Allowed on submissionAField nameData type Req'd onAllowed onDescriptionsubmissionsubmissionconform_min_altitude_wgs84_ft Number,No.No.The minimum altitudeDoubleassigned and used by theUTM System to checkvertical conformance of anoperation. Based on UTMClient-provided min altitude.conform_max_altitude_wgs84_ft Number,No.No.The maximum altitudeDoubleassigned and used by theUTM System to checkvertical conformance of anoperation. Based on UTMClient-provided max altitude.flight_geographyGeometry Yes.Yes.A description of theDescription operational area. Thisshould be the area withinordinalIntegerYes.Yes.This integer represents the which the operation willordering of the operation remain.conformance_geographyGeometry No.No.volume within the set of A UTM-generatedoperation volumes. Need geography based on thenot be consecutive integers. flight geography. Seeeffective_time_beginString,Yes.Yes.Earliest time the operation Section 4.4.2 for discussion.Datewill use the operationvolume.effective_time_endString,Yes.Yes.Latest time the operation willDatedone with the operationvolume.actual_time_endString,No.No.Time that the operationalDatevolume was freed for use byother operations.conformance_time_beginString,No.No.Assigned by UTM System.DateTime buffer before thesubmitted begin time.conformance_time_endString,No.No.Assigned by UTM System.DateTime buffer after thesubmitted end time.min_altitude_wgs84_ftNumber,Yes.Yes.The minimum altitude forDoublethis operation in thisoperation volume. InWGS84 reference systemusing feet as units.max_altitude_wgs84_ftNumber,Yes.Yes.The maximum altitude forDoublethis operation in thisoperation volume. InWGS84 reference systemusing feet as units.
Table A -5: Message Information Field name Data type Required from Client upon submission? Allowed from Client upon submission?AField nameDataRequired fromAllowed fromDescriptiontypeClient uponClient uponsubmission?submission?categoryString YesYesThe type of message. Must take exactly oneof the following values:Descriptionmessage_idString,NoNoUnique identifierUUIDoriginString NoNoMust take exactly one of three values:• CLIENT. Message is from a UTM Clientto the UTM System.• UTM: Message was automaticallygenerated by the UTM System.• MANAGER: Message was generated bya UTM Manager (a human).userString NoNoPopulated by the UTM System. The targetuser for a message from the UTM System.gufiString,YesYesThe assigned GUFI for the operationUUIDreferenced by the message.
Table A -6: Initial Data Exchange Mapping FAA Statement NASA Data Element DiscussionAFAA StatementNASA Data ElementDiscussionbe useful in contingency or capacitymanagement activities. A successfulregistration of a vehicle in the UTMresearch platform provides a UUID forthat registered vehicle, which is thevalue required in the registration field.Operation Information-Suggesting the addition of a new field• Indication whether operationto the operational plan. An enumeratedis under Part 101-E, Part 107,string field called "faa_rule" to indicateor Part 107 waiver; If waiverwhich FAA rule is being used for thisthen:operation that is required upono Waiver Certificatesubmission with the following allowedNumbervalues:• Part 101-E• Part 107• Part 107 WaiverAdd an additional field for WaiverCertificate Number that is only requiredif "faa_rule" has the value "Part 107Waiver". This field will be a string withthe name "waiver_certificate_number"and its value will be the waivercertificate number that was supplied bythe FAA.Currently no other information from theFAA has been received on thesevalues.Operation InformationOperation:• Date of Proposed Operation• Start Time of OperationOperator Information • Operator Name • Phone Number • Duration of Operation • Geographical Operating Area • Maximum Operating Altitude o Indication if operating within 400ft radius of structureOperation: • user_id • primary_contact_name • primary_contact_phone • primary_contact_email • secondary_contact_nameThis is a relatively clean mapping of data elements. The NASA schema appears more (or overly) complete for the FAA's purposes. Note that in the NASA UTM research platform, each user_id is associated with a specific• secondaryoperator. Typically, the operator in the_contact_phoneUTM research platform would be an• secondaryorganization. That operator may have_contact_emailseveral user_id's associated with it. It isthe user_id that is submitted with theoperation, thus allowing a look up ofthe associated operator.Aircraft InformationOperation:This is a relatively clean mapping. In• Registration Number (or• registrationthe UTM research platform, eachSerial Number if <250g)vehicle is required to be registered.That registration includes a set ofperformance characteristics that may
Table A -A7 describes the schedule for executing the Collaborative Demonstration.Table A-7: Collaborative Demonstration ScheduleDate Activity/Milestone/DeliverableResponsibleDescriptionParty17Complete initial planning with fullAllThis date will be the final meeting day of the fullAugworking groupworking group.201619UTM DWG CollaborativeNASAThe final working draft of this documentAugDemonstration Plan final draftprovided to all members of the working group.2016May continue to evolve to better represent theplanning and implementation of thecollaborative demonstration.23Presentation/Discussion of UTMNASAA briefing to the larger RTT community on theAugDWG Demonstration Plan to RTTactivities, progress, and plans of the UTM2016partnersDWG. Essentially a walkthrough of thisdocument with relevant discussion targeted forstakeholders not directly involved in itsformulation.1Initial information exchangeAllA description of the system architecture that willSeparchitecturesupport the collaborative demonstration.20167Collaborative Demonstration virtualAllTag-up to discuss progress. Scenarios shouldSepmeetingbe finalized included the general roles of2016participants. The final working draft of the dataschemas to support the collaborativedemonstration should be a product of thismeeting.14Sep2016
Table B -1: Participating OrganizationsBOrganizationAbbreviationPrimary ContactEmailPhoneNASANASAJoseph Riosjoey.rios@nasa.govAirMapAIRM--AmazonAMZN--ANRA TechnologiesANRA--SimulyzeSIMU--TranstrexTRTX--
Table B -2: 4th Nov 2016 DemonstrationB12.3.2 14th Nov 2016Time (Pacific)Activity0900Telecon setup0910Roll call0915Practice submissions, debugging1000D1X11100D1X21200Conclude
Table B -3: 14th Nov 2016 DemonstrationBTime (Pacific)Activity0900Telecon setup0910Roll call0915Practice submissions, debugging0945D1X31030D1X41115D1X51200D1X61245Conclude12.3.3 17th Nov 2016
Table B -4: 17th Nov 2016 Demonstration Time (Pacific) ActivityBTBDTBD
Table B -5: Data ExchangesBFor this demonstration, the demonstration number is "1" for all tests.So, "D1S2T3" would indicate Demonstration 1, Scenario 2, Test 3.The tables are grouped by scenario, with a brief description of the scenario preceding the group of test tables.Data Data Data DataStatement Statement Statement StatementData Data Data DataRESTful RESTful RESTful RESTfulSTOMP STOMP STOMP STOMPApplicatio Applicatio Applicatio ApplicatioNotes Notes Notes NotesExch Exch Exch ExchDirec Direc Direc DirecAPI API API APIQueue Queue Queue Queuen/JSON n/JSON n/JSON n/JSONange ange ange angetion tion tion tionModel Model Model ModelID ID ID IDD1E1thorization -> OperatorOper(modify POST-PositionE.4 maybe a free_text or warningexisting operation) --/positions 12.8.1 Scenario and Test Summary D1E2 Indication if FIMS denial) D1E8 Changes in authorization FIMS to 7 supplies position ator to D1E1 Operator -report(s). FIMS A summary of the scenarios is provided in Table B-6 below: /user/{operator InformMes /user/{operator }/decision InformMes sage --InformMessage element as well? InformMessage 1 TERMINATED Can this data exchange be3flight information is status during the proposed notifies FIMS of unplanned Operator supplies ato Oper Oper ator Oper ator}/decision Table B-6: Scenario Summary sage • PLAN_SUBMITTED_TOO_EA RLY accomplished with D1E15?submitted too far in advance of operation D1E3 Indication that flight information has been received flight start time, as filed in the operation plan (acceptance/au thorization -> termination) D1E9 Cancellation of deviation in course. single report or periodic Scenario Scenario Name ator FIMS to Oper ator Oper to FIMS D1E1 4 FIMS notifies operators of airspace constraint change. FIMS to Oper ator reports, ID depending on Scenario 0 Nominal Operations HTTP 201 response to POST /operation POST Scenario Description -FIMSApiRe sponse -IntentMess -/topic/constrai ntChange AlertMessa ge Scenario 0 exercises baseline data exchanges used during nominal FIMSApiResponse • 201 • CREATED • "some string (gufi?)" IntentMessage For Scenario 2, this message notifies operators that the no-fly FIMS request operations. zones around the airport are changing or have changed. This can also take care of a (see D1E18 Scenario 1 Operator Incursion Scenario 1 demonstrates the handling of UAS incursions into and D1E19). unintended or unallocated regions.s POST POST -/message s -Scenario 2 Airspace Constraint D1E4 Response to flight operation request: Accepted ( Part 101-E ) / FIMS to Oper D1E1 Change in flight Oper D1E1 Operator Oper ator flight operation (prior to proposed operation start time) ator to FIMS D1E1 8 FIMS requests single position report. FIMS to Oper ator Scenario 2 demonstrates the creation and handling of no-fly zones. -IntentMess IntentMessage -AlertMessa Anomalies may include, but EST_SINGLE /user/{operator }/decision InformMes sage InformMessage • ACCEPTED (Part 101-E) • AUTHORIZED (Part 107) age 1) CANCEL dynamic constraint introduced due to an anomalous operation. AlertMessage: 1 CONSTRAINT_CHANGE /user/{operator }/decision AlertMessa ge AlertMessage: Change 1 OPERATIONS Scenario 3 All Land Scenario 3 demonstrates the issuing of "All Land" alerts to all 2 WARNING 3 POSITION_REPORT_REQU operations.0 5Authorized operation end notifies FIMS ofator ator/message /messageage ge1) CLOSE wouldn't be limited to the followingD1E1(Part 107) time (if flight anomaly. FIMS requeststo to FIMSs s -/user/{operatorAlertMessaalert messages: AlertMessage:D1E5 Response to flight operation request: Denied operation ends 9 repeated earlier than originally position reports. planned;FIMS to FIMS FIMS to Oper ator Oper ator-/user/{operator }/decision }/decisionInformMes sage geAlertMessage: 1. OPERATIONS InformMessage • DENIED UNPLANNED_LANDING 2. WARNING 1 2 UNCONTROLLED_LANDING 3. POSITION_REPORT_RE 3 FLY_AWAY QUEST_CONTINUOUSD1E6 Response to flight operation request: ATC notification not 101-E) / ATC operation will required (Part extension requires new D1E2 FIMS cancels request) 0 request for D1E1 Operator position 1 acknowledgem ent that flight reports.FIMS FIMS to Oper ator FIMS to Oper Oper ator to ator--POST /message s/user/{operator }/decision /user/{operator }/decision -InformMes sage AlertMessa ge IntentMess age(between Operator and UAS)? HIJACK InformMessage 4 5 OFF_COURSE AlertMessage: 5. NOTIFICATION_NOT_RE 6 UNPLANNED_DEVIATION 1. OPERATIONS QUIRED (Part 101-E) IntentMessage: (Currently only sent from 2. WARNING 6. AUTHORIZATION_NOT_R EQUIRED (Part 107) FIMS to Operator) 3. POSITION_REPORT_RE D.1 ACK_NO_OPERATION 7 Communications failure QUEST_CANCELD1E2authorization no longer be OperatorOperPOST-IntentMessIntentMessage1not required conducted (if Operator acknowledgesator/messageageAlertMessage: 1.DataStatement (Part 107) initially notifies FIMS that activeData toRESTful sSTOMPApplicatioNotes BACK_TO_CONFORMANCEExch ange ID D1E1 Flight Request Oper Direc tion ator to FIMS (acceptance/au deviation. ators message. operation plan unplanned Oper anomaly ator filed in the 2 operators of to All receipt of Oper start time, as D1E1 FIMS notifies FIMS 6 acknowledges to D1E7 Changes in authorization status prior to prior to proposed flight FIMS to D1E1 FIMS FIMS ATC) ator terminated by after anomaly. nated. Oper then denied or conformance cancelled/termi authorized, is back in been accepted / that operation operation has FIMSAPI POST /operation s PUT /message operation) to POST s (new -response /operation HTTP 201 -Queue cy /topic/emergen --/user/{operator }/decisionn/JSON Model ge AlertMessa sponse Operation FIMSApiRe InformMes sageanomaly" E.3 UNPLANNED_DEVIATION E.2 WARNING C "Received notification of E.1 OPERATIONS B ACCEPTED AlertMessage: A Status Code 202 FIMSApiResponse 6. DENIED InformMessages/{gufi}ACK_NO_OPERATION12.8 TestsEach table below represents a single test.Each test has a unique designator.That designator is a concatenation of the Demonstration number, scenario number, and test number.In addition, there may be a descriptive title associated with the test.A summary of the tests is provided in Table B-7 below:
Table B -7: Test SummaryBScenario ScenarioTest ID Test Name Test ID Test NameTest Description Test DescriptionExperiment ExperimentID IDD1S0T6 "CompletedCucumber" Operator performs a D1S2T2 "FlippingFruit" FIMS announces aD1X1 D1X2D1X5nominal operation that new no-fly zonecompletes earlier than affecting an activeplanned. operation, operatorD1S0T7 "FlyAwayFigs"Operator notifies requests new planD1X2 D1X3FIMS of a fly-away that is denied.D1S2T3 "GreatGoose"operation. FIMS announces aD1X5D1S0T8 "NegatoryNotify"Operator tries to notify new no-fly zoneD1X2FIMS of operation, but affecting an activethe notification is not operation, operatorrequired. requests new planD1S0T9 "PaisleyPositions"FIMS requests that is accepted.D1X1ScenarioD1S3T1 "LandingLizards"position reports, then FIMS issues an 'allD1X43cancels request. land' directive,Scenario 1D1S0T10 "WhereOne" D1S1T1 "DeviatingDough" D1S1T2 "RequestingRhubarb" Operator requests FIMS requests a operator indicates when the operation single position report. Operator has an FIMS accepts. operation. new plan to land, terminate that operator requests a causing the FIMS to land' directive, unplanned deviation has landed. D1S3T2 "LandingLoons" FIMS issues an 'allD1X2D1X4D1X6 D1X6deviation through ano-fly zone that isScenarioTest ID Test NameTest Description denied.ExperimentIDD1S1T3 "ReplanRadish"Operator requestsD1X6ScenarioD1S0T1 "NominalNoodle"Operator notifies deviation through aD1X1 D1X2 D1X30FIMS of an operation no-fly zone that isthat gets accepted; accepted.D1S1T5 "NoHarmNoFoul"operation completes unplanned deviation, uneventfully. Operator has anD1X6D1S0T2 "CancelledCarrot"Operator cancels an notifies FIMS andD1X1accepted operation corrects course.D1S1T6 "FixyFixy"before it begins. Operator has anD1X6D1S0T3 "DenialDonut"FIMS denies a unplanned deviation,D1X1previously accepted requests new planoperation, effectively and is accepted.D1S1T7 "NoSoupForYou"cancelling it before it unplanned deviation, begins. Operator has anD1X6D1S0T4 "TerminatedTomato" FIMS terminates an requests new planD1X2active operation. and is denied.ScenarioD1S0T5 "EarlyEwok" D1S2T1 "NoFlyGuy"Operator notifies FIMS announces aD1X1D1X3D1X52FIMS of an operation new no-fly zonetoo far in advance of affecting an activethe operation. operation.
Table B -8: NominalNoodle D1S0T1 "NominalNoodle": Operator notifies FIMS of an operation that gets accepted; operation completes uneventfully.BStep ActionActorRemarksDataExchange1Operator FlightOperator Operator requests a beyond visual line-of-sightD1E1Request(BVLOS) operation.2Flight RequestFIMSFIMS sends message to operator that flight requestD1E3Receivedwas received.3Flight RequestFIMSFIMS sends message to operator that flight requestD1E4Acceptedwas accepted.
Table B -9: CancelledCarrot D1S0T2 "CancelledCarrot": Operator cancels an accepted operation before it begins.BStep ActionActorRemarksDataExchange1Operator FlightOperator Operator requests a BVLOS operation.D1E1Request2Flight RequestFIMSFIMS sends message to operator that flight requestD1E3Receivedwas received.3Flight RequestFIMSFIMS sends message to operator that flight requestD1E4Acceptedwas accepted.4Flight CancelledOperator Operator sends cancellation message to FIMS.D1E9
Table B -10: DenialDonut D1S0T3 "DenialDonut": FIMS denies a previously accepted operation, effectively cancelling it before it begins.BStep ActionActorRemarksDataExchange1Operator FlightOperator Operator requests a BVLOS operation.D1E1Request2Flight RequestFIMSFIMS sends message to operator that flight requestD1E3Receivedwas received.3Flight RequestFIMSFIMS sends message to operator that flight requestD1E4Acceptedwas accepted.4Flight Request Denied FIMSFIMS sends message to operator that the flightD1E7request was denied.5OperatorOperator Operator sends message to FIMS indicating thatD1E11Acknowledgmentoperation will no longer take place.
Table B -11: TerminatedTomato D1S0T4 "TerminatedTomato": FIMS terminates an active operation.BD1S0T4"TerminatedTomato": FIMS terminates an active operation.5OperatorOperator Operator sends message indicating that operation isD1E10Acknowledgmentterminated and no longer flying.Step ActionActorRemarksDataExchange1Operator FlightOperator Operator requests a BVLOS operation.D1E1Request2Flight RequestFIMSFIMS sends message to operator that flight requestD1E3Receivedwas received.3Flight RequestFIMSFIMS sends message to operator that flight requestD1E4Acceptedwas accepted.4Flight RequestFIMSFIMS sends message to operator that flight requestD1E8Terminatedis terminated during operation.
Table B -12: EarlyEwok D1S0T5 "EarlyEwok": Operator notifies FIMS of an operation too far in advance of the operation.BStep ActionActorRemarksDataExchange1Operator FlightOperator Operator requests a BVLOS operation.D1E1Request2Flight RequestFIMSFIMS sends message to operator that flight request wasD1E3Receivedreceived.3Flight RequestFIMSFIMS sends message to operator that flight request wasD1E2Acceptedsubmitted too far in advance.
Table B -13: CompletedCucumber D1S0T6 "CompletedCucumber": Operator performs a nominal operation that completes earlier than planned.BD1S0T7"FlyAwayFigs": Operator notifies FIMS of a fly-away operation.4Operator Reports Fly-AwayOperator Operator sends message indicating thatD1E15operation is no longer under positivecontrol.5Report ReceivedFIMSFIMS acknowledges report.D1E166FIMS Announces No-Fly ZoneFIMSFIMS implements a no-fly zone that isD1E14expected to contain the fly-away vehicle.7FIMS Announces UnplannedFIMSFIMS sends information to otherD1E12Deviationoperations about the unplanned deviation.8FIMS Requests Position Reports FIMSFIMS sends message to operatorD1E19requesting continuous (1Hz) positionreports.9Operator Supplies PositionOperator Operator begins supplying position reportsD1E17Reportsat 1Hz.10 Operator Reports FlightOperator Operator sends message indicating whenD1E10Completion/Terminationvehicle is known to have landed.11 FIMS Announces Removal of No-FIMSWhen fly-away is clear of airspace, the adD1E14Fly Zonehoc no-fly zone is removed.Step ActionActorRemarksDataExchange1Operator FlightOperator Operator requests a BVLOS operation.D1E1Request2Flight RequestFIMSFIMS sends message to operator that flight requestD1E3Receivedwas received.3Flight RequestFIMSFIMS sends message to operator that flight requestD1E4Acceptedwas accepted.4Flight RequestOperator Operator sends message indicating that operationD1E10Terminatedcompleted earlier than planned.Table B-14: FlyAwayFigsD1S0T7"FlyAwayFigs": Operator notifies FIMS of a fly-away operation.Step ActionActorRemarksDataExchange1Operator Flight RequestOperator Operator requests a BVLOS operation.D1E12Flight Request ReceivedFIMSFIMS sends message to operator thatD1E3flight request was received.3Flight Request AcceptedFIMSFIMS sends message to operator thatD1E4flight request was accepted.
Table B -15: NegatoryNotify D1S0T8 "NegatoryNotify": Operator tries to notify FIMS of operation, but the notification is not required.BStep ActionActorRemarksDataExchange1Operator FlightOperator Operator requests a line-of-sight (LOS) operationD1E1Requestwithin Class.2Flight RequestFIMSFIMS sends message to operator that flightD1E3Receivedrequest was received.3Flight RequestFIMSFIMS sends message to operator that flightD1E6Unnecessaryrequest was not required.
Table B -16: PaisleyPositions D1S0T9 "PaisleyPositions": FIMS requests position reports, then cancels request.BD1S0T9"PaisleyPositions": FIMS requests position reports, then cancels request.4FIMS RequestsFIMSAfter the start time of the operation, the FIMS requestsD1E19Positionscontinuous position reports.5Operator SubmitsOperator Operator begins to send in position reports at 1Hz.D1E17Positions6FIMS CancelsFIMSAfter a couple of minutes of receiving position reports,D1E20RequestFIMS cancels position report request.Table B-17: WhereOneD1S0T10"WhereOne": FIMS requests a single position report.Step ActionActorRemarksDataExchange1Operator FlightOperator Operator requests a LOS operation within Class.D1E1Request2Flight RequestFIMSFIMS sends message to operator that flight requestD1E3Receivedwas received.3Flight RequestFIMSFIMS sends message to operator that flight requestD1E4Acceptedwas accepted.4FIMS RequestsFIMSAfter the start time of the operation, the FIMSD1E18Positionrequests a single position report.5Operator SubmitsOperator Operator sends a single position report.D1E17PositionsStep ActionActorRemarksDataExchange1Operator FlightOperator Operator requests a LOS operation within Class.D1E1Request2Flight RequestFIMSFIMS sends message to operator that flight requestD1E3Receivedwas received.3Flight RequestFIMSFIMS sends message to operator that flight requestD1E4Acceptedwas accepted.
Table B -18: DeviatingDough D1S1T1 "DeviatingDough": Operator has an unplanned deviation causing the FIMS to terminate that operation.BD1S1T1"DeviatingDough"Step ActionActorRemarksDataExchange1Operator Flight Request Operator Operator requests a BVLOS operation skirting aD1E1National Park boundary.2Flight Request Received FIMSFIMS sends message to operator that flightD1E3request was received.3Flight Request Accepted FIMSFIMS sends message to operator that flightD1E4request was accepted.4Operator Notifies ofOperator Operator sends message to FIMS that operationD1E15Deviationis off course.
: Operator has an unplanned deviation causing the FIMS to terminate that operation.5FIMS AcknowledgesFIMSFIMS indicates that the deviation message wasD1E16received.6Flight RequestFIMSFIMS cancels the original flight request due toD1E8Terminatedinability to maintain accepted plan.7FIMS Requests PositionFIMSFIMS sends message to operator requestingD1E19Reportscontinuous (1Hz) position reports.8Operator SuppliesOperator Operator begins supplying position reports atD1E17Position Reports1Hz.9Flight RequestOperator Operator acknowledges receipt of the the flightD1E21Termination Receivedtermination request.10 Flight TerminationOperator Operator sends message when flight isD1E10Completesuccessfully terminated.
Table B -19: RequestingRhubarb D1S1T2 "RequestingRhubarb": Operator requests deviation through a no-fly zone that is denied.BStep ActionActorRemarksDataExchange1Operator FlightOperator Operator requests a BVLOS operation skirting aD1E1RequestNational Park boundary.2Flight RequestFIMSFIMS sends message to operator that flight requestD1E3Receivedwas received.3Flight RequestFIMSFIMS sends message to operator that flight requestD1E4Acceptedwas accepted.4Operator RequestsOperator Operator sends message to FIMS requesting newD1E1Deviationplan through nominal no-fly zone (National Park).5FIMS Acknowledges FIMSFIMS indicates that the deviation request messageD1E3was received.6Deviation RequestFIMSFIMS denies the request, leaving the operator toD1E5Deniedcontinue with the originally accepted flight plan.
Table B -20: ReplanRadish D1S1T3 "ReplanRadish": Operator requests deviation through a no-fly zone that is accepted.BD1S1T3"ReplanRadish"Step ActionActorRemarksDataExchange1Operator FlightOperator Operator requests a BVLOS operation skirting aD1E1RequestNational Park boundary.2Flight RequestFIMSFIMS sends message to operator that flight requestD1E3Receivedwas received.
: Operator requests deviation through a no-fly zone that is accepted.3Flight RequestFIMSFIMS sends message to operator that flight requestD1E4Acceptedwas accepted.4Operator RequestsOperator Operator sends message to FIMS requesting newD1E1Deviationplan through nominal no-fly zone (National Park).5FIMS Acknowledges FIMSFIMS indicates that the deviation request messageD1E3was received.6Deviation RequestFIMSFIMS accepts the requested deviation.D1E4Accepted7Flight RequestOperator Operator sends message indicating operationD1E10Terminatedcompletes the new plan early.D1S1T4 REMOVED AS DUPLICATION.
Table B -21: NoHarmNoFoul D1S1T5 "NoHarmNoFoul": Operator has an unplanned deviation, notifies FIMS, corrects course.BStep ActionActorRemarksDataExchange1Operator Flight Request Operator Operator requests a BVLOS operation skirting aD1E1National Park boundary.2Flight Request Received FIMSFIMS sends message to operator that flightD1E3request was received.3Flight Request Accepted FIMSFIMS sends message to operator that flightD1E4request was accepted.4Operator Notifies ofOperator Operator sends message to FIMS that operationD1E15Deviationis off course.5FIMS AcknowledgesFIMSFIMS indicates that the deviation message wasD1E3received.6Operator Notifies ofOperator Operator indicates the operation is now back inD1E15Correctionconformance.7FIMS AcknowledgesFIMSFIMS indicates that the correction message wasD1E3received.8FIMS Requests PositionFIMSFIMS requests one position report to help verifyD1E18Reportflight is back on course.9Operator SuppliesOperator Operator sends in a single position report to theD1E17PositionFIMS.10 Flight TerminationOperator Operator sends message when flight isD1E10Completesuccessfully terminated.
Table B -22: FixyFixy D1S1T6 "FixyFixy": Operator has an unplanned deviation, requests new plan and is accepted.BStep ActionActorRemarksDataExchange1Operator FlightOperator Operator requests a BVLOS operation skirting aD1E1RequestNational Park boundary.2Flight RequestFIMSFIMS sends message to operator that flightD1E3Receivedrequest was received.3Flight RequestFIMSFIMS sends message to operator that flightD1E4Acceptedrequest was accepted.4Operator Notifies ofOperator Operator sends message to FIMS that operation isD1E15Deviationoff course.5FIMS AcknowledgesFIMSFIMS indicates that the deviation message wasD1E3received.6Operator RequestsOperator Plan modification requested that is compatible withD1E1Deviationthe unplanned deviation.7FIMS AcknowledgesFIMSFIMS indicates that the plan request was received. D1E38FIMS AcceptsFIMSFIMS accepts the requested deviation.D1E4Deviation
Table B -23: NoSoupForYou D1S1T7 "NoSoupForYou": Operator has an unplanned deviation, requests new plan and is denied.B12.8.4 Scenario 2Tables B-24 through B-26 describe Scenario 2.Step ActionActorRemarksDataExchange1Operator Flight Request Operator Operator requests a BVLOS operation skirting aD1E1National Park boundary.2Flight Request Received FIMSFIMS sends message to operator that flightD1E3request was received.3Flight Request Accepted FIMSFIMS sends message to operator that flightD1E4request was accepted.4Operator Notifies ofOperator Operator sends message to FIMS that operationD1E15Deviationis off course.5FIMS AcknowledgesFIMSFIMS indicates that the deviation message wasD1E3received.6Operator RequestsOperator Plan modification requested that this compatibleD1E1Deviationwith the unplanned deviation.7FIMS AcknowledgesFIMSFIMS indicates that the plan request wasD1E3received.8FIMS Denies DeviationFIMSFIMS denies the requested deviation.D1E5Request
Table B -24: NoFlyGuy D1S2T1 "NoFlyGuy": FIMS announces a new no-fly zone affecting an active operation.BStep ActionActorRemarksDataExchange1Operator FlightOperator Operator requests a BVLOS operation near airport in anD1E1Requestallowed region.2Flight RequestFIMSFIMS sends message to operator that flight request wasD1E3Receivedreceived.3Flight RequestFIMSFIMS sends message to operator that flight request wasD1E4Acceptedaccepted.4No-Fly ZoneFIMSFIMS announces that the airspace configuration isD1E14Notificationchanging: new no-fly zone added which affects the activeoperation.5Flight RequestOperator Operator sends message indicating operation completesD1E10Terminatedthe plan early.
Table B -25: FlippingFruit D1S2T2 "FlippingFruit": FIMS announces a new no-fly zone affecting an active operation, operator requests new plan that is denied.BStep ActionActorRemarksDataExchange1Operator FlightOperator Operator requests a BVLOS near airport in an allowedD1E1Requestarea.2Flight RequestFIMSFIMS sends message to operator that flight requestD1E3Receivedwas received.3Flight RequestFIMSFIMS sends message to operator that flight requestD1E4Acceptedwas accepted.4No-Fly ZoneFIMSFIMS announces airspace configuration is changingD1E14Notificationwith a no-fly zone affecting operation.5Operator RequestsOperator Operator requests new plan to vacate the new no-flyD1E1Deviationzone.6Deviation RequestFIMSFIMS denies the requested deviation.D1E5Denied7Flight RequestOperator Operator sends message indicating operationD1E10Terminatedcompletes the plan early.
Table B -26: GreatGoose D1S2T3 "GreatGoose": FIMS announces a new no-fly zone affecting an active operation, operator requests new plan that is accepted.BStep ActionActorRemarksDataExchange1Operator FlightOperator Operator requests a BVLOS near airport in an allowedD1E1Requestarea.2Flight RequestFIMSFIMS sends message to operator that flight requestD1E3Receivedwas received.3Flight RequestFIMSFIMS sends message to operator that flight requestD1E4Acceptedwas accepted.4No-Fly ZoneFIMSFIMS announces that the airspace configuration isD1E14Notificationchanging with a no-fly zone affecting operation.5Operator RequestsOperator Operator requests new plan to vacate the new no-flyD1E1Deviationzone.6Deviation RequestFIMSFIMS accepts the requested deviation.D1E4Accepted
Table B -27: LandingLizards D1S3T1 "LandingLizards": FIMS issues an 'all land' directive, operator indicates when the operation has landed.BStep ActionActorRemarksDataExchange1Operator FlightOperator Operator requests a BVLOS operation.D1E1Request2Flight RequestFIMSFIMS sends message to operator that flight requestD1E3Receivedwas received.3Flight RequestFIMSFIMS sends message to operator that flight requestD1E4Acceptedwas accepted.4Flight RequestFIMSFIMS sends message to operator that all operationsD1E8Terminatedmust land.5OperatorOperator Operator sends message indicating that operation isD1E10Acknowledgmentterminated and no longer flying.
Table B -28: LandingLoons D1S3T2 "LandingLoons": FIMS issues an 'all land' directive, operator requests a new plan to land, FIMS accepts.BStep ActionActorRemarksDataExchange1Operator FlightOperator Operator requests a BVLOS operation.D1E1Request2Flight RequestFIMSFIMS sends message to operator that flight requestD1E3Receivedwas received.3Flight RequestFIMSFIMS sends message to operator that flight requestD1E4Acceptedwas accepted.4Flight RequestFIMSFIMS sends message to operator that allD1E8Terminatedoperations must land.5Operator RequestsOperator Operator requests plan that complies with land nowD1E1Deviationdirective.6Flight RequestFIMSFIMS sends message to operator that flight requestD1E3Receivedwas received.7Flight RequestFIMSFIMS sends message to operator that flight requestD1E4Acceptedwas accepted.8OperatorOperator Operator sends message indicating that operationD1E10Acknowledgmentis terminated and no longer flying.
Table B -29: ExperimentsBExperimentTitleDescriptionIDD1X1Nominal 1Run through six non-fly-away tests.D1X2Nominal 2Show nominal operations unaffected by a fly-away operation.D1X3Fly-Away ExerciseShow operations affected by a fly-away operation.
Table B -30: "Nominal 1" ConfigurationsBConfiguratioD1S0T1D1S0T2D1S0T3D1S0T9D1S0T5 D1S0T6nNominalNoodlCancelledCarrDenialDonPaisleyPositionEarlyEwoCompletedCucumbeotutskerAAIRMTRTXSIMUNASAANRAAMZNBAMZNAIRMTRTXSIMUNASAANRACANRAAMZNAIRMTRTXSIMUNASADNASAANRAAMZNAIRMTRTXSIMUESIMUNASAANRAAMZNAIRMTRTXFTRTXSIMUNASAANRAAMZNAIRM12.9.1.2 Sequence
Table B -31: "Nominal 1" SequenceBStep TimeActionNotes(min:sec)1T=0:00Command Center calls 'mark.'Potential countdown prior to 'mark.'20:00 to 0:30Operators submit plans.Start time between T+30seconds andT+1min.Duration at least 2 minutes.30:30 to 1:00Operators commence simulatedoperations.41:00 to 1:30FIMS makes position report request perD1S0T9.51:30 to 2:00FIMS cancels request per D1S0T9.62:00Tests completes.7*Experiment completes.
Table B -32: "Nominal 2" ConfigurationsBConfiguratioD1S0T7D1S0T1D1S0T10 D1S0T6D1S0T8D1S0T4nFlyAwayFigNominalNoodlWhereOnCompletedCucumbNegatoryNotiTerminatedTomaseeerfytoAAIRMTRTXSIMUNASAANRAAMZNBAMZNAIRMTRTXSIMUNASAANRACANRAAMZNAIRMTRTXSIMUNASADNASAANRAAMZNAIRMTRTXSIMUESIMUNASAANRAAMZNAIRMTRTXFTRTXSIMUNASAANRAAMZNAIRM
Table B -33: "Nominal 2" SequenceBStep TimeActionNotes(min:sec)1T=0:00Command Center calls 'mark.'Potential countdown prior to 'mark.'
Table B -34: D1X3 ConfigurationsBConfiguration D1S0T7D1S2T1D1S2T1D1S2T1D1S0T1D1S0T1TrajectoryVolume 1Volume 2Unaffected 1Unaffected 2FlyAwayFigs NoFlyGuy NoFlyGuy NoFlyGuy NominalNoodle NominalNoodleAAIRMTRTXSIMUNASAANRAAMZNBAMZNAIRMTRTXSIMUNASAANRACANRAAMZNAIRMTRTXSIMUNASADNASAANRAAMZNAIRMTRTXSIMUESIMUNASAANRAAMZNAIRMTRTXFTRTXSIMUNASAANRAAMZNAIRMDetails for each of the plans are provided athttps://gist.github.com/alotau/2409eda1f1c6d80d5da313a0c511c4f5.
Table B -35: D1X3 Sequence Step Time (min:sec)BActionNotes1T=0:00Command Center calls 'mark.'Potential countdown prior to 'mark.'20:00 toOperators submit plans.Start time between T+30seconds and T+1min.0:30Duration at least 10 minutes.
Table B -37: D1X4 SequenceBStep TimeActionNotes(min:sec)1T=0:00Command Center calls 'mark.'Potential countdown prior to 'mark.'20:00 to 0:30 Operators submit plans.Start time between T+30seconds andT+1min.Duration at least 10 minutes.30:30 to 1:00 Operators commence simulated operations.41:00 to 1:30 FIMS issues "all land" directive.Is there a maximum time associatedwith the need to land?5> 1:30LandingLoons (D1S3T2) group issues newplan to execute landing.LandingLizards (D1S3T1) land safely withinoperational plan.6*Experiment completes.
Table B -38: D1X5 ConfigurationsBConfigurationD1S2T1D1S2T1D1S2T2D1S2T2D1S2T3D1S2T3NoFlyGuy NoFlyGuy FlippingFruit FlippingFruit GreatGoose GreatGooseAAIRMTRTXSIMUNASAANRAAMZNBANRAAMZNAIRMTRTXSIMUNASACSIMUNASAANRAAMZNAIRMTRTX
Table B -39: D1X5 SequenceBStep TimeActionNotes(min:sec)20:00 to 0:30 Operators submit plans.Start time betweenT+30seconds and T+1min.Duration at least 10 minutes.30:30 to 1:00 Operators commence simulated operations.41:00 to 1:30 FIMS issues constraint change.Is there a maximum timeassociated with the need toland?5> 1:00FlippingFruit (D1S2T2) and GreatGoose (D1S2T3)groups request new plans and receive appropriateresponses from FIMS.All participants complete their plans.6*Experiment completes.Step TimeActionNotes(min:sec)1T=0:00Command Center calls 'mark.'Potential countdown prior to'mark.'
Table B -40: D1X6 ConfigurationsBConfiguratioMuirMuirMuirTaftTaftTaftnD1S1T1D1S1T2D1S1T3D1S1T5D1S1TD1S1T76DeviatingDougRequestingRhubarReplanRadisNoHarmNoFoFixyFixNoSoupForYohbhulyuAAIRMTRTXSIMUNASAANRA AMZNBAMZNAIRMTRTXSIMUNASA ANRACANRAAMZNAIRMTRTXSIMU NASA
Table B -41: D1X6 SequenceBStep TimeActionNotes(min:sec)D1S1T2 & D1S1T6: Start timebetween T+3min and T+4min.D1S1T3 & D1S1T7: Start timebetween T+6min and T+7min.All durations between 2 and 4minutes.All departures and initial plans verynear the respective national parkboundary.30:30 to 1:00 D1S1T1 & D1S1T5: Operations commence.41:30 to 1:50 Step 4 (Operator Notifies of Deviation) of test isexecuted.FIMS sends cancel/termination message toD1S1T1.Per D1S1T5, operator sends messageindicating flight correction.FIMS requests positions from operator perD1S1T1 & D1S1T5 (continuous and single,respectively).Per D1S1T1, operator acknowledges receipt ofthe the termination request.52:30D1S1T1 & D1S1T5: Operations complete.63:00 to 4:00 D1S1T2 & D1S1T6: Operations commence.75:00D1S1T2 & D1S1T6: Operations make theirrespective requests to FIMS.FIMS sends appropriate responses.85:30D1S1T2 & D1S1T6: Operations complete.96:00 to 7:00 D1S1T3 & D1S1T7: Operations commence.10 7:00 to 9:00 D1S1T3 & D1S1T7: Complete test steps.Need to complete with more detail forthese last two operations.11 *Experiment completes.Step TimeActionNotes(min:sec)1T=0:00Command Center calls 'mark.'Potential countdown prior to 'mark.'20:00 to 0:30 Operators submit plans.D1S1T1 & D1S1T5: Start timebetween T+30seconds and T+1min.
Table B -42: Data Exchange Test CoverageBDataTestsExperimentsNotesExchangeD1E1ALLALL
Table C -C1 below describes the endpoints used with Demonstration 1:Action 13.1Actor DetailIDend pointCommentsModeldefinitionSyncOperatoIntent to Close D1E10/messagesD1E10 when operatorRequestr,initiates INTENT to close(HTTPD1E11D1E11 when operatorPOST)initiates INTENT to closebecause FIMSTable C-1: Demonstration 1 Endpoints terminated the planAction Response FIMS Actor Detail Received HTTP 200 Sync Operato Alert -Synchronou s (HTTP POST) Operato r Submit ops Request r FlyAways, Incursion plan with Response FIMS Received volume HTTP 200 Request Synchronou s Response FIMS Received HTTP 200ID D1E3 D1E15 /messages end point D1E1 /operation D1E16 D1E3Comments Please detail the HTTP response. HTTP 200? How are the ACKs for Anomalies different from regular ACKs (D1E3) Please detail the HTTP I don't know that they are response. ? different. I think they areModel definitio nSynchronouOperatoSubmit ops/operationHow far is too far? the same. HTTP 200's.s (HTTP POST) Sync Request Request Synchronou s Response Response FIMS r Operato r FIMS ASYNC FIMS Synchronou s (HTTP Operato r (STOMP Queue) POST) Requestplan too far in Alert -Back to advance conformance Bad Request Received HTTP 200 Received Notification HTTP 400 Submit ops INFORM LOS planD1E15 /messages D1E16 D1E2 /operation D1E4, /user/{operator}/decisi D1E5, on /operation D1E7, D1E8Please detail the HTTP response. HTTP 200? Accepted/Denied/Terminat ed Does Terminated mean Land Now? Does Operator then perform D1E9?SynchronouFIMSReceivedD1E6 /operationflight request was not When a deviation iss ResponseHTTP 200required denied, then includeSynchronouOperatoGet/operationoriginal plans (HTTP ASYNCr FIMSoperational NotificationD1E14 /topic/constraintChangNotify AIRSPACEGET) (STOMPvols ALERTeconstraint changeSynchronou Topic)OperatoPlanD1E1 /operations (HTTP ASYNCr FIMSmodification NotificationD1E12 /topic/emergencyNotify other operations ofPUT) (STOMPALERTUNPLANNED DeviationResponse FIMS Topic)RequestD1E3Please detail the HTTPASYNCFIMSreceived Position?/topic/positionsresponse. HTTP 200? An echo of the position(STOMPHTTP 200 subscriptionreports received by FIMSSync Topic)OperatoIntent toD1E9 /messagesRequest ASYNCr FIMSCancel OperationALL/topic/operationsNotify all subscribers of(HTTP (STOMPannouncemenapproved/acceptedPOST) Topic)tsoperationsResponse FIMSReceivedD1E3Please detail the HTTPHTTP 200response. HTTP 200?
Private endpoint to trigger async events from FIMS (for managerial use only)
Table C -C2 lists additional private endpoints:
Table C -2: Private EndpointsCSubmit an operation to the FIMS operation endpoint /operations and receive the asynchronous acceptance message from FIMS at /user/{operator}/decision. Send and record an ALERT message with FLY_AWAY alert text to FIMS at /messages.Receive and record synchronous message from FIMS reporting notification of anomaly received.Receive asynchronous ALERT message reporting no fly zone from FIMS at /topic/constraintChange. Receive and record asynchronous ALERT message reporting the UNPLANNED_DEVIATION from FIMS at /topic/emergency.Receive and record asynchronous ALERT message requesting continuous positions from FIMS at /user/{operator}/decision. Submit and record position to FIMS at /positions.Send INTENT CLOSE message to FIMS at /messages.Receive and record asynchronous ALERT message indicating removal of no-fly zone from FIMS at /topic/constraintChange.3. FIMS-IntegrationTest-{yourOrganizationName}-NomOpASyncAcceptance-14.3.7.2 Test Procedure{dateOfTest}-v{versionNumber}.json -https parameters: # summary: Return an operation from FIMS $ref: "#/definitions/Operation" # description: Get positions in: bodytags: # Have to add 'A' 'B' etc since ordering isn't respected in SwaggerUI. -in: body # description: Get a specific operation from FIMS by gufi responses: # operationId: getPositions description: Message object being sent14.3.2.4 Test Verification -name: A. FIMS Endpoints name: operation # operationId: getOperationByGufi 200: # produces: required: trueAction description: The primary RESTful endpoints for operators accessing FIMS Actor Detail ID end point Comments description: Operational plan to add # produces: description: "Operation updated." # -application/json schema: FIMS representative will inspect artifacts for correctness of json content. externalDocs: required: true # -application/json schema: # responses: $ref: "#/definitions/Message" Model 14.3.3 Test 2: Simple Cancel (D1S0T2) url: "https://tmiserver.arc.nasa.gov/fims/api/" schema: # parameters: $ref: "#/definitions/FIMSApiResponse" # 200: # get: definition description: NASA FIMS server generated from this API specification. $ref: "#/definitions/Operation" # -in: path 400: # description: "Positions retrieved successfully." # tags:Synchronous (HTTP POST) -name: B. Subscription Points Manager Acts as a trigger for async D1E5, D1E7, D1E8 responses: # name: gufi description: "Bad request. Typically validation error. Fix your request /asyncTriggerForUser FIMS will notify user1 asynchronously Will include # schema: # -FIMS Endpoints 14.3.3.1 Test Purpose the username and event ID description: Non-REST endpoints for asynchronous communications with FIMS 201: # description: "GUFI of the operation" and retry." # type: array # summary: Return message(s) from FIMS To test that a cancel intent message can be submitted to FIMS. -name: C. Data Types description: Operation Plan request received. # required: true schema: # items: # description: Get all the messagesmessaging from FIMS Manager Acts as a trigger for async description: Psuedo endpoints used for the documentation of the data schema to be sent Synchronous (HTTP POST) D1E12, D1E14 /asyncTriggerForBroadcast FIMS will broadcast an event (to a The event ID to be broadcasted schema: # type: string $ref: "#/definitions/FIMSApiResponse" # $ref: "#/definitions/Position" # operationId: getMessages 14.3.3.2 Test Procedure -name: D. Version $ref: "#/definitions/FIMSApiResponse" # format: uuid 403: # 403: # produces: Submit an operation to the FIMS operation endpoint /operations and receive the asynchronous acceptance message from FIMS at /user/{operator}/decision. Submit and record an INTENT CANCEL message to the FIMS message endpoint at /messages. description: Get version 400: # responses: description: "Unauthorized user." # description: "Unauthorized user." # -application/json Data Exchanges: D1E1, D1E3, D1E4, D1E15, D1E16, D1E14, D1E12, D1E19, D1E17, D1E10, responses: description: "Bad request. Typically validation error. Fix your request # 200: schema: # schema: # responses: D1E14 WRONG_PROTOCOL: and retry." # description: "Operation retrieved." $ref: "#/definitions/FIMSApiResponse" # $ref: "#/definitions/FIMSApiResponse" # 200:messaging Data Exchanges: D1E1, D1E3, D1E4, D1E9 description: A RESTful call was made to this endpoint but this is not a REST topic) schema: # schema: 404: # 404: # description: "Messages retrieved successfully." 14.3.7.3 Test Artifacts endpoint. Do not use this endpoint for REST calls. $ref: "#/definitions/FIMSApiResponse" # $ref: "#/definitions/Operation" description: "Operations not found." # description: "Requested positions not found." # schema: from FIMS 1. FIMS-IntegrationTest-{yourOrganizationName}-FlyAwayAlertFlyAway-# BadRequest: 403: # 403: schema: # schema: # type: array 14.3.3.3 Test Artifacts {dateOfTest}-v{versionNumber}.json # description: "Bad request. Typically validation error. Fix your request and description: "Invalid ID supplied. Fix authorization and retry." # description: "Unauthorized user." $ref: "#/definitions/FIMSApiResponse" # $ref: "#/definitions/FIMSApiResponse" # items:1. FIMS-IntegrationTest-{yourOrganizationName}-SimpleCancelIntentCancel-2. FIMS-IntegrationTest-{yourOrganizationName}-FlyAwaySyncAnomalyReceived-retry." schema: # schema: /positions: # $ref: "#/definitions/Message"{dateOfTest}-v{versionNumber}.json {dateOfTest}-v{versionNumber}.json # schema: $ref: "#/definitions/FIMSApiResponse" # $ref: "#/definitions/FIMSApiResponse" post: /messages: # 403:3. FIMS-IntegrationTest-{yourOrganizationName}-FlyAwayAsyncAlertNoFly-# $ref: "#/definitions/FIMSApiResponse" # get: # 404: tags: post: # description: "Unauthorized user."14.3.3.4 Test Verification {dateOfTest}-v{versionNumber}.json # AuthenticationError: # tags: # description: "Operations not found." -A. FIMS Endpoints tags: # schema:FIMS representative will inspect artifacts for correctness of json content. 4. FIMS-IntegrationTest-{yourOrganizationName}-FlyAwayAsyncAlertUnplanDev-# description: "Authentication Error" # -FIMS Endpoints # schema: summary: Submit position report -A. FIMS Endpoints # $ref: "#/definitions/FIMSApiResponse"{dateOfTest}-v{versionNumber}.json # schema: # summary: Return operation(s) from FIMS # $ref: "#/definitions/FIMSApiResponse" security: summary: Submit a message to FIMS # 404:14.3.4 Test 3: Denial Received and Acknowledged (D1S0T3) 5. FIMS-IntegrationTest-{yourOrganizationName}-FlyAwayAsyncAlertContPos-# $ref: "#/definitions/FIMSApiResponse" # description: Gets the operations from FIMS. put: -userBasic: [ ] security: # description: "Messages not found."{dateOfTest}-v{versionNumber}.json # AuthorizationError: # operationId: getOperations tags: description: Allows for submission of position data related to a particular -userBasic: [ ] # schema:14.3.4.1 Test Purpose 6. FIMS-IntegrationTest-{yourOrganizationName}-FlyAwayOpPosition-# description: "Authorization Error" # produces: -A. FIMS Endpoints operation. description: Allows posting of a message to FIMS. Typically an intent # $ref: "#/definitions/FIMSApiResponse"{dateOfTest}-v{versionNumber}.json # schema: # -application/json summary: Modify an operation operationId: postPosition message related to a particular operation. To test that a denial can be received from FIMS and acknowledged. 7. FIMS-IntegrationTest-{yourOrganizationName}-FlyAwayAsyncAlertNoFlyCleared-# $ref: "#/definitions/FIMSApiResponse" # responses: security: responses: operationId: postMessage /user/{operator}/decision:14.3.4.2 Test Procedure {dateOfTest}-v{versionNumber}.json # ResourceNotFound: # 200: -userBasic: [ ] 201: consumes: get:Submit an operation to the FIMS operation endpoint /operations and receive the asynchronous # description: "Resource not found" # description: "Operations retrieved successfully." description: Allows for modifying of an operation plan in FIMS. description: "Position posted successfully." -application/json tags: 14.3.7.4 Test Verification # schema: # schema: operationId: updateOperation schema: produces: -B. Subscription Points acceptance message from FIMS at /user/{operator}/decision. Receive and record the asynchronous DENIED message from FIMS at /user/{operation}/decision. Submit and record an FIMS representative will inspect artifacts for correctness of json content. # $ref: "#/definitions/FIMSApiResponse" # type: array consumes: $ref: "#/definitions/FIMSApiResponse" -application/json summary: Subscription point for receiving decisions from FIMSacknowledging that no flight operation will be conducted. paths: # $ref: "#/definitions/Operation" produces: description: "Invalid message. Please fix and retry." 201: 14.3.8 Test 7: Authorization Not Required (D1S0T8) INTENT ACK_NO_OPERATION message to the FIMS message endpoint at /messages # items: -application/json 400: responses: description: |/operations: 403: -application/json schema: description: "Message received successfully." 14.3.8.1 Test Purpose # post: # description: "Unauthorized user." parameters: $ref: "#/definitions/FIMSApiResponse" schema: Data Exchanges: D1E1, D1E3, D1E4, D1E7, D1E11 To test that a message can be received that Authorization is not required tags: # schema: -in: path parameters: $ref: "#/definitions/FIMSApiResponse"-A. FIMS Endpoints $ref: "#/definitions/FIMSApiResponse" name: gufi -in: body 400: 14.3.4.3 Test Artifacts # 14.3.8.2 Test Procedure summary: Submit an operation to FIMS # 404: description: "GUFI of the operation to update" name: position description: "Invalid message. Please fix and retry." 1. FIMS-IntegrationTest-{yourOrganizationName}-DenialInformDenied-Create an operation where all operation volumes contain beyond_visual_line_of_sight=false. security: # description: "Operations not found." required: true description: Position to submit schema: {dateOfTest}-v{versionNumber}.json Submit the operation to the FIMS operation endpoint /operations. Record and receive the -userBasic: [ ] # schema: type: string required: true $ref: "#/definitions/FIMSApiResponse" 2. FIMS-IntegrationTest-{yourOrganizationName}-DenialIntentAckNoOp-asynchronous Authorization Not Required from FIMS at /user/{operator}/decision. operationId: postOperation # $ref: "#/definitions/FIMSApiResponse" format: uuid schema: 403: {dateOfTest}-v{versionNumber}.json Data Exchanges: D1E1, D1E3, D1E6 description: Allows for submission of an operation plan to FIMS. -in: body $ref: "#/definitions/Position" description: "Unauthorized user."14.3.4.4 Test Verification consumes: /operations/{gufi}: name: operation # get: schema:-application/json get: description: Operation updates tags: $ref: "#/definitions/FIMSApiResponse" FIMS representative will inspect artifacts for correctness of json content. # # produces: # tags: required: true # -FIMS Endpoints parameters:# #-application/json -FIMS Endpoints schema: summary: Return position(s) from FIMS -name: message
Illustrates the FIMS Alert Message.FIMS may send out Alert Messages from time to time.This endpoint is not intended for use.Note that if you are viewing this in a SwaggerUI, the "try it out" feature will not work since this is not a RESTful endpoint-C. Data Types $ref: "#/definitions/Polygon" type: apiKey type: stringsummary: Point schema 410: in: header format: date-timedescription: | $ref: "#/responses/WRONG_PROTOCOL" name: mgrApiKey aircraft_comments:Illustrates an Point in JSON. This endpoint is not intended for use. /schema/InformMessage: userBasic: description: "Informative text about the aircraft. Not used by the UTMNote that if you are viewing this in a SwaggerUI, the "try it out" get: operationId: alertMsgUsingGET type: basic System. Only for human stakeholders."feature will not work since this is not a RESTful endpoint. tags: produces: mgrBasic: type: stringproduces: -C. Data Types -application/json type: basic flight_comments:-application/json summary: Inform Message schema responses: definitions: description: "Informative text about the operation. Not used by the UTMresponses: description: | 200: FIMSApiResponse: System. Only for human stakeholders."200: Illustrates the FIMS Inform Message. This is FIMS' reply to an Intent. description: OK type: "object" type: stringdescription: OK This endpoint is not intended for use. schema: properties: flight_geography_description:schema: Note that if you are viewing this in a SwaggerUI, the "try it out" $ref: "#/definitions/AlertMessage" code: description: "Informative text about the operational geography. Not used$ref: "#/definitions/Point" feature will not work since this is not a RESTful endpoint. 410: type: "integer" by the UTM System. Only for human stakeholders."410: operationId: informMsgUsingGET $ref: "#/responses/WRONG_PROTOCOL" format: "int32" type: string$ref: "#/responses/WRONG_PROTOCOL" produces: /schema/ConstraintMessage: type: registration:-application/json get: type: "string" description: "The registration ID of the vehicle flying this operation./schema/LineString: responses: tags: message: Note the UTM System assumes a single vehicle per operation currently. Thisget: 200: -C. Data Types type: "string" registration value is provided to operators upon manual registration of theirtags: description: OK summary: Constraint Message schema example: vehicle with NASA."-C. Data Types schema: description: | code: 201 type: stringsummary: LineString schema $ref: "#/definitions/InformMessage" Illustrates the FIMS Constraint Message. FIMS will send out a Constraint type: CREATED format: uuiddescription: | 410: Message when a new constraint is put in place. This endpoint is not intended for message: Operation Plan request received. flight_number:Illustrates an LineString in JSON. This endpoint is not intended for use. $ref: "#/responses/WRONG_PROTOCOL" Operation: use. description: "Optional. Currently unused by the UTM System, may beNote that if you are viewing this in a SwaggerUI, the "try it out" /schema/IntentMessage: Note that if you are viewing this in a SwaggerUI, the "try it out" type: object useful to the operator for identification purposes."feature will not work since this is not a RESTful endpoint. get: feature will not work since this is not a RESTful endpoint required: type: stringproduces: tags: operationId: constraintMsgUsingGET -registration user_id:-application/json -C. Data Types produces: -primary_contact_name description: "This field is populated based on the provided credentialsresponses: summary: Intent Message schema -application/json -primary_contact_phone in the HTTPS header."200: description: | responses: -controller_location type: stringdescription: OK Illustrates the FIMS Intent Message. Your Intent generates a FIMS Inform. 200: -operation_volumes created_by:schema: This endpoint is not intended for use. description: OK properties:$ref: "#/definitions/LineString" Note that if you are viewing this in a SwaggerUI, the "try it out" schema: gufi:410: feature will not work since this is not a RESTful endpoint. $ref: "#/definitions/ConstraintMessage" description: >$ref: "#/responses/WRONG_PROTOCOL" operationId: intentMsgUsingGET 410:/schema/Polygon: produces: $ref: "#/responses/WRONG_PROTOCOL" * *Ignored on initial submission, assigned by server*get: -application/json # /version: * *Always returned from server*#tags: responses: get: Each operation has a GUFI assigned upon submission. It is a JSON-C. Data Types 200: tags: string that conforms to the UUID version 4 specification. Should not be submitted #summary: Polygon schema description: OK -D. Version with a new plan, but is required for modification (PUT). ##description: | schema: summary: Get version type: string#Illustrates an Polygon in JSON. This endpoint is not intended for use. $ref: "#/definitions/IntentMessage" produces: format: uuid#Note that if you are viewing this in a SwaggerUI, the "try it out" 410: -text/plain submit_time:feature will not work since this is not a RESTful endpoint. $ref: "#/responses/WRONG_PROTOCOL" description: "Time the operation submission was received by UTM System."produces: /schema/AlertMessage: securityDefinitions: type: string: -application/json get: userApiKey: format: date-time410: responses: tags: type: apiKey decision_time:$ref: "#/responses/WRONG_PROTOCOL" 200: -C. Data Types in: header description: "A timestamp set by the UTM System any time the state of theproduces: description: OK summary: Alert Message schema name: userApiKey operation is updated, for example when the flight goes from PROPOSING to ACCEPTED-application/json schema: description: | mgrApiKey: (see Section 4.1)"
The current state of the operation.Not required for submission, will be assigned by the UTM System."type:stringcontroller_location:#description:"Theplanned position of the UAS Controller during the operation.Assumed to be a static location."$ref:"#/definitions/Point"gcs_location:#description:"If not submitted, the UTM System will assume the GCS is co-located with the UAS Controller.Assumed to be a static location."$ref:"#/definitions/Point"faa_rule:description: "Indication whether this operation is under Part 101-E, Part 107, Part 107 waiver, or a Part TBD.Part TBD is a potential future rule that may cover operations such as those under test by UTM."If a waiver has been obtained for the Part 107 rules, then the operator would have a waiver certificate number.For any operation submissions with faa_rule=PART_107W, this field is required."state:description: "type: stringenum:-PART_107-PART_107W-PART_101E-PART_TBDwaiver_certificate_number:description: "type: stringoperation_volumes:description: "Editable. The actual geographical information for theoperation."type: arrayitems:$ref: "#/definitions/OperationVolume"example:)."type: string
This integer represents the ordering of the operation volume within the set of operation volumes.Need not be consecutive integers."Theminimumaltitudeassignedandused by the UTM System to check vertical conformance of an operation.Based on UTM Client-provided min The maximum altitude assigned and used by the UTM System to check vertical conformance of an operation.Based on UTM Client-provided max altitude."type:numberformat:doubleflight_geography:#description: "A description of the operational area.This should be the area within which the operation will remain."$ref:"#/definitions/Geometry"conformance_geography:#description:"A UTM-generated geography based on the flight geography.See Section 4.4.2 for discussion."$ref:"#/definitions/Geometry"beyond_visual_line_of_sight:description: "Describes whether the operation volume is beyond the visual line of sight of the operator."Either the time the message was sent by the UTM System or the time it was received by the UTM System."-beyond_visual_line_of_sight format: double altitude_num_gps_satellites: -$ref: "#/definitions/Geometry" format: uuid allOf: reason=RogueNearby, type: array [-122.05187056889,37.41786527236],properties: conform_max_altitude_wgs84_ft: type: integer -type: object origin: -$ref: "#/definitions/Message" reasonDetail=nearby operation 86250f05-d89c-40cf-b932-aa8d10a426a2 in items: [-122.03732647634,37.41786440108],ordinal: description: "type: integer near_structure: description: "Is this operation volume within 400' of a structure?" type: boolean default: false effective_time_begin: description: "Earliest time the operation will use the operation volume." type: string format: date-time effective_time_end: description: "Latest time the operation will done with the operation volume." type: string format: date-time format: int32 description: Number of satellites used in calculating the altitude_gps_wgs84_ft. enroute_positions_id: type: string format: uuid description: Each position will be assigned a UUIDv4 by the FIMS gufi: type: string format: uuid description: Each operation has an GUFI assigned upon submission. Required upon POSTing a new position. It is a JSON string, but conforms to the UUID version 4 specification hdop_gps: properties: coordinates: type: array items: type: array items: type: array items: type: number format: double example: type: Polygon coordinates: [ # http://bl.ocks.org/d/7e0bffe48ff38444b29bbb2e7ec10032 # outer ring # this is a triangle starting at NASA Ames Research Center type: string enum: -FIMS -CLIENT -MANAGER description: The user or process that generated this message user: description: "Populated by the UTM System. The target user for a message from the UTM System." type: string gufi: description: "The assigned GUFI for the operation referenced by the message." type: string format: uuid category: -type: object properties: alert_message: type: string enum: -WEATHER -SECURITY -OPERATIONS -SYSTEM -GENERAL alert_severity: type: string enum: -INFORMATIONAL -NOTICE -WARNING state U is lateral distance 711.45 feet and vertical danger zone envelope 600 feet; This alert message valid for the next 30 seconds (far lateral/far altitude), vehicleType=FixedWing vehicleModelName=Silent Falcon, longLat=-119.87933795058 39.69702548394, alt_gps_wgs84_ft=5187.3645438621, track_ground_speed_kn=0.77703200548507, track_magnetic_north_deg=null" IntentMessage: required: -intent_message allOf: -$ref: "#/definitions/Message" -type: object $ref: "#/definitions/Violation" warnings: type: array items: $ref: "#/definitions/Warning" example: gufi: "00000000-0000-4444-8888-000000000000" category: "InformMessage" origin: "FIMS" free_text: "Plan DENIED. See violations field of this message for constraining violation(s) and the violating volume(s)." sent_time: "2016-10-04T09:15:42.727Z" inform_message: "DENIED" violations: '[ {"type":"Operations","violating_volume":1,"constraining_volume":1,"constraining_i [-122.062176579,37.40968041145], ] ] begin_time: "2016-11-29T01:16:41.727Z" end_time: "2016-11-30T01:16:41.727Z" Violation: type: object properties: type: type: string constraining_id: type: string format: uuid constraining_volume: type: integer violating_volume: description: "type: boolean type: number # 2nd point 1mi bearing 45˚ type: string -CRITICAL properties: d":"90710543-6b18-44c9-a1a6-a3ecd60d14"} type: integeractual_time_end: Position: format: double # 3rd point 1mi bearing 90˚ enum: -EMERGENCY intent_message: ]' Warning:description: "Time that the operational volume was freed for use by other type: object description: The horizontal dilution of precision as provided by the # 4th point is same as 1st to close the polygon -AlertMessage alert_text: type: string ConstraintMessage: type: objectoperations." required: onboard [ -IntentMessage type: string enum: allOf: properties:type: string -altitude_gps_wgs84_ft GPS. [-122.06382530000002,37.40906970000], -InformMessage enum: -ACK_NO_OPERATION -$ref: "#/definitions/Message" warning_id:format: date-time -altitude_num_gps_satellites location: [-122.05094253233000,37.41930062770], -ConstraintMessage -UNPLANNED_LANDING -CANCEL -type: object type: stringconformance_time_begin: -gufi # description: "A description of the 2D location. A Point geojson [-122.03276206976000,37.41929920176], free_text: -UNCONTROLLED_LANDING -CLOSE properties: #externalDocs:description: "Assigned by UTM System. Time buffer before the submitted -hdop_gps fragment." [-122.06382530000002,37.40906970000] description: Any remarks or messaging that does not fit any other fields -FLY_AWAY example: constraint_geography: # description: >begin time." -location "$ref": "#/definitions/Point" ], type: string -HIJACK gufi: "00000000-0000-4444-8888-000000000000" # description: "A description of the geography of the constraint." # ### _Find out more about Swagger_type: string -time_measured time_measured: # inner ring sent_time: -CONSTRAINT_CHANGE category: "IntentMessage" $ref: "#/definitions/Geometry" # url: "http://swagger.io"format: date-time conformance_time_end: description: "Assigned by UTM System. Time buffer after the submitted -time_sent -track_ground_speed_kn -track_true_north_deg type: string format: date-time description: The time the position was measured. Likely the time provided # 1st point is .1mi bearing 65˚ from 1st of outer ring # 2nd point .8mi bearing 45˚ # 3rd point .8mi bearing 90˚ -ROGUE -OTHER_SEE_FREE_TEXT sent_time: "2016-10-04T09:15:42.727Z" intent_message: "CANCEL" description: "The time that the constraint begins. Null or no value implies infinity begin time." description: "type: string -UNPLANNED_DEVIATION origin: "CLIENT" begin_time: x-azure-api-id: "sh-1469571953760"end time." -vdop_gps with # 4th point is same as 1st to close the polygon format: date-time -POSITION_REPORT_REQUEST_SINGLE InformMessage: type: stringtype: string properties: the GPS position reading. [ ack_time: -POSITION_REPORT_REQUEST_CONTINUOUS allOf: format: date-timeformat: date-time air_speed_source: time_received: [-122.062176579,37.40968041145], description: A timestamp stored in the DB upon acknowledgment from the -POSITION_REPORT_REQUEST_CANCEL -$ref: "#/definitions/Message" end_time:min_altitude_wgs84_ft: type: string type: string [-122.05187056889,37.41786527236], message receiver -OFF_COURSE -type: object description: "The time that the constraint ends. Null or no valuedescription: "The minimum altitude for this operation in this operation description: Required if air_speed_track_kn is submitted. No requirements format: date-time [-122.03732647634,37.41786440108], type: string -BACK_TO_CONFORMANCE properties: implies infinity end time."volume. In WGS84 reference system using feet as units." yet on the values here, but suggestions include ESTIMATED or MEASURED. description: Not required for submission, assigned by the UTM System. The [-122.062176579,37.40968041145], format: date-time warnings: inform_message: type: stringtimetype: number air_speed_track_kn: ] example: type: array type: string format: date-timeformat: double type: number the position was received by the UTM System. gufi: "00000000-0000-4444-8888-000000000000" ] items: enum: example:max_altitude_wgs84_ft: format: double time_sent: Message: category: "IntentMessage" $ref: "#/definitions/Warning" -PLAN_SUBMITTED_TOO_EARLY gufi: "*"description: "The maximum altitude for this operation in this operation description: Air speed in relation to the direction of travel of the type: string type: object origin: "CLIENT" example: -ACCEPTED category: "ConstraintMessage"volume. In WGS84 reference system using feet as units." aircraft. format: date-time discriminator: category free_text: "An intent message from a client (for example)" gufi: "00000000-0000-4444-8888-000000000000" -AUTHORIZED origin: "FIMS"type: number Value may be negative. description: The time the position was sent. required: sent_time: "2016-10-04T09:15:42.727Z" category: "AlertMessage" -DENIED free_text: "Constraint added."format: double altitude_gps_wgs84_ft: track_ground_speed_kn: -gufi intent_message: "CLOSE" origin: "FIMS" -NOTIFICATION_NOT_REQUIRED sent_time: "2016-11-29T01:16:41.727Z"conform_min_altitude_wgs84_ft: type: number type: number -category AlertMessage: sent_time: "2016-10-04T09:15:42.727Z" -AUTHORIZATION_NOT_REQUIRED constraint_geography:format: double description: The altitude as measured via a GPS device on the aircraft. format: double description: Ground speed int the direction of travel. Value must be >= properties: message_id: required: -alert_message alert_message: "OPERATIONS" alert_severity: "WARNING" -TERMINATED violations: type: Polygon coordinates: [ description: "altitude." Units 0.0. description: A UUID assigned to this message by the FIMS -alert_severity alert_text: "ROGUE" description: "Included with messages from the INFORM category with [XXX-XXX-XXXX" in feet using the WGS84 reference system. type: number In knots. type: string -alert_text free_text: " inform_message = DENIED." [-122.062176579,37.40968041145],
			Scientific and technical findings that are preliminary or of specialized interest, e.g., quick release reports, working
			FIMS-IntegrationTest-{yourOrganizationName}-AuthNotRequiredAsync-{dateOfTest}-v{versionNumber}.json 14.3.8.3 Test Verification FIMS representative will inspect artifacts for correctness of json content.
		
		
			
Appendix D -DWG Demonstration 1 FIMS-USS Client CheckoutThe content of this appendix was originally a stand-alone document.The information contained herein was the basis for checking the functionality of the various USS systems that were developed by the various participants.As the test was dynamic in planning, as was this checkout document.This represents the final state of the checkout procedures and is provided for completeness and future reference.
IntroductionThis document summarizes the steps and requirements for the checkout of a FIMS Client for the November Demonstration.They may be used with any client.
ScopeThese tests are software focused.The idea is to make sure the Client Software has correctly implemented all of the features that meet the requirements of the demonstration.The tests will make sure the Client is successfully able to do the following:1.Post to all the endpoints (/operations, /messages, /positions) 2.Post each of the intent message types required by the DWG Demonstration 1 3.Receive all of the synchronous message types 4.Receive at least one asynchronous message from each of the stomp queues (/user/{operator}/decision, /topic/constraintChange, /topic/emergency)
Testing ArtifactsFor each test, there will be one or more Test Artifacts that will be generated.Instructions regarding submission of the artifacts are provided in the subsections below.
Integration TestingThe operator must complete these tests all in one sitting.They must be done along with a FIMS representative.They can be done in person, or via telecommunications.
14.3.1
Test VerificationInspect artifact for any anomalies.
Test 1: Nominal Operation (D1S0T1)
Test PurposeTo test that a nominal operation can be submitted to FIMS.
Test ProcedureSubmit and record a nominal operation to the FIMS operation endpoint /operations.Record the synchronous response message verifying the operation was created.Record the asynchronous acceptance message from FIMS at /user/{operator}/decision.Data Exchanges: D1E1, D1E3, D1E4
Test Artifacts1. FIMS-IntegrationTest-{yourOrganizationName}-NomOpOperation-{dateOfTest}-v{versionNumber}.json 2. FIMS-IntegrationTest-{yourOrganizationName}-NomOpSyncResponse-{dateOfTest}-v{versionNumber}.json
Test 4: Terminated Operation (D1S0T4)
Test PurposeTo test that an operation can be terminated by FIMS.
Test ProcedureSubmit an operation to the FIMS operation endpoint /operations and receive the asynchronous acceptance message from FIMS at /user/{operator}/decision. Receive and record the asynchronous TERMINATED message from FIMS at /user/{operation}/decsion. Submit and record an INTENT CLOSE message to FIMS at /messages endpoint.Data Exchanges: D1E1, D1E3, D1E4, D1E8, D1E10
Test Artifacts
Appendix E -DWG Demonstration 1 FIMS-USS InterfaceThe content of this appendix is a technical document best viewed with appropriate tools, but is human readable on its own.This is the specification to which both the FIMS and the various USS implementations adhered to for the demonstration.Note that the data definitions were based on the various discussions and documentation referenced elsewhere in this document.--swagger: "2.0" info: description: "This API describes the RESTful interface from a UAS Service Supplier (USS) to the Flight Information Management System (FIMS) within UTM.There is an additional API for asynchronous communications that is described in the Stakeholders should subscribe to this topic to receive position reports provided to the FIMS by various operators.This is essentially an echo of the Postion data POSTed to the /positions endpoint.See the schema information describing Postions included within this document to understand the data that will be received via this queue.Note that if you are viewing this in a SwaggerUI, the "try it out" feature will not work since this is not a RESTful endpoint.responses: 410: $ref: "#/responses/WRONG_PROTOCOL" produces:-application/json /topic/operations: get: tags: -B.Subscription Points summary: Subscription point for receiving announcements about operations description: | Stakeholders should subscribe to this topic to receive announcements about operations that have been accepted/authorized.Information about denied operations will not be provided here.See the schema information describing Operations included within this document to understand the data that will be received via this queue.Note that if you are viewing this in a SwaggerUI, the "try it out" feature will not work since this is not a RESTful endpoint.responses			
			

				


	
		122.06382530000002,37.40906970000
		flight_geography: type: Polygon coordinates
		
	
	122.03732647634,37.41786440108], [-122.062176579,37.40968041145], ] ] conformance_geography: type: Polygon coordinates. beyond_visual_line_of_sight: false OperationVolume: type: object required: -ordinal -effective_time_begin -effective_time_end -min_altitude_wgs84_ft -max_altitude_wgs84_ft -flight_geography
	state: A controller_location: type: Point coordinates: [-122.048589,37.414869] gcs_location: type: Point coordinates: [-122.048589,37.414869] operation_volumes: -ordinal: 1 near_structure: false effective_time_begin: "2017-10-04T09:15:40.727Z" effective_time_end: "2017-10-04T09:25:40.727Z" actual_time_end: "2017-10-04T09:25:40.727Z" conformance_time_begin: "2017-10-04T09:14:40.727Z" conformance_time_end: "2017-10-04T09:26:40.727Z" min_altitude_wgs84_ft: 0.0 max_altitude_wgs84_ft: 300.0 conform_min_altitude_wgs84_ft: 0.0 conform_max_altitude_wgs84_ft: 400.0 flight_geography: type: Polygon coordinates: [ [ [-122.062176579,37.40968041145], [-122.05187056889,37.41786527236], [-122.03732647634,37.41786440108], [-122.062176579,37.40968041145], ] ] conformance_geography: type: Polygon coordinates: [ [ [-122.06382530000002,37.40906970000], [-122.05094253233000,37.41930062770], [-122.03276206976000,37.41929920176], [-122.06382530000002,37.40906970000] ] ] beyond_visual_line_of_sight: false OperationVolume: type: object required: -ordinal -effective_time_begin -effective_time_end -min_altitude_wgs84_ft -max_altitude_wgs84_ft -flight_geography


				
			
		
	
