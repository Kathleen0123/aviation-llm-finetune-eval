
	
	
		
Introductionhis paper describes the automated scenario generation process recently developed and implemented in the Air Traffic Management (ATM) Testbed (ATMTB).The ATMTB was formerly known as the Shadow Mode Assessment with Realistic Technologies (SMART) for the National Airspace System (NAS) Testbed (SMART-NAS Testbed (SNTB)).Motivation for the development of this testbed at the National Aeronautics and Space Administration (NASA) is to enable benefit, impact, safety and cost assessments for accelerating the deployment of Concept and Technologies (C&T) in the NAS.Today, C&T introduction into the NAS takes decades.The primary reason for this is an inability to assess the operational impact of the interaction between the proposed C&T and operationally deployed systems in terms of NAS-wide safety, traffic flow efficiency, roles and workload of controllers and traffic managers, and impact on fleet operations.Transition of C&T to operations requires mathematical modeling and simulation, Human-in-the-Loop (HITL) testing and shadow-mode evaluation driven by operational data.Cautious, slow and incremental steps are typically taken towards deployment because of limitations in each of these steps.This includes HITLs limited to a few scenarios, pilots and controllers, and the inability to inject decisions derived from a shadow-mode system into the operations for impact and benefit assessment.Whereas interaction with the operational system during testing and stages of deployment is not permissible due to safety concerns, it is possible to create a simulation environment that closely mimics the NAS using the same operational systems/hardware for enabling such assessments.Driven by this objective, ATMTB is developing infrastructure to enable mathematical modeling, HITLs and testing with operational systems in a simulated environment.The primary motivation for automated scenario generation for HITL simulations is the difficulty of creating scenarios manually.For example, traffic scenarios for the Multi-Aircraft Control System (MACS) 1 , used frequently for HITL-based air traffic concept evaluations at NASA, are generated manually by first creating an initial scenario (seed-scenario) by selecting flight-plans from recorded air traffic data and then modifying it by repeatedly running it in MACS until the characteristics desired for meeting the objectives of the HITL test are achieved.This process is time consuming.Even creating a seed-scenario that results in successful MACS simulation is tedious because of missing and erroneous data.Because of these difficulties, researchers typically base their experimental evaluations on only a few days of data.The evaluation of a concept or technology's system-wide impacts in terms of cost and benefits with one or two days of data is of limited utility.Therefore, the second motivation for automated scenario generation is that these evaluations should instead be conducted with many days of data with distinct/desired characteristics, given the availability of archived data.In the past several years, because of the decreasing cost of storage, large volumes of aviation related data have been collected by several organizations including NASA and the Federal Aviation Administration (FAA).NASA has recently invested in cleaning up and improving the consistency of the archived data.The scenario generation capability has been significantly enhanced this year to download these data files directly from the storage location and generalized to create surface traffic scenarios for Airspace Target Generator (ATG) and flight scenarios for Airspace and Traffic Operations Simulation (ATOS) 2 in addition to scenarios for MACS.This capability has been used to generate MACS scenarios for Dynamic Routes for Arrivals in Weather (DRAW) 3 and Integrated Demand Management 4 HITLs, and ATG scenarios for Airspace Technology Demonstration (ATD-2) 5 .It is currently being used to generate MACS scenarios for Instrument Flight Rules (IFR) traffic, Visual Flight Rules (VFR) traffic and the expected Urban Air Mobility (UAM) traffic for HITL-based evaluations under the ATM-eXploration (ATM-X) project 6 to enable future UAM vehicles to operate in the NAS.The rest of the paper is organized as follows.Because the examples and the results in this paper are focused on MACS traffic scenarios for HITL-based investigations of operational feasibility of the Integrated Demand Management (IDM) concept, the IDM concept is briefly described in Section II.This discussion also highlights some of the difficulties associated with creating scenarios that represent realistic conditions.The manual scenario generation process is outlined in Section III.The automated scenario generation process is discussed in Section IV.Validation of the seed-scenario, comparison of the seed-scenario with the HITL-scenario, and comparison of the HITL-scenario input with the MACS simulation output are described in Section V.The seed-scenario was created using the automated scenario generation process whereas the HITL-scenario was created by manually altering the seed-scenario.Finally, the main findings are summarized in the Section VI.
II. Integrated Demand Management HITL SetupIntegrated Demand Management (IDM) 7 is a Trajectory Based Operations (TBO) concept to collaboratively organize aircraft trajectories into well-managed flows that match traffic demand to the available capacity.The concept leverages FAA and NASA pre-departure, enroute and arrival technologies to achieve this objective.IDM uses Traffic Flow Management System (TFMS) tools to precondition traffic into the airspace domain of the Time-Based Flow Management (TBFM) system.If it was possible to predict future capacity and flight times accurately, the preconditioned traffic would arrive at the metering locations as intended; TBFM would only impose small delays required for meeting the runway spacing constraint.Unfortunately, incorrect capacity forecast, delayed departure from the airport, wind and weather introduce uncertainty to the arrival time forecast, which disrupts the schedule and sequence intended by preconditioning.TBFM then has to impose additional delays to adjust the schedule for complying with the capacity constraints at the meter fix and runway.Given that the uncertainty is higher and the cost of delay is lower when the aircraft are on the ground compared to when they are airborne and close to the TBFM freeze-horizon boundary, a proper balance between TFMS and TBFM delays is needed for reducing fuel consumption (by delaying as little as possible while airborne), maintaining the airline schedule and fully utilizing the available airport capacity.Several HITL and Automation-In-The-Loop experiments have been completed to investigate the operational feasibility of the IDM concept under realistic conditions.The testbed is currently being enhanced to support fasttime Monte-Carlo simulations for IDM concept evaluations. 8These experiments typically have the structure presented in Fig. 1.MACS simulates air traffic data based on the input traffic and weather/wind scenario files; it also provides a high-fidelity air traffic control simulation environment for controller and pilot interactions.In conjunction with MACS, an emulation of the Collaborative Trajectory Options Program (CTOP), called nCTOP (NASA CTOP), was constructed to perform the key functions of the TFMS version with CTOP capability.The nCTOP and MACS Planner Station blocks shown in Fig. 1 represent emulation of the TFMS with CTOP used at the Air Traffic Control System Command Center.Key functions of nCTOP includes setting capacity constraints at an FCA, automatically assigning delay and allocating trajectories to the pre-departures to balance the predicted arrival traffic demand at the FCA according to its capacity limit.Inputs therefore include the capacity scenario being simulated, and the schedule and Trajectory Options Sets (TOS) likely to be submitted by flight operators.Expect Departure Clearance Times (EDCT) and TOS allocation are output to all MACS stations through the MACS simulation manager.MACS stations for each pilot and controller communicate with all other MACS stations in the simulation, updating aircraft positions.A research version of the FAA's operational TBFM version 4.2.3 with NASA modifications is used to simulate the generation of arrival timelines; controllers are able to reschedule internal departures to fit into the overhead stream based on calculated Scheduled Times of Arrival (STA) at the metering locations such as meter fixes and runway threshold.The experimental setup in Fig. 1 illustrates an example of a concept that requires multiple scenarios; IDM requires capacity scenarios, scheduled traffic scenarios, likely airline TOS, detailed MACS traffic scenarios, and weather scenarios, including convective weather and wind.In addition, the scenarios derived from traffic and weather often require significant modification to meet the desired characteristics for the experiment, which in some instances can reduce experiment realism.For example, in the experiments described in Ref. 9, the baseline traffic scenario derived from recorded traffic from a single day -July 22, 2014 was modified based on feedback from subject matter experts to have the most representative characteristics of the nominal operations into Newark Liberty International (KEWR) during a clear weather day.This five-hour scenario included a total of 66 aircraft.Experiments were ultimately run investigating two wind severity levels-mild and heavy wind, and two traffic demand profiles with different distributions.However, in reality, under such wind conditions, airlines might have filed flight-plans differently compared to the ones in the traffic scenario.Availability of a technique for identification of days with the appropriate clear weather, wind conditions and traffic demand profile would have provided increased realism, as well as reduced the time required to generate the scenario.Future experiments will add significant complexity as convective weather is introduced at different locations 10 , making the generation of realistic scenarios even more challenging.Examples of such scenarios are the use of coded departure routes because of predicted convective weather activity downstream of the TBFM freeze-horizon, and the use of tactical rerouting (e.g., common tactical routes) due to unpredicted convective weather blocking an arrival gate.The IDM example discussed in this section illustrates some of the challenges for automated scenario generation.At the present time, only generation of seed traffic scenarios that run in MACS, ATOS and ATG are being considered.These seed-scenarios would have to be modified based on subject matter expert feedback and to meet additional experiment requirements not reflected in the seed-scenarios.Discussions in the following sections are limited to traffic scenario generation for MACS simulations.
III. Manual Scenario Generation ProcessThe manual MACS scenario generation process consists of the nine steps summarized below.1) Identify the desired scenario characteristics based on the experimental objectives.a) Determine the general characteristics that serve the purpose of the study.b) Talk to the Subject Matter Experts (SME) to augment and refine the desired characteristics.2) Search for the day and the time-period.a) Select the days with the desired weather conditions.b) Check Aviation System Performance Metrics (ASPM) data for those days, selected in the previous step, and see how the traffic demand evolved for the desired runway configurations.If the runway configurations in the ASPM data do not match the desired runway configurations, a relatively easy scenario editing step is employed in Step 5 to specify the routes to the desired runways instead.c) Choose the time-period based on the desired scenario characteristics.3) Download the Center-TRACON Automation System (CTAS) data for the selected day from the storage location.TRACON is acronym for Terminal Radar Approach Control.4) Convert the downloaded CTAS data into the MACS scenario format using the TCSim Route Analyzer/Constructor (TRAC).5) Modify the scenario if needed by Step 2b and look for any obvious errors in the scenario editor.6) Play the scenario in TRAC and make a determination of its suitability for MACS simulation based on traffic evolution.7) Run an open-loop MACS simulation with the generated-scenario for the time-period, chosen in Step 2c, and analyze the resulting MACS outputs to determine the extent to which the simulation meets the scenario requirements.8) Augment the analyzed-scenario with additional data for meeting the remaining scenario requirements that could not be met in the earlier steps.This step might consist of adding flights, for example, from different flows, regions, hours and days to increase traffic volume.9) Repeat Steps 5 through 8 until all the scenario requirements are met.Step 1 of the manual scenario generation process will stay the same for the automated scenario generation process because the automated scenario generation process will also have to output a scenario in accordance to the desired scenario characteristics.In Step 2, researchers use a guess-and-try technique by first picking a few days that they guess might meet the scenario characteristics identified in Step 1 and then examining the ASPM data for those days.An exhaustive search of such days in a year for example would be difficult to accomplish following the current manual process.It might be feasible to automate this step by enabling search based on surface, enroute and terminal traffic and weather metrics from multiple sources organized in databases and in groups, where the groups could be based on unsupervised/supervised classification techniques employing big-data technologies with data driven metrics/metadata derived from NASA's ATM-data-warehouse.It could be designed to support complex queries such as "find all days in 2016 that are like 01/20/2016" and "find days in 2015 with severe weather within 300 miles from Newark airport and Ground Delay Program (GDP) in Chicago."This might become a significant capability in the future for accelerating concept evaluation and acceptance because it will provide a large set of scenarios representing different operational conditions instead of the few manually-created scenarios for concept evaluation and acceptance testing.Steps 3 and 4 of the manual scenario generation process are quick and accomplished using computer programs.Researchers have reported that the initial MACS scenario file output by TRAC tool from Step 4 requires a lot of manual data entry in Step 5 due to missing and erroneous data.Researchers often resort to looking at old scenario files and talk to SMEs to determine reasonable values to enter missing and to replace erroneous data.Also, the route from the entry location to the runway has to be created by manually copying the filed flight-plan into a column in the scenario file and then modifying them.The automated scenario generation process in the ATMTB creates this route as a sequence of waypoints from the entry point, location of which is derived from track-data, to the closest point ahead of the entry point on the filed flight-plan followed by the waypoints in flight-plan till the end of the Standard Terminal Arrival Route (STAR) and then waypoints along the approach procedure to the designated runway.Approach procedures are defined in the MACS adaptation data.Steps 6 and 7 will eventually be replaced by the verification step of the automated scenario generation process.Whereas it is difficult to completely automate Step 8, it might be possible to automate it partially by creating scenarios for different days and conditions, and then judiciously combining them with the seed-scenario to create a scenario that meets the needs of the experiment.
IV. ATMTB Automated Scenario Generation ProcessATMTB infrastructure at its present stage of development can be described in terms of the following elements-(1) web-based frontend and backend, (2) Simulation Architect, (3) publish-subscribe messaging middleware, (4) Component Library, (5) simulation management, and (6) scenario generation.The web-based frontend and backend enable the user to interact with the ATMTB for tasks such as composing a simulation, running a simulation and retrieving output data.The Simulation Architect application launched from the web frontend provides a graphical user interface for enabling the user to drag-and-drop and connect predefined (user defined and testbed native) blocks for composing a simulation/scenario generation task.The Simulation Architect writes a set of instructions for simulation management based on block properties such as the component (executable) associated with a particular block, and the links between the blocks.Links specify the input and output relationships between the blocks, which defines the publisher and subscriber relationships in the simulation.Management of the distributed simulation is accomplished by Execution and Component Managers.Execution Manager interprets the instructions provided by the Simulation Architect to instruct the Component Managers to download components from the Component Library to the designated computers and to start them up.Once started, components interact with each other by publishing messages and subscribing to messages delivered using the messaging middleware.Unlike the other five elements, which are testbed infrastructure elements, the scenario generation capability is an application that runs on the testbed.The scenario generation capability was initially developed for creating traffic scenarios for MACS simulations.The automated scenario generation process in ATMTB is initiated by dragging and dropping blocks, specifying the block properties and linking the blocks graphically using the Simulation Architect.The Simulation Architect view for composing MACS scenario generation is shown in Fig. 2. The blocks labeled-Data Loader, Data Filters, and MACS Scenario Builder are parts of the scenario generation program.The preliminary step of scenario generation consists of the user picking a day (date) and specifying it as a property of the MACS Scenario Builder block for the scenario generation program to download the traffic data file from the storage location and read the associated traffic data during runtime.The type of traffic file to be downloaded is specified by selecting the appropriate Data Loader block; Fig. 2 shows the setup for loading ATAC (a particular format) data.The properties specified in Data Filter bocks and the "and"/"or" relations specified by chaining Data Filter bocks in the simulation builder provides instructions for the scenario generation program for reducing (down-selecting) the input traffic data.For example, three data filters can be chained together in series to tell the program to first select arrivals to Newark Liberty International (KEWR) based on the Arrival Airport property of the first filter block, then select aircraft landing on Runway 22L based on the Landing Runway property of the second filter block, and finally select aircraft landing between 17:00 UTC 6/6/2016 and 5:00 UTC 6/7/2016 based on Event Time property of the third filter block.Inclusion of the MACS Scenario Builder block tells the scenario generator to build a scenario for MACS simulation.Other blocks with inputs to the MACS Scenario Builder block instruct the scenario generation program to use the filtered data, aircraft performance models, adaptation data, wind data and initial conditions.The links between the blocks specify the data flow.The output of the Simulation Architect is a set of instructions for the Execution Manager that includes a configuration file for the generation component.The Execution Manager instructs the Component Manager to download the scenario generation program executable from the Component Library to a particular machine and to start it.The Component Manager also provides the configuration file, created by the Simulation Architect and provided by the Execution Manager, to the scenario generation program for generating the scenario.MACS scenarios are generated by processing recorded air traffic data archived in the ATM-data-warehouse in three different types of files-Reduced Record (RD), Event Data (EV) and Integrated Flight Format (IFF).RD files contain a single record for each flight, where the record contains information such as the reference time, unique key, aircraft ID, aircraft type, beacon code, airline, origin (airport or Fix-Radial-Distance (FRD)), takeoff/landing runway, destination airport, top-of-climb/top-of-descent time, runway threshold arrival/departure time, flight-plan (including route) data, and sector/center transition list.EV files contain multiple records for events related to each flight such as reference time, unique key, aircraft ID, aircraft type, event time, event type, object class, old name and new name.MACS scenario generation currently processes takeoff/landing and crossing events, which includes sector, center and TRACON crossings.Object class, old name and new name provide additional information related to the event.For example, complete information for a takeoff from San Francisco (SFO) airport would be available in the EV file as event type-takeoff, object class-airport, old name-"?"(not needed for takeoff event) and new name-SFO.Similarly, a center crossing event for a flight leaving Oakland Center (ZOA) and entering Los Angeles Center (ZLA) would be available as event type-crossing, object class-center, old name-ZOA and new name-ZLA.IFF files contain multiple records for each flight, where the records contain all flight-plans including amended flight-plans and track-data.Data associated with these records include reference time, unique key, aircraft ID, aircraft type, message type (for example, filed flight-plan and amended flight-plan), origin (airport or FRD), destination airport and filed altitude.Data contained in the RD and EV records are especially useful for filtering the traffic data for building the scenarios.The IFF data are useful for augmenting the traffic data derived from RD and EV records.Three types of filters are currently available.RD String Filters are used for selecting records from RD files by matching specified strings to those in the records.Supported filters include Aircraft Type, Airline, Arrival/Departure Airport, Aircraft ID, Center, Sector, and Landing/Takeoff Runway.Filter and List of Strings are properties of the RD String Filter block; the user selects the desired filter from the list of filters and provides a list of strings appropriate for the selected filter.For example, airport code such as KEWR is a string that is compatible with the Arrival/Departure Airport filter.Similarly, 22L is an appropriate string in the list of strings with the Landing Runway filter option.The RD Airport Proximity filter is used for selecting flights to/from airports either inside or outside the specified region by processing RD records.The user sets up the filter by selecting from a list of options related to the properties and inputting the values needed by the properties.Supported properties include Filter, Reference Location, Reference Distance and Airports Included.Options associated with the Filter property are Departure Airport and Arrival Airport; the Reference Location property expects an airport code like KEWR; the Reference Distance property expects distance in nautical miles; the Airports Included property expects values such as all inside, all outside and a list of specified airports codes like KEWR.Finally, Event Time Filter uses EV records to select flights.The Event Time Filter block has Event Type, Minimum Value, Maximum Value and Include/Exclude properties.Examples of Event Type are Landing, Takeoff, Top-of-Climb and Top-of-Descent.Minimum and Maximum Values are day (yearmonth-date) and UTC time (hour-minute-second)).The Include/Exclude property option specifies whether the flight events within the specified time interval are to be included or excluded.In addition to the selection of data specified using filter blocks on the Simulation Architect, Entry Track Method, Entry State Method, Aircraft Performance Model, Airspace Adaptation Database and Atmosphere Model have to be specified as shown in Fig. 2. Figure 3 shows the various inputs that have to be specified for MACS scenario generation and the choices associated with them.Three options for the Entry Track Method relevant to MACS scenario generation are: Distance, Start Time and Top-of-Descent.Target Airport ID and Distance from the Airport are the two parameters of the Distance block.Starting locations of the selected flights are chosen to be inside/outside the circular region defined by these two parameters.Start Time block enables the user to input the desired time past the simulation start time for selecting the starting position.For example, if the desired time is 30 minutes, the position of the flight at or just after when the simulation time is 30 minutes past the simulation start time would be chosen as the starting position.The Top-of-Descent block allows the user to specify a time with respect to top-of-
V. Validation and Comparison of Automatically Generated and Manually Refined ScenariosThe discussion and the results in this section pertain to the seed-scenario, HITL-scenario and the MACS simulation output; Fig. 5 summarizes the procedure for creating them.The ATAC data are used by the automated scenario generation procedure, described in the previous section, to create the seed-scenario.This seed-scenario is then manually refined to create the HITL-scenario.Finally, traffic is simulated using MACS with HITL-scenario as input.Two sets of results are presented below.The first set compares the seed-scenario with the HITL-scenario, Blocks 3 and 5, and the second set compares the HITLscenario with the MACS simulation output, Blocks 5 and 7 in Fig. 5.The seed-scenario for MACS simulation of arrival traffic to KEWR spanning six-hours starting at 17:00 UTC was created by processing June 6, 2016 RD, EV and IFF files archived in the ATM-data-warehouse.The seedscenario has 299 flights with 274 landing on Runway 22L, six on 22R and one on 29.Arrival runway could not be determined for the remaining 18 aircraft.Two types of analysis were done to characterize the seed-scenario.The first type consisted of determining the number of flights associated with the same parameter value such as call-sign and beacon-code.Figure 6 and7 show the number of flights associated with the same callsign and aircraft-type, respectively.Table 1 summarizes these results for different parameters.For example, of the 290 unique call-signs, 9 call-signs were associated with more than one flight; Fig. 6 shows that each of the nine callsigns were associated with two aircraft.Of the 35 different aircraft types in the seed-scenario, 24 (see the second row of Table 1) were associated with several aircraft as shown in Fig. 7. Similarly, one destination airport, KEWR, was associated with every flight.Of the four landing runways-22L, 22R, 29 and "not-set", one aircraft landed on 29, 274 on 22L, six on 22R and 18 did not have an assigned runway (not-set category).Thus, one flight was  The two types of analysis proved to be very useful for determining errors in the scenario.For example, the entry point IAS histogram in Fig. 8 shows that the scenario generation program determined the IAS of an aircraft to be 712 knots.The Mach number for the passenger aircraft associated with this flight was determined to be 1.7, which is wrong.Whereas checks were built into the scenario generation program, the checks are not always successful because of data quality issues.In this particular instance, several successive actual track-data reports used for determining the entry state were erroneous.Figure 8 also shows that 78 aircraft had the correct entry point IAS of zero because they were on the ground at the simulation start time.The cruise altitude histogram showed that seven flights had a cruise altitude of zero, which is incorrect.Results suggest that these types of analyses should be included as an extension to the automated scenario generation process to remove flights with improper parameters from the seed-scenario.In addition to detecting data quality issues, an important aspect of validation is determining the reasonableness of the scenario.For example, it is not desirable for several flights to have the same call-sign in the HITL-scenario.There are two possible ways of addressing this issue.One is to create new call-   number column of the MACS scenario file, where Mach number is determined using BADA model speeds if the cruise altitude is above the Mach transition altitude.This implies that the researcher should run the MACS simulation with wind data.If the researcher uses the file without wind data, MACS would simulate flights with unrealistic groundspeed.Analyses for generating the results for the paper suggest that if realistic landing rate is desired in the scenario and the researcher wishes to run the scenario without wind data for example, average cruise groundspeed should be output in the cruise speed/Mach column of the scenario file.Figure 9 shows the actual landing rate at KEWR, and the predicted landing rate using Eq. ( 1) with average cruise groundspeed.Landing rate is determined as the number of flights in the hourly window, continuously shifted temporally at a fiveminute interval.The figure suggests that MACS scenario with average cruise groundspeed would result in a scenario that would reasonably replicate the actual landing rate.The two types of analyses done for the seed-scenario were repeated for the HITL-scenario to determine the differences between them.The manually refined HITLscenario that was used for the IDM HITL in March 2018 was created by the researcher by selecting flights from the seed-scenario and altering some of the values such as cruise speeds and entry time to achieve the desired landing rate.To have the demand exceed arrival capacity of 40 aircraft/hour, entry times of flights in the seed-scenario were altered to squeeze six-hours of arrival traffic into five-hours for creating the HITL-scenario.The HITLscenario has 191 flights, a subset of flights in the seedscenario, with all landing on Runway 22L.Other than three flights, all the flights in the HITL-scenario are in the seed-scenario.All flights from the seed-scenario within a 40 nautical-mile circular region around KEWR were not selected for the HITLscenario; some flights were rejected if their entry time was less than 30 minutes past 17:00 UTC.Flights were also removed in an attempt to maintain the ratio of the number of internal flights to the total number of flights in the HITL-scenario to the 23% seen in the seed-scenario, where the internal flights are those that originated within the 400 nautical-mile circular region surrounding KEWR.The ratio of the internal to the total flights in the HITL-scenario was found to be 30%.Results summarized for the seed-scenario in Table 1 are provided for the HITLscenario in Table 2.This table shows that the flights in the HITL-scenario had a unique call-sign, and that they landed on the same runway (Runway 22L).The ratios of "Once to Unique" and "Repeated to Unique" in Table 1 and 2 expressed as percentage are shown side-by-side in Table 3.This table shows that most ratios seen in the seed-scenario are maintained in the HITL-scenario except for the entry point sector-ID.Compared   to seed-scenario with 70 entry point sector-IDs, the HITL-scenario had three sector-IDs: ZDC-01, ZOB-01 and ZBW-01, which were assigned to 65, 74 and 52 flights, respectively.Tailoring of the HITL-scenario to achieve the objective of higher traffic demand with respect to airport arrival rate of 40 aircraft per hour, which was realized by squeezing six-hours of traffic into five-hours, is apparent in Fig. 10. Figure 10 shows the actual and the predicted landing rate graphs for the HITL-scenario.The actual landing rate graph is based on the actual landing time of 191 aircraft in the HITL-scenario whereas the predicted landing rate graph is based on Eq. (1).Comparing Figs. 9 and 10 it is seen that several flights arriving during the early part of the scenario were removed from the seedscenario to create a gradually increasing traffic demand in the HITL-scenario.The increase in traffic demand achieved in the HITLscenario can also be achieved by an algorithm as follows.Let the desired arrival rate be n aircraft/hour.The desired temporal separation, t  , between successive aircraft is then 60/ n minutes.Thus, ( 1) ( )LL t i t i t    (2)where () L ti is the landing time of the leading aircraft and ( 1)L ti  is the landing time of the following aircraft.Solution of the recursion Eq. ( 2) is ( ) (1) ( 1)LL t i t i t    (3)where (1) L t is the landing time of the first aircraft and 1 i  .Combining Eq. ( 2) with (1), the entry times can be determined as,. () ( ) (1) ( 1) () R EL Avg li t i t i t Vi     (4)The final step of the validation process is comparison of the MACS simulated traffic with that intended by the scenario.Figure 11 shows the comparison of the predicted landing rate with the MACS simulated traffic landing rate Figure 10.HITL-scenario KEWR landing rate.using the HITL-scenario.Analysis showed that the predicted landing rate graph is sensitive to the cruise speed.As expected, faster cruise speeds shift the graph to the left and slower to the right along the abscissa.The difference between the two graphs seen in Fig. 11 is due conversion of Mach to cruise speed (true airspeed) and the aircraft performance models employed in MACS.requires true airspeed to be specified below Mach transition altitude and Mach above it.Mach numbers specified in the HITL-scenario were converted to true airspeed using standard atmosphere for predicting the landing rate.Using June 6, 2016 RUC data for this conversion could have resulted in a slightly different outcome.An additional source of error is that 18 aircraft in the MACS simulation came close to landing but did not actually land, they continued flying past the runway.To create a substantial scenario validation capability, the analyses described in the paper will need to be extended.One such example is the ability to determine the deviation of the MACS simulated track-data with respect to the flight-plan specified in the input scenario data.This could help identify errors in the flight-plan, missing waypoints in the MACS adaptation database, and MACS trajectory modeling errors.
VI. ConclusionsThe automated scenario generation process recently developed and implemented in the Air Traffic Management Testbed being developed at the NASA Ames Research Center was described.The earlier manual scenario generation process for generating Multi-Aircraft Control System scenarios for use in the Human-in-the-Loop experiments was described to motivate automated scenario generation.Two scenarios were analyzed: (1) the seed-scenario generated using the automated scenario generation method and (2) the Human-in-the-Loop-scenario created by a researcher starting from the seed-scenario.Results summarized in tables show that many of the characteristics seen in the seed-scenario are preserved in the Human-in-the-Loop-scenario.Two types of analyses were described for comparing the seed and the Human-in-the-Loop scenarios.The first type analyzed duplicate parameters associated with flights such as call-sign, beacon-code and entry point sector-ID; the second type examined the distributions of route length, cruise speed, cruise altitude, actual landing time, predicted landing time, entry time, and entry point speed and altitude.Results obtained suggest these analyses are useful for determining data quality issues and for eliminating flights with unreasonable parameter values from the seed-scenario.Landing rate based on Multi-Aircraft Control System simulated traffic using the Human-in-the-Loop-scenario were compared with the expected landing rate based on the route length and average cruise speed of flights in the Humanin-the-Loop-scenario. Causes for the differences seen in the landing rates were identified.Close examination of the Human-in-the-Loop-scenario revealed that many of the desired characteristics such as flights having unique callsigns and airport arrival rate demand exceeding the airport arrival rate capacity can also be achieved in the seedscenario by enhancing the automated scenario generation process.A method for altering the entry time of flights to get the desired landing rate was described as an example of such enhancement.and confirm the findings.Hyo-Sang provided the HITL-scenario, a copy of the MACS software that he had used for the HITL and the adaptation data required for running that version of MACS.Hyo-Sang also described the manual scenario generation process for MACS simulations that had been used prior to the automated scenario generation process described in this paper.Authors are grateful to Dr. Min Xue, Dr. Antony Evans, Shannon Zelinski and Dr. Banavar Sridhar for reviewing the paper and providing feedback.Contributions of the other ATM Testbed team members-John Robinson, James Murphy, Alan Lee, Chok Fung (Jack) Lai, Phu (Phil) Huynh and Huu Huynh to the idea, design and development of the scenario generation capability is gratefully acknowledged.Figure 1 .1Figure 1.Example IDM experimental setup.
Figure 2 .2Figure 2. Simulation Architect view for composing MACS scenario generation.
descent for selecting the initial position of the flight.A value of -5 minutes for example would result in the selection of the position five minutes (or slightly more because track-data might not be available exactly at 5 minutes) prior to the time the flight reaches the top-of-descent point.At the current stage of development, there is a single option associated with each of the other inputs needed for generating MACS scenarios.The only option available for the Entry State Method is From Track.Inclusion of the From Track block the scenario generator to use actual track data and the Mach transition altitude, determined using Base of Aircraft Data (BADA) 11 aircraft performance model and the specified atmospheric model, to determine the state of the flight such as altitude, heading, calibrated airspeed and Mach number at the entry location.The only option for Aircraft Performance Model is BADA Model block, and for Airspace Adaptation Database is National Flight Data Center (NFDC) Database block.Two options for the Atmosphere Model are Rapid Refresh block and Standard Atmosphere block.The steps for MACS scenario generation starting from loading and filtering the traffic data to output of scenario data in a file are summarized in Fig. 4. The first step consists of loading RD, EV and IFF files from ATM-data-warehouse and filtering traffic data according to the filters specified on the Simulation Architect, and creating the flight data structure.The second step consists of assigning a BADA aircraft model in the flight data structure based on aircraft type and BADA Synonym List, and sorting the flight-plans of each flight by time.BADA Synonym List enables mapping of aircraft types that do not exist in the BADA database to the ones that exist in the database.The next step consists of finding the entry track data of the flights based on the simulation start time and the Entry Track Method specified on the Simulation Architect.Entry track data consist of time, latitude and longitude, altitude, groundspeed, course heading, Rate of Climb or Descent (ROCD) and sector ID of the entry point.The last flight-plan prior to entry track time is determined in the
Figure 3 .3Figure 3. Inputs and associated options for MACS scenario generation.
Figure 4 .4Figure 4. Summary of MACS scenario generation steps.
Figure 5 .5Figure 5. Summary of scenario and MACS output data generation steps.
tis the predicted landing time, E t is the entry time (takeoff time for aircraft on the ground), R l is the route length and .Avg V is the average cruise groundspeed, which is determined by averaging the actual cruise speed derived from track-data within the top-of-climb and top-of-descent interval.Predicted landing rate comparison with the actual landing rate is useful for sanity check.
Figure 6.Flights with the same call-sign.
Figure 7 .7Figure 7. Flights with the same aircraft-type.
Figure 8 .8Figure 8. Entry point IAS.
Figure 9 .9Figure 9. Seed-scenario KEWR landing rate.
Figure 11 .11Figure 11.MACS simulated using HITL-scenario versus HITL-scenario KEWR landing.rate.
Table 1 .1Summary of seed-scenario results.#ParameterOnce RepeatedUnique1.Call-sign28192902.Aircraft-type1124353.Destination airport0114.Landing runway1345.MACS flight-plan148471956.ATC flight-plan174412157.Beacon-code256212778.Departure airports50681189.Entry point altitude736113410. Entry point IAS775813511. Entry point sector-ID47237012. Aircraft weight52429
Table 2 .2Summary of HITL-scenario results.#ParameterOnce RepeatedUnique1.Call-sign19101912.Aircraft-type1020303.Destination airport0114.Landing runway0115.MACS flight-plan64411056.ATC flight-plan80401207.Beacon-code18151868.Departure airports4150919.Entry point altitude35468110. Entry point IAS23143711. Entry point sector-ID03312. Aircraft weight31619
Table 3 .3Comparison of seed-scenario with HITL-scenario.Seed-scenarioHITL-scenario
		
		

			
AcknowledgementsThe authors thank Dr. Antony Evans and Dr. Hyo-Sang Yoo.This paper would not have been possible without their help.Tony described the IDM concept and ran MACS with the HITL-scenario to identify some issues
			

			

				


	
		Human-In-the-Loop Evaluation of NextGen Concepts in the Airspace Operations Laboratory
		
			ThomasPrevot
		
		
			PaulLee
		
		
			ToddCallantine
		
		
			JoeyMercer
		
		
			JeffreyHomola
		
		
			NancySmith
		
		
			EverettPalmer
		
		10.2514/6.2010-7609
	
	
		AIAA Modeling and Simulation Technologies Conference
		Toronto, Ontario, Canada
		
			American Institute of Aeronautics and Astronautics
			August 2-5, 2010
		
	
	Prevot, T., et. al., "Human-in-the-Loop Evaluation of NextGen Concepts in the Airspace Operations Laboratory," AIAA 2010-7609, AIAA Modeling and Simulation Technologies Conference, Toronto, Ontario, Canada, August 2-5, 2010.



	
		A Multi-Operator Simulation for Investigation of Distributed Air Traffic Management Concepts
		
			MarkPeters
		
		
			MarkBallin
		
		
			JSSakosky
		
		10.2514/6.2002-4596
	
	
		AIAA Modeling and Simulation Technologies Conference and Exhibit
		Monterey, California
		
			American Institute of Aeronautics and Astronautics
			August 5-8, 2002
		
	
	Peters, M. E., Ballin, M. G., and Sakosky, J. S., "A Multi-Operator Simulation for Investigation of Distributed Air Traffic Management Concepts," AIAA Modeling and Simulation Technologies Conference and Exhibit, Monterey, California, August 5-8, 2002.



	
		Dynamic Arrival Routes: A Trajectory-Based Weather Avoidance System for Merging Arrivals and Metering
		
			ChesterGong
		
		
			DaveMcnally
		
		10.2514/6.2015-3394
	
	
		15th AIAA Aviation Technology, Integration, and Operations Conference
		Dallas, Texas
		
			American Institute of Aeronautics and Astronautics
			June 22-26, 2015
		
	
	Gong, C., McNally, D., and Lee, C. H., "Dynamic Arrival Routes: A Trajectory-Based Weather Avoidance System for Merging Arrivals and Metering," AIAA 2015-3394, 15 th AIAA Aviation Technology, Integration, and Operations Conference, Dallas, Texas, June 22-26, 2015.



	
		Integrated Demand Management: Coordinating Strategic and Tactical Flow Scheduling Operations
		
			NancyMSmith
		
		
			ConnieBrasil
		
		
			PaulULee
		
		
			NathanBuckley
		
		
			ConradGabriel
		
		
			ChristophPMohlenbrink
		
		
			FaisalOmar
		
		
			BonnyParke
		
		
			ConstantineSperidakos
		
		
			Hyo-SangYoo
		
		10.2514/6.2016-4221
	
	
		16th AIAA Aviation Technology, Integration, and Operations Conference
		Washington, DC
		
			American Institute of Aeronautics and Astronautics
			2016
		
	
	Smith, N. M., et. al., "Integrated Demand Management: Coordinating Strategic and Tactical Flow Scheduling Operations," 16 th AIAA Aviation Technology, Integration, and Operations Conference, Washington, DC, 2016.



	
		Airspace Technology Demonstration 2 (ATD-2) Technology Description Document
		
			AGing
		
		Memorandum: NASA/TM-2018-219767
		
	
	
		21076-1320
		Hanover, MD
		
			NASA Center for AeroSpace Information
			7115
		
	
	NASA Technical
	Standard Drive 5301. cited 5/10/2018
	Ging, A., et. al., "Airspace Technology Demonstration 2 (ATD-2) Technology Description Document," NASA Technical Memorandum: NASA/TM-2018-219767, NASA Center for AeroSpace Information, 7115 Standard Drive 5301, Hanover, MD 21076-1320. URL: https://www.aviationsystemsdivision.arc.nasa.gov/publications/2018/NASA-TM-2018-219767.pdf [cited 5/10/2018].



	
		ATM-X: Air Traffic Management -eXploration
		
			WNChan
		
		
	
	
		Partnership Workshop
		Moffett Field, California
		
			April, 2018
		
	
	cited 5/10/2018
	Chan, W. N., "ATM-X: Air Traffic Management -eXploration," Partnership Workshop, NASA Ames Research Center, Moffett Field, California, April, 2018. URL: https://ntrs.nasa.gov/archive/nasa/casi.ntrs.nasa.gov/20180002413.pdf. [cited 5/10/2018].



	
		Evaluation of Integrated Demand Management looking into Strategic & Tactical Flow Management
		
			CMoehlenbrink
		
		
	
	
		Europe Air Traffic Management Research and Development Seminar
		
			June 27-30, 2017
			Seattle, Washington
		
	
	12 th USA/. cited 5/10/2018
	7 Moehlenbrink, C., et. al., "Evaluation of Integrated Demand Management looking into Strategic & Tactical Flow Management," 12 th USA/Europe Air Traffic Management Research and Development Seminar, Seattle, Washington, June 27-30, 2017. URL: http://www.atmseminarus.org/seminarContent/seminar12/papers/12th_ATM_RD_Seminar_paper_51.pdf [cited 5/10/2018].



	
		Using an Automated Air Traffic Simulation Capability for a Parametric Study in Traffic Flow Management
		
			HeatherArneson
		
		
			AntonyDEvans
		
		
			DeepakKulkarni
		
		
			PaulULee
		
		
			JinhuaLi
		
		
			MeiYWei
		
		10.2514/6.2018-3665
	
	
		2018 Aviation Technology, Integration, and Operations Conference
		Atlanta, GA
		
			American Institute of Aeronautics and Astronautics
			June 24-28, 2018
		
	
	8 Arneson, H., Evans, A. D., Kulkarni, D., Lee, P., Li, J., Wei, M. Y., "Using an Automated Air Traffic Simulation Capability for a Parametric Study in Traffic Flow Management," 18th AIAA Aviation Technology, Integration, and Operations Conference, Atlanta, GA, June 24-28, 2018.



	
		Required time of arrival as a control mechanism to mitigate uncertainty in arrival traffic demand management
		
			Hyo-SangYoo
		
		
			ChristophMohlenbrink
		
		
			ConnieBrasil
		
		
			NathanBuckley
		
		
			AlGlobus
		
		
			NancyMSmith
		
		
			PaulULee
		
		10.1109/dasc.2016.7778013
	
	
		2016 IEEE/AIAA 35th Digital Avionics Systems Conference (DASC)
		Sacramento, California
		
			IEEE
			2016
		
	
	Yoo, H., et. al., "Required Time of Arrival as a Control Mechanism to Mitigate Uncertainty in Arrival Traffic Management," 35 th IEEE Digital Avionics Systems Conference, Sacramento, California, 2016.



	
		Impact of Different Trajectory Option Set Participation Levels within an Air Traffic Management Collaborative Trajectory Option Program
		
			Hyo-SangYoo
		
		
			ConnieBrasil
		
		
			NancyMSmith
		
		
			NathanBuckley
		
		
			GitaHodell
		
		
			ScottKalush
		
		
			PaulULee
		
		10.2514/6.2018-3040
	
	
		2018 Aviation Technology, Integration, and Operations Conference
		Atlanta, GA
		
			American Institute of Aeronautics and Astronautics
			June 24-28, 2018
		
	
	Yoo, H., et. al., "Impact of Different Trajectory Option Set Participation Levels within an Air Traffic Management Collaborative Trajectory Option Program," 18 th AIAA Aviation Technology, Integration, and Operations Conference, Atlanta, GA, June 24-28, 2018.



	
		User Manual for the Base of Aircraft Data (BADA) Revision 3.6
		
			ExperimentalEurocontrol
		
		
			Centre
		
		No. 10/04
		
			July, 2004
			Eurocontrol Experimental Centre Publications Office, B.P
			15
			Bretigny-sur-orge, France
		
	
	EEC Note
	Eurocontrol Experimental Centre, "User Manual for the Base of Aircraft Data (BADA) Revision 3.6," EEC Note No. 10/04, Eurocontrol Experimental Centre Publications Office, B.P. 15, 91222 -Bretigny-sur-orge, France, July, 2004.


				
			
		
	
