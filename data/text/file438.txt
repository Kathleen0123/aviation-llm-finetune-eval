
	
	
		
INTRODUCTIONIn the past, terminal-area guidance system design for aircraft has concentrated primarily on automatic glide-slope tracking, flare, and touchdown.During recent years, designs have been developed to prOVide automatic guidance along curved and decelerating approach paths~This increased capability was made possible through the integration of digital computers into the flight guidance system.However, even in the more advanced designs, automatic guidance is limited to a few prestored three-dimensional flightpaths.Although the ability to fly complex prestcred trajectories is essential, it cannot give optimum performance under actual terminal-area operating conditions, as shall be explained.First, a prestored trajectory can optimize neither fuel consTh~ption nor certain other performance measures under actual operating conditions.Optimum trajectories depend significantly on aircraft gross weight, wind and temperature profiles, and on the type of constraints imposed, These variables cannot be predicted reliably prior to takeoff.To prestore optimum trajectories for each combination of variables to be encountered woul.dresult in an impossibly large memory requirement.Therefore, prestored trajectories must necessarily represent a in performance.Second, in existing systems the pilot must the aircraft manually from some initial position to the starting point of the or fixed ectory.Flight along this segment is knovm as the capturing maneuver.Three-dimensional~curved eeteries can be difficult to capture ~and, if the cetory also includes a of time} as is the case in four-dimensional) ~the cap maneuver cannot be done the pilot without computer assistance.because of its variability, can only be synthesis.Therefore, the capturing maneuver, generated by onboard trajectory Third, aircraft entering high-density airspace for a landing approach are usually coutrolled by air traffic control vectors, and during this period they are often forced to deviate from a prestored flightpath.Resumption of flight on a prestored path can only begin after the aircraft has received its final vector, clearing it for approach.But the initial position of the aircraft at that time is a v a r Lab Le , thus requiring a capturin-g maneuver and, t.here f'o r e , onboard synthesis.With the onboard trajectory synthesis algorithm presented in this paper, an onboard computer rapidly calculates an efficient and flyable aircraft trajectory that meets specified initial and final conditions and that is subject to various constraints.If a portion of the trajectory~such as the final approach, is fixed, the algorithm generates the desired airspeed and flightpath angles along the fixed se~nents.If the trajectory is not fixed, the algorithm will synthesize the trajectory both horizontally and vertically, based on the minirnum~fuel or minimum-noise criterion.The latter trajectory synthesis is often required to capture a prestored or fixed trajectory and is therefore called the capture mode.An initial design of a four-dimensional guidance system embodying the concept of onboard traj ectory synthesis, including the capture mode, wa s developed and flight tested on board a Convair 340 aircraft equipped wi.t.h STOLfu~D avionics (ref.1).In the design described here a similar approach is used in that the synthesis problem is separated into two parts: the synthesis of the horizontal trajectory and the generation of speed and altitude profiles compatible with the horizontal path.However, an.improved algorithm was used for synthesis of the horizontal track (developed in ref. 2), and vertical and speed profiles are synthesized by a more sophisticated method using slllplified aero-propulsion performance models of the aircraft (ref.3).This results in profiles that are more nearly optimum in terms of fuel conservation.Design of the control law for tracking the synthesized trajectory is based on a linearized perturbation guidance approach.Since the perturbation equations are aircraft-configuration-dependent, gain scheduling is used in the feedback law.The Augmentor Wing Jet SIOL Research Aircraft (AWJSRA) was chosen as the test vehicle for this concept.This type of powered-lift aircraft is not only highly cost-sensitive to operational procedures in the terminal area~but also exemplifies particularly well the unique problems of powered-lift aircraft.Those problems are high fuel consumption in the STOL mode, dependence of both lift and drag on thrust, and an excess of controls over the minimum number needed to determine path and speed.These factors suggest that trajectory optimization could greatly increase the operational efficiency of the aircraft.Implementation of this concept was facilitated by the installation of the STOLfu~D avionics on board the aircraft.This paper presents the analytical basis for the system and d. description of the computer implementation.The implementation was done initially in FORTRi'h'J and wa s run on a large genera.l-purposecomputer (ref.4); it was then evaluated in a piloted simulation and in flight.The description of the computer implementation is presented in abbreviated form in the appendix; nevertheless~the information provided there should be sufficient to permit application of the techniques to other aircraft.
ENERCY-fu\TE MODELAn energy-rate model of aircraft performance has been found to yield a compact and sufficientl.yaccurate representation of performance for terminalarea trajectory synthesis.In this section a performance model based on energy rate is derived following the approach used in reference 5.The energy E is defined byE h + 1 2g (V 2) a (1)Differentiation of equation (1)with respect to time v h + g (2)The airspeed Va is the magnitude of the vector Va
VIThe Ea r t h is a s sume d to be flat and is the velocity_of the aircraft with r e s pec t to an Earth-fixed inertial coordinate system; VT,V is the velocity of the mean wind with respect to the same system.Thus the definition of kinetic energy in equation.=.(l) eliminates the effects of constant winds from the total energy.VI into components and normal to and equa-ting to the approximate forces gives the following que st.c s t eady e t a t e equations of ruot.Lon the horizontal projection of assumed to be zero.
Note that the vertical component of isIn the remainder of the discussion of the energy-rate model it is assmned that cos fa : : : : 1, sin fa Z Ta' and that Y a is negligible.(Later, when eq. ( 6) is integrated to find distance along the reference fl~ghtpath, cos is retained.)Using these assumptions and substituting for h in equation (5) from (2) gives and combining (3) and (7) results inE ~Va [T cos(a m: \I) -D-(V w : a t Jwhich is an alternative expression for energy rate.The wind~shear term in equation ( 4) is small compared with the gravity term and will be neglected; therefore, setting Y a to zero results in the constraint (7) (g)T sin(a + + L ~W( 9)where, by definition, W = mg/cos ¢.This definition is used for convenience because it causes the effect of the bank angle on the energy-rate diagrams to appear as a change in aircraft weight.Finally, equations (7) and (8)Equation ( 11) specifies the energy rate as a function of the difference between thrust and drag, subject to the constraint that lift equals weight.Thrust and drag are in turn functions of_the controls which produce forces in the direction of the airspeed vector Va' These controls are: the power setting the flap angle Of, the angle v of the vectored thrust nozzle, and the angle of attack a , Equation (10) determines the relationship between flightpath angle and acceleration cor the energy rate calculated from equation (11).Eqnation (10) indicates that a given energy rate may be utilized to fly at flightpath angle Y a constant J or to fly at zero flightpath ãngle with acceleration An of other combinations of Ya and Va can also be chosen to the same energy rate.This makes a simplifying dichotomy in the cetory that at any time the desired energy rate is selected controls} the related of -Ya and a can be selected to generate the of the fThe next aec t i.on the func t i.onal derrce of ener-gy rate on the controls.
SELECTION OF REFERENCE CONTROLSSince the STOL aircraft studied in this paper has four controls to ac h Leve a specified energy rate and to maintain lift e qua l to \veight, there is (In excess of two controls over the minimum number needed for simultaneous solutions to equations ( and (11).These two extra of freedom in the controls are exploited to minimize power and t therefore, fuel flow at cvc r-y energy rate.This optimization problem is restated in form as the maximization of energy rate for a power setting:T max \J,a,of -D (J 2)
Constraint:T sin+ \J) + L (JBecause CV) and 9 arc not functions of the aircraft states or controls W at are assumed to be zero for the maximization.The maximization must the f oLlow i ug Lnequalt t-y constraints on the controls:-10.5°s ex s 19.5°6 °:s v ,S; 100 0 5.6 G s C' :s 6 uf is defined as t.be minimum of the placard val uc , or 65 he maximum Ct lies on the 30°contour and the corresponding power decreases to its minimum of 84%, At still higher s peeds , the maxf.mumangle<of-attack contour coincides with the power contour.The significance of the 30 0 -f may be seen more clearly by referring back to figure It where the contour of maximum a can be traced as follows:Start on the 84% powe r contour at maximum speed and f c l.Low that contour, past point B~to its intersection with the 30°contour.From there proceed along the 30 e -f l a p contour to the maximum-power contour and along the latter to the reLn'imum speed the maximum-power contour becomes vertical).It was found while generating the data for the energy-rate tables that the max.lrnum value of ex becomes increasingly sensitive to the minimum value of maneuver margin as airspeed decreases.In the flight implementation of the algorithm t data tables corresponding to four diagrams such as that shown in figure 1 are utilized~two for sea-level altitude at we Lght.s of 38,000 and 48,000 Lb and two others for the same weights at an altitude of 5,000 ft.
4shows the diagram for an dircraft we i ght of 48}OOO Lb at sea level; figure 4(b) S110\4S the effect of altitude on energy rate by superimposing ene.r-gy-e r a t e diagrams for zero and 5,OOO-ft altitudes at a weight of 38,000 lb.The effect of is seen to be much greater than that of alt.itude over the altitude range of Lnr e r e at 0 Howcve r , the 5 ~OOO-ft altitude \1<18 selected on the basis of the flight-test environment dnd could probably be increased to 10~OOO ft without significant loss in accuracy.Experience indicates that these are sufficient data for adequate interpolation of the contour.f Horizontal Flightpaths References 6 and 7 give several algoritrnns for computing near-m~nlmum distance two-dimensional ectories as a sequence of an initial constdntradius turn, a segment of straight flight and a final turn~where the radii are chosen so as to avoid a maximum bank at the maximu:m ground speed encountered in the turn.A new a Lgor Lthrn was developed for f implementation in the present study.This algorithm, which is derived in reference 2, is based on the solution of a set of closed-form equations; it w L'lI.always yield a solution.Figure 5 illustrates the two-dimensional tories computed by the algorithm for several initial positions Pi in the terminal area.Note that the terminal point Pf lies on an extension of the r-unway c en.te r l Lne , and that the heading angle H f of all trajectories is to the runway heading at that point~Thus, the algorithm generates twodimensional trajectories that match the initial and final state vector components --(Xi' Yi' Hi) and (X f, Y f, H f). Note that the point Pf in 5 need not necessarily be at the beginning of the final approach~As in reference 6, a fixed horizontal approach path may be specified a series of waypoints, and P f may be located at any of those waypoints.That portion of the synthesized horizontal trajectory between Pi and Pf is referred to as the llcapture ll trajectory, of Speed-Altitude Profiles the problem is it is still too there--
EachThe horizontal distance of the ee S, a kno~ĩ n the previous step, adds a third boundary condition to be profiles.Although this three-state (S~h, Va) much simpler to solve than the original five-state problem, complex for onboard-computer implementation.A fore developed that generates the characteristics of references 5 and 8, He with reference to descent, which is the most It vIas found in reference 5 that the descent of a mf.nLmum-e fue I>descent ectory is characterized a in the start of the energy decrease for as as is consistent with end constraints on speed and altitude~Flirthermore~the energy consists initially of descent to the final altitude at near-constant indicated t f o Ll owed by a rapid airspeed deceleration in level flight~Host of the energy change takes place at minimlllll throttle, as one expect for minimum-fuel flight.MinimUlll-noise-desc.ent profiles computed in reference 8 are similar in that they also delay the start of energy decrease as as , but approach the final altitude in a steep descent to maximize the aircraftfs altitude.above the ground near the runway.This means that the dece.leration to the final airspeed takes before the start of descent or during the early portion of the descent.(24) (15) in An additional constraint was on the because the autoservo does not allow reversal of the motion.Thus, reference trajectories calling for extension and retraction.must be The problem is solved at higher speeds setting the lower Ibnit to its value on the 84%-throttle contour if the at the next (nearest t ouc.hdown ) is greater than that at B in f 1.At Lowe r speeds any reversal in reference f is kept small by a continuous descent (negative flap extension.is seen to approxthe minimumbetween fuel and 1
The distance to touchdown inTo illustrat~the effect of the parameter s on the descent-deceleration aSSl1ITle En = -O.13~independent of ~and let the that lS to be achieved at touchdown be 100To achieve the desired conditions) equations ( 16 The algorithm used in reference 5 to find minimum-fuel ectories would require too much computation time for implementation as part of the AWJSRA flight system.Therefore~the approach used here is to make the required energy changes at the maximum allowable rate (i.e.~at the maximum IEnl).Simulation studies indicate that a further fuel reduction (of from 5% to 10%) could be achieved by proper scheduling of 0 and c, but this is a subject for I ' , future study.The use of the maximum jEnl yields minimum time and minimum noise, and is the most s test of the capabilities of the guidance system, since it is generally operating along constraint boundarics.These trajectories are obtained by setting cr to unity lowing the E contour during descent and decelerationũ mi n aircraft under study this choice of v yields energy rates too negative for safe operation in the terminal area at some airspeeds.A limit less than 1.0 is also necessary to reserve energy rate for perturbation control.A practical upper limit ou a is about 0.9 for the AWJSRA.In the flight implementation, the two profile parameters are keyboard entries that allow the pilot to choose values appropriate ror each landing approach.In addition~the pilot can specify the maximum deceleration and descent angles via keyboard entry.The maximum safe deceleration for this aircraft is linlited to about O~06 g by the maximwTI rate at which flaps can be extended.The synthesis algorithm is configured to decrease 0 b e l.ow its limit if that is necessary to satisfy these constraints.For simplicity the speed-altitude has been treated as a straight approach along the runway centerline.In the more general situation the distance from touchdown I.s the distance along a horizontal path composed of both turns and straight segments, for example, those in figure 5.The effect of the turns on the speed~altitude is small and is accounted for by approximately modifying the aircraft weight~as in equation (9).The technique described above generates an increasing (in backward time) energy-profile starting at the desired final and altitude.A complete synthesis of the descent trajectory rules for matching this profile to the initial speed and altitude of the aircraft.The freedom of the aircraft to maneuver in altitude is restricted by air traffic control as well as by passenger comfort considerations.Thus) as an aircraft a terminal area, it is not allowed to climb above its initial approach altitude for the purpose of the approach ec t.o ry .to the end of the initial turn.The turn may, of coursc$ be completed before the speed change, in which case the integration continues until V TA is achieved.The forward integration is followed by the backward-time tion from final conditions (hf ~the a and c , If the altitude reaches its target value of hi before the airspeed reaches its target value ~j s is set to unity ~forcing the angle to zero, and the energy rate is used for accelerating (in backward time) toward VTA~On the other hand, if the airspeed reaches its target value first, then c: is set to zero and the energy rate is used entirely for increasing altitude until hi is reached.When the target values of both airspeed and altitude have been achieved, 0 is set to zero, that iS 1 En = O.Let Sh be the total length of the horizontal path and let Sf and Sb be the distances of forward and backward 1 respectively.A valid trajectory has been generated if the cruise distance ,computed from(25 )is nonnegative~that is, if :::.O~If failed because the aircraft is too close Sc is negative, the to tbe capture point synthesis Pf • hos Figure 7 illustrates the various segments of an approach trajectory synthesized by the algorithm.As before, it is assumed for simplicity that En ~-0.13, a constant.Other parameters defining the problem are indicated in the figure.Note that the descent angle decreases from an initial value of _7.5°to -3.75°to allow the aircraft to decelerate.The reference controls for this trajectory can be interpolated from figure l~The dashed vertical li.nes in figure 5 indicate points where the flightpath angle, airspeed rateõ r heading rate change instantaneously, thereby calling for instantaneous in the reference controls.At each of these poi.nts, referred to as I1 c onm:ta nd points,H the information necessary to initialize the real-time torwar d integration in the track mode, which will be discussed in the next section, is stored in the "command t ab Le ;" The profile depicted in 7 is for an approach trajectory consi.s of a capture trajectory followed hy a single aegment of fixed flightpath from to touchdown.As was mentioned earlier, this fixed path can be adding a number of fixed waypoints, each having a specified speed and altitude.The speed and altitude profiles between adjacent are sized in fast-time using the same algorithm as for the capture ectoryo The is done in backwar-d time, starting at the final v.Tayand ending at the capture waypoint.The altitude and speed at N determine the initial condition and those at N -1 determine the final conditions, that .is , those to be c.values become those thesis contributes it allows the to without a cumbersome also minimizes the occurrence of failure-to-capture conditions, which pilots consider a nuisance.Of course, the pilot must be informed of actual speeds and altitudes achieved at the waypoints by the synthesis.
Lead DistancesSince the controls cannot change instantaneously, it is desirable to provide some warning of such impending changes in the track mode, discussed in the next section.Using the method of reference 7 and assuming that a control will change at its maximum rate, Iclmax' a lead distance is computed as kLC 6C VCR, • I IC ima xwhere ;\C is the desired instantaneous change in the control and VCR is the reference groundspeed, The lead distances are stored in the corunand tables for use at the appropriate command points.
Temperature CompensationIt is well kno~~that the performance of jet engines in terms of thrust vs rpm is strongly dependent on ambient temperature and barometric pressure.Mach number, while significant at high speed, is of secondary importance within the flight envelope of the AhTJSRA, It was noted earlier that the energy-rate diagrams are generated for two altitudes at different weights, thus under the implicit assumption of a known relati.onship between altitude, temperature, and pressure.The most commonly used relationship, the standard atmosphere, treats the absolute ambi.enttemperature as a linear function of the pressure altitude for altitudes as high as 36,000 ft, The actual ambient temperatures encountered at the flight-test site can usually be approximated by such a linear relationship although it may differ markedly from the standard value at a given pressure altitude.Since it is impossible to know in advance what the actual temperature profile will be~the system must be capable of account for temperature deviations from the value TS used in generating the energy-rate diagrams.This could be done by making temperature an additional parameter of the energy-rate tables; however t the amount of stored data would be doubled and the computation time would be substantially increased.An alternative , used he r e , Is to use the ener gy-irat.e da t a as though there were no temperature deviation and then to adjust the rererence power setting to compensate for the temperature difference.This approach is imated in the following because both hot and cold thrust can be approxlinear form:)where the subscript i refers to the next lower value of ir for which energyrate data are stored.Assuming negligible Mach number effects, 8 2 ~Tal To, where T a is the actual ambient temperature and To is the standard temperature at sea level.It can be seen from equation (26) that if each value of IT fs replaced by n* ~niTa/IS' the thrust and hence the remaining controls and En will be approximately the same as obtained from the energy-rate data when T a ~TS' One precaution required in the synthesis is to limit the value of such that n* will not exceed the allowable maximum.In addition, TS should be chosen so that it will never exceed the value of T a• This will prevent rr* from being les8 than the flight-idle value of 84%, which is a hardware constraint independent of temperature.
Temperature Profile EstLuationThe ambient temperature profile is estimated assuming a constant lapse rate between the runway and the cruise altitude.The runway temperature is entered by keybo ar d .The "cruf.se altitude" is t he current pressure altitude when the synthesis mode is engaged and the estinlated ambient temperature is calculated from the total air temperature measured by the STOLA.'IlDsystem.This model was satisfactory for conditions encountered in the flight tests} but several linear segments might be needed for a greater range of altitudes.
Wind Profile EstimationThe wind ma~~itude and heading at prescribed altitudes are stored in the computer.For flight tests the data were obtained by radar tracking of a weather balloon launched a few minutes prior to flight.Prior to the start of synthesis calculations the Cartesian components of the wind and their partial de r i.va t f.ves with respect to altitude are computed and stored.These data are subsequently used to compute the along-track component of the wind, the windshear term in En and the reference inertial and groundspeeds.
Computation TimeThe integration step size used in the synthesis is 1 sec during deceleration or acceleration, 2 sec.for descent and turns at constant speed, and a single step for segments or straight and level c ons t.an t-ispeed f Lf.ght..The entire synthesis on the STOLAND airborne computer requires about 2% of the time required for the aircraft to fly the same trajectory.The elasped (clock) time is about double this value because computation is carried out in far back-ground~that iS l in time left over from the autopilot and other of the basic STOL~~~D ThliS~of a trajectory that will be flow~in 6 min requires from 6 to 8 sec.
REAL-TIME TRAJECTORY GE.'!ERATION: TRACK MODEAfter a profile has been synthesized and the pilot has elected to fly it by engaging the track mode, the reference states and controls for that profile are generated in real time.If an onboard computer had sufficient memory capacity to store all of the reference states and controls during fast-time synthesis at sma11 intervals of time, this logic would not be required.However, limitations on the storage available in the STOLAND computer made this approach impractical.To minimize memory usage, a different method was implemented at the expense of increased complexity of computation.The method consists of storing reference trajectory data generated in the predictive mode at the "connnand points," as defined earlier.Between "command points" the reference trajectory is generated in real time by the same integration logic used during fast-time synthesis; however, the integration is now done entirely in forward time.Generation of a flyable reference trajectory that meets the desired boundary conditions is guaranteed because it is a precise repetition of a previously successful synthesis.The real-time fonvard integration uses distance along the ground track as the independent variable.This is accomplished by finding the vector distance s covered by the aircraft in a given small time interval.The projection of s along the reference horizontal path is used as the integration step size for the reference trajectory computation.The integrated or dependent variables are reference time, airspeed, altitude, and heading.The time error between the reference and actual, or "clock,ll time replaces the along-track error encountered with a time-based reference trajectory.The choice of distance rather than time as the independent variable gives a more flexible and operationally improved system.The reasons for this are as follows.In a distance-based reference trajectory system, the aircraft will track the reference airspeed and altitude regardless of winds as it flies along the ground track.It is not necessary to null time errors if time control is not required.The system can thus be operated either in a three-or a fourdimensional tracking mode, depending on whether the time-error loop is open or closed.This flexibility is lacking in a time-based reference trajectory system, where only the four-dimensioual tracking mode is possible.In the timebased system, if the actual winds differ significantly from the forecast winds used in fast-time trajectory synthesis, the aircraft controls may have insufficient authority to track the reference position; this results in unacceptable tracking characteristics.One difficulty with the distance-based reference trajectory is that distance along the trajectory does not necessarily increase monotonically with time.Large navigation errors can cause the new reference position to fall behind the previous one or to move ahead with a large step.This can result in control-system saturation during the critical descent and deceleration segments.The system therefore contains logic to limit the change in reference position during each integration step to the equivalent of 60% to 140% of the current reference groundspeed~1In order to reduce computation time, a major portion of the real-time reference trajectory computation is done in far~background$ using integration steps comparable to those used in the synthesis.The resulting variables, such as the reference controls~are computed and stored for a short interval ahead of the reference position.Only quantities required for the tion control law are computed in foreground, using small integration steps.The details of this procedure are discussed in the section on computer implementation.
PERTURBATION CONTROL LAWPerturbations of the aircraft states from the reference states are used in the control law to generate perturbation controls which are added to the reference controls in order to null errors in airspeed, altitude, and crosstrack position.The feedback states in the control law also include crosstrack error rate and flightpath angle as well as the integrals of airspeed and altitude errors.The latter two are used to reduce speed and altitude bias errors caused by inaccuracies in the stored energy-rate data and errors in the estimates of wind and temperature profilesT he controls are nozzle, pitch~roll angle, and power sett are not used as perturbation controls because of their relatively limit and an operational constraint that flap motion be monotonic approach.The flap command is simply the reference value at each position) limited to the placard value at the current airspeed.where ¢r is the reference roll angle, and y and yare the crosstrack error and error rate, respectively.The two gains were chosen to provide a welldamped responSE and control compatible with the noise characteristics of the navigation system.Longitudinal perturbation control for and altitude errors is difficult because the reference controls the energyrate schedule of 1 often lie on a constraint boundary and therefore cannot be freely in both directions.The two controls that ere often constraint-limited a fuel-conservative approach a r e power-IT) and nozzle ~v.
Someinto this can be obtained data from the energy-rate schedules.8 the last row of K is set to zero j since nozzle angle is not used for control.In regions II and III power setting perturbations are limited to positive values, and in region II nozzle perturbations are limited to positive values.In region IV each control moves freely, but negative power perturbations are limited to -2% rpm, as previously explained.Control limiting can reduce the effectiveness of integral feedback of speed and altitude.Some.design considerations for these integral feedback loops are.given in reference 9.The throttle and nozzle-angle perturbations generated by the control law will generally be of opposite sign, because the signs of the elements in the first row of K are opposite of the signs of the third-row elements.Thus, even in region II, where throttle and nozzle perturbations are each limited to move only in the positive direction, they are not generally limited simultaneously.This impli.esthat two controls~either throttle and pitch or nozzle and pitch, are free to move.Transient response studies using a nonlinear simulation of the aircraft and guidance system have shewn that the control power is adequate to prOVide rapid and well-damped airspeed and altitnde error responses in region II.
STRUCTURE AND OPERATION OF THE FLIGHT SYSTEMThe implementation of the flight system is based on two modes of operation.In the first mode, refe.rred to as the llpredictive ll mode, new trajectories are synthesized one after the other as rapidly as possible so long as the system is in the predictive mode.Upon completion of each the system checks to determine whether the pilot has called for the se.cond, or !!track,ll mode to be engaged.If such is the case the predictive mode is terminated"The most trajectory is in real time and tracked in real time the closed-loop law.is shown in the mode-select } the solid line on the multifunctional as a the f~qctional units of the the system The ure 9.When the fixed horizontal display (MFD).This display operates in conjunction with the navigation system to give a map-like view of the terminal area (see ref. 1 for details on this device), A triangular symbol indicating the aircraft position and heading appears on the display when a valid navigation mode has been se I.ec t ed .Next, the pilot selects the capture waypoint by keyboard entry.Then computations begin in the fast-time trajectory synthesis module.If a trajectory is successfully synthesized, it is stored at cownand points, as previously explained, and the horizontal capture path is displayed as a dashed line.Although the capture-trajectory algorithm synthesizes successful trajectories for a wide range of initial conditions, there are conditions where it will fail to do so.For example.if Pi in figure 5 is very close to the capture waypoint Pf. then the algorithm can fail because there is insufficient distance along the computed minimum distance path to complete the required change in speed or altitude or both.In that case, the reason for the failure to synthesize is displayed as a short message on the MFD.The pilot can correct the failure-to-capture condition by flying the aircraft away from the capture waypoint or by selecting a more distant capture waypoint.The track drawn as a dashed line from Pi to waypo i n t: 3 indicates to the pilot that a valid capture trajectory has been computed and that the track swi t c h is armed.If the synthesis is not successful or if the track mode is not engaged the routine is reentered, as shown in figure 9, with updated aircraft states as the neW initial conditions.The speed-altitude profile is computed for both the fixed and capture portions of the trajectory until a successful synthesis has been achieved.Then the reference states at the capture \Vaypoint are stored and (only) the capture trajectory is resynthesized continuously as the aircraft moves.If the capture waypoint i.s changed, the speed-altitude profile synthesis is reinitialized including the fixed portion of the trajectory.Aircraft weight, runway temperature, the estimated wind profile, and the coordinates and speeds of the fixed waypoints may also be changed hy keyboard entry, but the synthesis mode must be disengaged to make those changes.To account for the distance the aircraft will travel \Vhi1e the trajectory is being syn t he s i.z ed, the capture ectory is actually computed from a point) P2 in figure 10, projected 15 sec ahead of the aircraft under the assumption that the aircraft will maintain straight constant-speed flight during that interval.If the aircraft actually maintains those conditions the initial errors \ViII be small when of the reference trajectory begins~and ample lead \ViII be provided on the reference bank angle for initial turns.(Flight experience has indicated that it would be useful to allow for capture from turns.In that case the predicted flightpath from to P2 would ro110\-J the circular arc defined the Ln.i t.La L aircraft statc s , )Tracking of a synthesized a switch~the system to enter ence states and controls for the is initiated when the the track mode.In this mode ectory are engages the refert he technique of real-time integration, which was described in a previous section.At the same time the capture trajectory is frozen and changed to a solid line on the multifunction display (fig.10).The perturbation control law is activated, thus initiating closed-loop tracking of the trajectory.
CONCLUDING REMARKSThe guidance system described in this paper uses the technique of fasttime onboard trajectory synthesis to provide fully automatic flight capability and near-optimal fuel conservation.This technique overcomes the performance limitations inherent in a stored, precalculated trajectory by adapting the trajectory to the unique conditions encountered in each landing approach.The ability to adapt is crucial in terminal-area operations because the initial conditions for the approach and the wind and temperature profiles are not predictable with sufficient accuracy prior to takeoff.The implementation of the algorithm on an airborne computer and subsequent flight tests have showt hat the design technique described here is practical.Furthermore, the software structure developed here for a complex STOL aircraft can be adapted, with several simplifications, to conventional aircraft.Finally, the automatic control law could be replaced with a flight-director system to allow the synthesized trajectories to be flown manually.
APPENDIX AIRBORNE CONPUTER IMPLR'lENTATION
Background ComputationsHost of the computation required for the fuel-conservative guidance system is carried out in far-background, that is, during the portion of each SO-msec computation cycle not required for the remainder of the onboard system.The tasks performed in far-background are the horizontal fIightpath synthesis, speed-ca Lt.Ltude profile synthesis, and a or portion of the real-time reference trajectory generation.The following sections discuss these tasks in terms of the subroutines that perform them.In addition, it is convenient to include.that portion of the real-time reference trajectory generation done in foreground because of its close relationship to the background computations.The background executive) DTG4D~controls the computations in farbackground, as shewn by the f Low chart in figure 11; the various flags s hown in the chart are defined i.n table 1. Hhen DTG4D is first entered, the capture waypoint is set to zero and f are set to indicate that the estimated wind and temperature profiles must be recomputed.Note that these and other flags used in background may be chduged in foreground as the result of keyboard entries.Appropriate interlocks prevent keyboard entries that would disrupt calculations in progress.Subroutine ~"rPBGND calls subroutine TWOD to synthesize the fixed 2D path and loads the data required for tbe cockpit display.Initially WAYCAL is nonzero and It is set to zero at the end of tiPDGND.If a waypoint is changed by keyboard entry WAYCAL is set nonzero.Logic in the keyboard entry routines prevents the waypoints from being changed if REFP :f 0, that is, if synthesis of the two-dimensional capture trajectory and the speedã ltitude profiles are called for.If IFIX is zero, the speed-altitude profile is synthesized for both the fi.xed and capture portions of the horizontal trajectory.When a successful synthesis has been completed the states at the capture waypoint are stored and IFIX is set to 1. Then the Le is synthesized only over the capture trajectory.If fails} NOCAP is set to tndicate the variable ( o r is not attaining its target value and the synthesis is If NOCAP "'" 0 the real-time reference and HOm~AV is checked to see whether the the track mode, NONTRJ is called chart, unless the track mode is disengaged or (an un Lt.ke l.y event), generation is initialized has engaged the track mode.In in the final in the £10'1-1an error condition is encountered
Horizontal Fllghtpath SynthesisThe fixed and capture portions of the horizontal path are synthesized in separate operations as noted in the discussion of DT4GD.However, the bulk of the computation for either portion is done by subroutine NEWPSI.The basic function of NEWPSI is to solve the capture problem as defined in the text.The algorithm used is developed and the computer implementation is described in detail in reference 2. The inputs to NEWPSI are the Cartesian coordinates and heading angles at the initial and final points and the turning radii for the initial and final turns.The outputs are the coordinates of the end of the initial turn and beginning of the final turn, the heading of the straight segment between the turns, and the angles and arc lengths turned through.The fixed horizontal path is treated as a aequence of degenerate capture problems.Subroutine TWOD calls NEWPSI to synthesize the horizontal track between successive pairs of waypoints starting at the final waypoint and working backward to the initial input waypoint.This operation is carried out only when the STOL&~D system is first activated or when an input waypoint is altered.The horizontal eapture path is controlled by subroutine TST.TST uses the estimated wind profile, the current airspeed of the aircraft, the nominal aIrspeed at the capture waypoint, and a specified value of bank angle to determine the turning radii used in the synthesis; then the input variables are set to the appropriate values and NEWPSI is called.After each call to NEWPSI during the synthesis of either the fixed or capture horizontal path, the necessary input and output variables are stored as described in the following section on the speed-altitude profile synthesis.
Speed-Altitude Profile SynthesisThe speed-altitude profile synthesis is carried out by three major subroutines, VHTSYN, INTEG, and STPINT, plus a number of auxiliary subroutines which will be discussed as needed.An explanation of the data structure is given first followed by a discussion of the operation of the major subroutines.It is assumed that the horizontal path has already been synthesized as discussed earlier.The fixed portion is specified by NwT prestored waypoints, which are indicated on the pilot's display by a symbol and associated nuniliers from 1 through Nw~.The pilot may select any of the fixed waypoints as the capture waypoint by entering the number associated with it through the keyboard.The actual waypoint nrnnbers are greater by 2 than those on the display to allow waypoints I and 2 to be used for specifying the capture trajectory.Thus the capture waypoint number CURWPT is 2 greater than the number entered by the pilot.Waypoint 2 is defined as the end of the final turn in the capture trajectory and is therefore identical with the capture waypointp oint 1 is a special case and will be discussed later.The total number of Note that the sequence of on the horizontal track is + 2 -CU:R"IPT numbers is discontinuous at CDR\~T.For example, I.f CURWPT ::::: 5 the sequence is 1, 2, 5, 6 . .., NWP + 2. The horizontal trac.k is specified by a set of colunm vectors each having one element per waypoint.These elements are defined to the convention used in reference 7 as illustrated in sketch a. Associated with waypoint I is the straight line distance Dcr) from(1-1) to the point XP(I), YP(I).That point is at the of a turn -----f-l.RC LENGTH "" DELD( IiBetween waypoints (I-I) and I, speed and altitude may be initiated in addition to the turn ~as ehown in sketch b.These indicated by n s t e.r Lska in the sketch, wher-e in speed ~altitude or heading are initiated, are referred to as command The waypo Lnt; is also a command point} and thus there \vi1.1 be from one to four command po In r s for each waypoint.The special case of I is illustrated in sketch c.The initial a f.r c t-af t position is predicted ahead l S sec~a s sumtng straight, level constantspeed flight to [XP(l)~YP(l)] where the turn and change, if necessary, are initiated.The altitude is held constant.1 is located at the end of the turn or when the desired ~is attained .• whichever comes ] sst.During the real-time forward generation of the profiles, the control of the aircraft to the reference trajectory can be improved by introducing impending changes in the reference controls some distance ahead of the command point as shown in sketch d.Here the reference trajectory begins to descend at point A; the new reference pitch and throttle commands will be introduced to the control system at point B, and the distance from A to B is referred to as the lead distance.that is four times the number of waypoints, or one row for each command point.The various entries in the TeOM array will be explained subsequently.VHTSYN acts as an executive for the profile synthesis, calling INTEG to synthesize the profiles between successive pairs of waypoints.INTEG in turn calls STPINT, which uSes the energy-rate tables to compute the derivatives neeessary for each integration step.The input variables for INTEG and the data loaded into them at waypoint T for integration forward to waypoint (T + 1) or backward to waypoint (I -1) are summarized in table 2. Note that for 1=1 the values of ZWP(I), VA (1), and H(I) arc those of the aircraft alti-tude~equivalent airspeed, and heading.The output data from INTEG for each of the four command points are stored in a row of the transfer array TXFR, which has 16 columns whose elements are defined in table 3, and IXFR and KXFR, which are one-dimensional.Each row of TXFR is transferred into a row of TeOM.The transfer arrays are set to zero at the beginning of INTEG so that any unused rows will contain zero upon return to VHTSYN.
IVH and KCOR are f,defined stored in IXFR and KXFR, respec in the discussion of The f Lowc har t; in the operation of VHTSYN.First, the input data for waypoint 1 (the start of the first turn in the c.apture trajectory) are loaded according to table 2, andINTBWS 0 KSTOLS ~0 ALTO ~ALTS VIASN ~VTAINTEG is called, and special logic in INTEG inserts into the first row of the transfer arrays the starting conditions for the straight constant-speed prediction of the aircraft motion ahead to provide time for the synthesis calculations.Then, the forward integration continues until the first turn has been completed and the desired speed achieved.Since for waypoint 1, there may be a segment of straight (changing speed) flight after the turn, that waypoint cannot be completely defined until the forward integration has been completed.The data from the forward integration are stored in the first four r ows of TCOH" IXFR, and lCXFR, the lead distances being shifted for compatibility with the results of the backward integration.Next, the backward integration from the final waypoint (waypoint number NWP on the pilot's display and NWP + 2 in the computer) to waypoint 1 is initiated, and the data are stored in TCOM, lVHT, and KCORT from the bottom up.The waypoint number is stored in corresponding rows of IWPTT.The sign of the first colwnn of TeOM (time) must be reversed iuthis case.If a complete synthesis has already been done, the integration starts at the capture waypoint\ \Then waypoint 1 is reached~the altitude and speed are compared with the target values; if they are not equc11 an error return results.If there is no error, the first two columns are summed b ackward from the final waypoint [TCOH(l, 1) ~TCOH(l, 1) + TCOH(I -1,1), e t c .] to eonvert them to time and distance-to-go to the final waypoint.The lead distances in columns 13-16 are converted to distance-to-go by adding the corresponding values from column 2. Finally, other adjustments to the data are made to improve the reference control motions when the distances between command points are small.I t 'will be noted that since not every waypoint will have four command points, many of the rows of TCOM contain no useful data.However, the retention of this form makes it possible to resynthesize the profile backward in time, using a background computation~while the aircraft is flying along a reference trajectory being generated in real time from the results of the previous synthesis.This capability is desirable for adding time-control capability to the system.It must be remembered that the data stored at each conunand point are to be used to initialize the integration in the forward direction and to provide the lead distance needed to compensate for instantaneous changes in the controls at the command point.Sketch e illustrates the operation of INTEG in the forward direction.Between command points a fixed time interval is used as the integration step, except for the last step in the segment, which is adjusted to give the exact distance to the next command point.At each integration step, the bank angle is computed and then STPINT is called to compute the reference controls and the time derivatives of airspeed and altitude.These derivatives and the groundspeed are used in a rectangular integration to increment airspeed, altitude, and along-track distance.Just prior to comnllind point N the values of the controls ~,n, of' and v = 9.At the command point the parameters controlchanged and STPINT is called.The new and saved compute the lead distances.For backward integration, the order of storing the controls and computing lead distances is reversed, as shown in sketch f.This means that for the new controls stored in row N + 1 of TCOM the lead distances are stored in row N. Note that in VHTSYN the lead distances computed in the forward integration are shifted up one row in TCOM to correspond to the results from backward integration.COMMAND POINT N I *1 Sketch f.The preceding discussion dealt with the transition between two command points whose locations were assumed for simplicity to be known .The complete synthesis between two waypoints, including the location of the command points, is explained for the bacbvard integration using figure 13.The case iilustrated requires a turn as well as changes in speed and heading.After each call to STPINT the resulting changes in , altitude, and distance are tested to see whether the target values of speed~altitude, as arc length), or distance (the next waypoint) will be accomplished within the next step.If such is the case ~the step is adjusted to the exact required and the variables are stored in the transfer arrays.If a speed or altitude change has been completed, the value of speed or altitude stored is set equal to the target value.Similarly, the distance at the end of a turn or the end of a waypoint is also set to the target value.This procedure eliminates such numerical errors as may arise during the integration.The forward integration operates in essentially the same manner except for some special logic to account for the path between the aircraft and its predicted position discussed earlier.If the integer KSTOLS is set to zero the mlnlmum value of En is constrained (in STPINT) to its value on the 84%-power contour.During the synthesis of the profiles between two waypoints, if the final speed for forward integration or initial speed for backward integration is greater than VIASTS (defined as the speed at which the 5.6 c -f l a p and 84%-power contours intersect), KSTOLS is set to zero.The integer KNTRJ is set to zero during synthesis, causing the calculation of the angle of attack in STPINT to be bypassed in order to reduce computation time.The variables DALT and DEV are the energy changes between the two waypoints due to change in altitude and airspeed, respectively.If they are of the same sign, VADTG and SINGfu~are computed in STPINT to have the maximum magnitudes consistent with the various limits.If DACT and DEV are of opposite sign, one of them must exceed, in magnitude, the total energy change DEE, and a transfer between kinetic and potential energy is required.If !DEV! > IDALTI then VADTG is set to its maximum allowable magnitude and SINGA}! is chosen so that the changes in altitude and apeed take place in the same time interval.CEPS is set to DALT/DEV; SINCfu~, VADTG, and En will be held constant in STPINT.STPINT uses the energy-rate tables to compute the derivatives and control settings to be used in INTEG.In order to explain the interpolation process it is useful to assume that each of the data storage points, indicated by circles in figure 1, represents an element (i, j) in a 6 x 7 array.There are six of these arrays, one each for equivalent airspeed, normalized energy rate, angle of attack, nozzle angle, power setting, and flap deflection.The arrays of the first three quantities plus a 4 x 1 array of nozzle angles are stored for each of the four combinations of weight and altitude.The elements of the remaining three arrays are known implicitly from the data structure, as shown in figure 14.Note that the arrays in the figure are simply a device used for explanation; they are not actual sets of stored data.The first four rows of the power-setting array in figure 14(a) are constant-power contours, and the last two rolls call for the minimum allowable power.The maximum allowable power, TH~u\X, is a function of temperature and must be computed as needed.Figure 14(b) shows the required flap settings.The quant F; Ls defined as the minimum of the placard setting, or 65°, and F is the iinimum of the placard setting, or 45°.The nozzle angle show~in figure Sec) is at its minimum value except for column 1, rows 1 through 4, and row 5, colQmns 1 through 4~which are set to stored values; and row 6, which is at the maximum value of 100 0
•The first operation carried out in STPINT is the linear interpoiation of the airspeed array over weight and altitude.The interpolated array, TVAV, contains the seventh column, with ali the elements set at 160 knots.The airspeed interpolation is carried out by calculating a set of interpolation coefficients, one for each flight condition.Then each element of the interpolated array is the sum of the four corresponding elements in the stored arrays, each multiplied by the appropriate c oef f Lc Len t .Note that by definition column 7 corresponds to the maximum equivalent hirspeed of 160 knots, so that only the first six columns of the four airspeed arrays are stored.The 4 x 1 nozzle array is also interpolated in this operation.Once the interpolated airspeed array has been calculated it is used to carry out a simultaneous interpolation with respect to airspeed, weight, and altitude for the other five variables of interest.This interpolation proceeds one row at a time as follows: first the row is searched to find the airspeeds bracketing the current value, and two airspeed interpolation coefficients are calculated.Next, the elements of the flap, throttle, and nozzle arrays corresponding to the bracketing speeds are calculated and interpolated with respect to speed.This procedure is equivalent to drawing a vertical line on the energy-rate diagran: and finding the values of the variables at the points of intersection with the horizontal cOntours defined by the rows of the arrays in figure 4. The constant flap contours described by columns 2 through 5 in figure S(b) are not vertical, so that the constant airspeed line may also intersect them.These intersections are located by searching the c o l.umns for bracketing airspeeds in adjacent rows, and using linear interpolation as before.The vaiues of En and a for the bracketing speeds are interpolated over weight and altitude using the coefficients computed earlier and then over speed.The results of this operation are interpolated values of En' V S' Ofj IT, and u, stored in the columns of the 5 x n array, TeV, which will have from three to nine rows, depending on the flight condition~For example, if a vertical line is drawn at the 70-knot point in figure 1, only 3 rows of data would be stored in TCV corresponding to the intorsection of the vertical line with the control contours.The average computation time required for one pass through STPINT on the airborne computer is 20 msec.This indicates that a major portion of the computation time for both synthesis and real-time reference generation is used in this subroutine.The remainder of STPINT determines tbe output values ED TVA , SINGAM, and VADTG (of En' sin Ya' and Va ' respecrively) and the associated control in conformance with the inputs agd constraints.The significant operations performed are itemized below: 5.If 6 f > 30°, limit IVADTGI < 0.05 6.If KSTOL = 0, limit W~~En on 84%-power contour 7. If EDTVA exceeds limits, adjust RR and start over at (1)   8.If VADTG or SINGA}!exceeds limits, adjust EPS and return to (1)9. Compute controls from TCV array using linear interpolation 10.RETURN
Real-Time Reference Trajectory GenerationTo f]~the aircraft along the reference trajectory, the reference states must be generated in real-time in the forward direction at time intervals small enough (0.1 sec was used) for proper functioning of the perturbation control system.The computations are done, as stated earlier, partly in far background and partly in foreground.Subroutine NOMTRJ generates the set of variables defined in table 7 and stores them for later use in foreground by subroutine NOMTR2.NOMTRJ computes the same reference states and controls computed by INTEG during the syntheses by performing the same operations as in INTEG.In this case, however, the integration always proceeds forward in time, and the type of flight and length of segments between command points are determined from the command tables.The integration step sizes are 1 sec during speed changes and 2 sec at all other times.The step sizes used in NOMTRJ and INTEG differ only in that the latter uses a single step to cover segments of straight, level, and constant-speed flight.When the track mode is engaged, the variables in NOMTRJ are initialized to the values in the first row of TCOM.STPINT is called and all of the variables except DNM defined in table 7 are stored (in the same order as shown in table 7) in the first column of a 15 x 6 array, RDERIV.Then the integration is carried forward one step and DNM is decreased by the distance covered In the integration step and stored in RDERIV.As the integration proceeds, the variables at the beginning of each integration step are stored in RDERIV in this fashion.At the end of a segment between command points, the step size is adjusted to the exact value required to reach the command point.When data at a command point are stored in a column of RDERIV, the corresponding element of the 6 x 1 array KDERIV is set to 1, otherwise it is set to zero.NOMTR2 uses distance along the reference horizontal path as the independent variable and computes the reference time, ground heading, air8peed~and Cartesian components of position and ground velocity.The speed, heading~and components of position are initialized at those of the aircraft at the beginning of the synthesis (that is, at PI in fig.10).The remaining variables are initialized at the values in the first column in RDERIV.The computation of the reference states then proceeds, using a step size roughly equivalent to 0.1 sec.The integration step size, as discussed earlier, is nominally the along-track distance between the reference position and the aircraft position as determined hy the navigation system.At the beginning of the reference trajectory computation the first integration step size will therefore be equal to the along-track-distance covered during the synthesis computations.The restrictions on the rate of change of reference position mentioned earlier are not applied in this case and the changes in reference time and the reference states due to travel along the predicted flightpath during the synthesis computations are accounted for.The integration in NOMTR2 then proceeds, using a step size corresponding roughly to 0.1 sec, under the assumption that all of the variables in table 7, except the speeds, remain constant.When the next integration step would move the reference position beyond the next point for which data are stored in RDERIV, the step size is set to the exact value needed to reach that point.Then the variables are set to the values in RDERIV.If the corresponding element of KDERIV is nonzero, indicating a command point, the reference altitude, airspeed, and time are set to the values in the new row of TCON; if KCOR Indicates the beginning or end of a turn or a new waypoint, the X and Y coordinates, heading angle, and turning radius are reset to the appropriate values from the arrays defined in the section on the speed-altitude profile synthesis.This correction process has been generally successful in keeping computation errors small.The intersection between NONTRJ and NONTR2 is best understood wIth the aid of the simplified flowchart sho~~in figure 12.After each integration step in NONTRJ the variables are stored in a column of RDERIV and the computations are carri.edout so that the variables are stored for several seconds ahead of current time.As the real-time i.ntegration in NOMTR2 proceeds from one column of RDERIV to the next, new values must be computed by NONTRJ to replace the old values that have beeu used.The logic for this procedure is as follows: the number of the column to be computed next is IC, and lU is the nwuber of the column to be used next.The integer KINT is nonzero if there are no columns in RDERIV to be computed, in which case NOHTRJ is bypassed.Initially KINT = 0 and IC = lU = 1.The first column of RDERIV is computed and Ie is set to 2. Next, the first column of RDERIV is used and a D.l-sec integration step is made.8.The operation of the subroutine is explained with the aid of the simplified flowchart shown in figure 15.At the start of the real-time trajectory generation the error feedback quantities are initialized at zero.The first operation performed in CNTRL is the computation of the speed and altitude errors, the flap conunand, roll corrunand, and temporary values for the nozzle and throttle commands.The latter are the solutions of rows 1 and 3, respectively, in equation (31).The flap command is the smaller of the reference value and the placard value at the current airspeed obtained from the navigation system; the roll command is given by equation ( 27).Next the minimum value of the power setting, l~L, including perturbation controls, is computed.For reference flap settings of 45°or more, THL = max (89.5%, TRACR -2.0%).If the temporary power setting, THTMP, is less than THL it is set equal to THL, and PFT is the fraction of the desired perturbation from the reference power setting that is actually achieved, that is, PFT = THL -THTMP)!TRACR -THTMP).The temporary nozzle perturbation is multiplied by (l -PFT), that is, by the fraction of the desired change in power setting that is not achievable.In the case in which the temporary power setting is greater than or equal to THL, PPT is set to zero, and the temporary nozzle command is usually less than the reference value.If the reference nozzle is 45°or greater, the temporary nozzle con~and is set to the greater of its computed value or 45°, but if the reference value is less than 45°the temporary nozzle command is set equal to the reference value.These restrictions are necessary to prevent violation of the maneuver margin.Next~the nozzle and throttle commands are set equal to the temporary values and limited between the prescribed maximum and minimum values.The perturbation in pitch angle is computed from row 2 of equation (31) and multiplied by (l + 0.6 PFT).This multiplying factor and the values used for PFT are the result of the linearized analysis and simulation aud flight tests.After the control commands have been computed, a new set of aircraft states is obtained from the navigation system; this occurs regularly at O.I-sec intervals.The integrals of the speed and altitude errors are incremented subject to limits on their magnitude.Experience dictated setting the limits on both error integrals at that value which would call for a change of 2% rpm in power setting" Next, the along-track position deviation~DXAT, and the crosstrack position, error, and error rate are computed, and the integration distance step DED to be used in NOMTR2 is set equal to DXAT.If RCOM = 1, indicating the initial straight, level constant-speed segment of flight at the beginning of the capture trajectory, DED is restricted to positive values.That is~if the aircraft is ahead of the reference position (the normal initial condition)J the reference position is immediately advanced to the alongtrack aircraft position.If the aircraft is behind the reference position, the latter is held fixed until the aircraft catches up.After the first segment or the capture eetory} DED is constrained to be within ±40% of the distance covered in 0.1 sec at the reference groundspeed.This restriction, as mentioned earlier, is used to prevent excessive control action due to sudden large changes in the estimated aircraft states.In case of severe errors, this restriction allows large along-track errors to develop, and the pilots must be warned.Before CNTRL is entered again, NOMTR2 is called and the reference states are updated.
2.3.
4.
5.Changingaircraft mass~slugs distance along ground track speed along ground track, ft/aec distance of backward and forward integration, respectively cruise distance, ft length of ground track from initial to final position of aircraft J ft ft/sec or knots final and initial airspeeds of aircraft, respectively, it/sec or knots reference groundspeed, it/sec nominal V EQ for terminal area wind speed, knots component of wind along reference horizontal track (aIrcraft weight)/cos 9, lb final and initial x coordinates of aircraft, respectively, ft perturbation state vector final and initial y coordinates of aircraft, respectively, ft crosstrack error, ft crosstrack error rate, ft/sec angle of attack, deg aerodynamic flightpath angle, rad or deg inertial ilightpath angle, deg flap angle, deg maximum flap angle, deg fraction of energy rate used for changing speed cO~uand pitch angle, deg vectored thrust, in degrees of nozzle angle power setting, in percent fraction of available energy rate bank anglec ommanded and reference bank vi Lve Iy 1 deg
+ L] cos 1 ;1~mg cos Y:.1ill (\7.,)
) ~(18) ~and (1 for choices of c and c.It will be recalled that to be zero in the generation term ar e accounted for the wf nd-vs he a r term in of the energy-rate tables( 15) as (II) wa s assumed The effects of that It is assumed that the only the altitude and that from the chain rule and direction of the wind are functions of the vertical component of the wind is zero.Then and substituting for h
1 ,1O.S} and 0.0" The far imate the minimum-fuel descent, that for s = 0 noise descent, and the for s ~.5 is a noise minimization.. thereby fol-However, for the
apt uned , in the backwaz d-ct Ime It along the fixed ecthe target value and the new target This choice of the syn-For example] angle 'between coordinates of the the mf.rriraum in the X, Y a smooth and versatile to of the altitude fails to reach ~the values attained are at the next If tory either at a
Flapsis essentially uncoupled from the Loug Lt «> dlnal mode and is accompliahed through a roll-angle connnand to the rollcommand autopilot.This cotlh"11and is of the form(2
Figure 1010Figure 10 gives an example of trajectories displayed on the MFD.The solidly d r awn track is the fixed or prestored reference trajectory on which waypoint numbers are indicated.The pilot has selected waypoint 3 as the capture waypo Lnt .The track drawn as a dashed line from Pi to waypo i n t: 3 indi-
~YQ(I), whi c h is by definition the same as the waypoint coordinates) XwT( ,YWP(I).The arc length of the turn is DELD(I) """ ReI) TURi\J(I), and TURL'I(I) is positive c Loc kci.se , In addition to these quantities the nominal equivalent ) VA(1) , and nominal altitude~-ZWP(I), at each are needed for the profile synthesis.Note t ha t the (X, Y) coordinates are not used iuthe p r of i.I.e synthesis but a r e needed to generate the complete ectory in real time, and that the capture waypoint and XQ(2), YQ(2) lire the same R{!) TUR~v(ll-~; WAYPOINT I I !XQ(l), Van}] J Sketch a.
The end product of the synthesis is a two-dimensional array, TeOM (IMx~X,16) referred to as the command table, and three integer column vectors IWPTT, IVHT, and KCORT.The dImension of the column vectors is equal to the number of rows~IMlLX, in TeOM, where Sketch d.IHAX 4(NWP -CUR~~T + 2) ,
1)~where the plus-or-minus gration.The input and output variables called INTEG, are defined in tables 4 internal variables and that are of I and to forward or backward intefor STPINT, the or subroutine and 5; table 6 defines a number of are saved, for example, ¢z ing the type of flight are control values are used to
If the point corresponding to the next column of RDERIV is not reached, IV does not change.The integer IDL denotes the nlli~ her of columns of RDERIV that contain data usable in the future.The logic operates to maintain 2 ~IDL ~50 If as a result of insufficient background time IDL = 0, an error return results.However, this situation has not been encountered in flight or in simulation tests.Foreground Computation A portion real-time computation is of the foreground computation was discussed Nost of the remainder or done in subroutine CNTRL.The variables of in the section on the interest are listed in table
Upper limit on SINCfu~, sin (YA) Lower limit on SINCfuẼ
Figure 1 .Figure 20 -120Figure 1.-Energyrate diagram for STOt aircraft; WM 38.000 lb, sea level 59" F.
Figure . 3 "3Figure .3"'-Angle of attack for SIOL aircraft energy-rate d Lagram,
Figure 4 .4Figure 4.-Energy-rate diagrams.
Figure 4 Figure 5 .45Figure 4.-Concluded.
Figure 7 .Figure 10710Figure 6.-Effect of
Figure 13.-Backward integration for speed-altitude profile synthesis.
At a particular airs~eed with the power fixed at its minimum, more negative values of En may be obtained by increasing v, j or both beyondangle-af-attack contour coincides with the maxim~~-power contour until thethe values obtaiJ;;led from latter intersects the JOo-flap contour. As speed increases beyond that pointt (1 Since the values and \! for agiven value of En are notand fuelcannotreduced fur-ther, a different criterion is needed for selectingand \)0 The criterionchosen is minimization of noise. Because noise under the aircraft is known toincrease as the nozzles producing the vectored thrust are turned downward, adecrease in energy rate beyond the minimum value from equation (12) is achievedby increasing theto its limit, orv a Lue , before the nozzleangle is increasedThe result of applying theseto the AIUSRc" is ebovn in f Lgu're 1for a weight of 38,000 10) sea-level altitude, and standard temperature. Thefigure gives the envelope of energy rate VBs wLththrottle, flaps~and vectoringas parameters. Each of the small cir-cles indicates values of VEQ andthat are stored in the onboard computeralong with the corresponding values of v, Of) and a. To avoidthefigure) angle ofis nor plotted; it will be discussedAtany airspeed, theand El\nin curves define the range ofLeenergy rates. The optimt~controlsand energy rate aredetermined by interpolation be tweenof constant controls. Forexample, at an airspeed of 105 knots~O.17) thecontrols arcfound to be Of -:;; 26°~v := 6°J andA, fig. 1);of attack(not shown) is 9.4°. Maximum energy rate with minimum thrust occurs at112 knots (point B) andtola,I t should be noted that thecontrols in thisSTOL ai.rcraft have unusual characteristics that account for the relative com-Q below about 80 knots. The • In 1. Throttle affects both lift and at all but addition, a lift or where plexity of f max reserve normal force Lucrease in angle of for attack the effect on lift is greatest in the ST01. margin is required to guar an t.ee sufficient the flightpath thrust magnitude the nozzle, referred to as the hot emergencies) by an alone" thrust, is also controlled the throttle and accounts for about: 60% of the This constraint takes the form total thrust produced the 40% of the thrust,whi.ch is the cold thrustthe augmentorto increase lift at STOL(14)Theb e tween the controlsand the energy rate is revealedPilots familiar with the test aircraft more clearly in at thethat I,D be at least of 105 hnots.0.4 for Of ~30 plots at variousQand 0.69 for Of = would be5.6°, the minimum flap deflection. As to illustrate thea result of pilot comments after dence of the controls on energy rate. As flight tests, the minimum value of /m the energy rate decreases b eLow itswas increased to 0.5. maximum value of O.28~throttle decreasesuntil idle throttleis reached.In this interval~fincreasewlri Le nozzleThe use of remains at minimum and(1,2) converts the of attack increases.from one ofthe ner-gyminimum power setting for a rates, become the dominant control until energy rateto one of finding the maximum va Lueofenergy rate for a 40°at thispowe rThe of attack decreasesis found as ffixed and increases", the angle of attack increases r oward its maxamum value 0.;:: and 'J to maximize z, ~nozzle100°elisted to as the energy rate decreases toward its the constraint(l limit of --0.3.The minimume.nergy rate attainable fromthe maximum energy rate attain-able with minimum power of values The, thegreater of for the to the data inmf.nfmum power 1\ISto sal:theHowever) energy rates 3. The TI~ximum nozzlethan those attainable from contour is also the contour of m.LnLmum G. At low more(12) are also of interest. the me x.Imum
table 124124words of memory in the
The aircraft must hold this altitude until the final de sc errt .Howev e r , wh.i Le ing at altitude hi' it may to a new called the terminalarea speed; VIA can be or lower unit distance, and is 1/.tO knots for this aircraft (it would be 220 to 250 knots for conventional jetVi ~Unlessspecified by theThe variousrulescontained inthebecombined. tothe\'7i ththe forwardfrom theinitialand altitude. IfVi andare not) c is set toachieved, afterwhicho and s are set to zero and theat constantvia ~i t is chosen to minimize fuel use per
6shows the energy-rate from 1, with the minimum reference nozzle and minimum reference throttle constraint boundaries~These boundaries divide the envelope into four I} in which v cannot be II~in which neither T' nor v can be reduced; III f in which n cannot be reduced; and IV) in wru.cn ' IT and '0 are free to move in either direction, The combinations of Lties ar(~t ions from reference values, that 18$ etc., "Vlhe.reare the a i rc r af t and reference true 'I'he cOTIunanded controls are the sum of reference and that the closed-loop eigenvalues of this system have damping factors of 0.707 or greater and real parts less than -O.OS/sec at all operating points.These characteristics provide adequate tracking performance.When operating in region I of figurecontrols available for -40 cated in the figure. Note that in -40 -8 -4 cos v r t Lona L control variable for V a r V a r V a rEn in <each could be used as an addi-are Lud L-However~this variable is -0.6 V a rnot used because throttle and errors in this region, In idle and is determined by the maneuver 0 -0.4 -14 K V ar oin (31) throttle is above control of constraint. At each -0.2 V a rthis region the negative throttle cnce power setting to yield the commanded reasons. Positive and power 3 2 0.6 0.3settthat c.an be added to the refer-is limited to ~2% for are further limited so Of { 0.5 max 0,that the commanded power~cfalls within the enginerange,34/:, :::: iT ::: 96%. where V a r is in units of ft/sec.Extensive computer calculations have veri-The longitudinaland the perturbation control lawcan be wr-Lt t en in state vector notation asFx + Gu(28)u ~Kx(2xi~h }d t ,u++Tlift STOL a ir-c ra fr , such as the one used for these flight tests}and G areand energy rate andwou.ldmat rI c e s that are also functions of theis n e Lt.he.rnor necessary tomatrix in orde r to achievein this case.first computat va r Lous ope-rat'in the controld,n"rmnvaLue s of It and cTheof thesematrices showed'ron ges t., reference nozzle~and referenceSensitivity of thetoin several ofthose to be s e t to zero or held constantIt was) nozzle a"6'Gt andThis method resulted in thematrix:[ 7 . ,Ified
EDTVA = RR*(EDTVAmax or EDTVAmin) unless CEPS i 0 4b.CEPS i 0 (speed and altitude changing in opposite directions), in which case EDTVA is computed from input VADTG and SINGAM4a.1. If theestimated ambient temperature is greater than that used incomputing thetables, limit EDIVA so that'iT:::;20 Correct limirs on EDIVA for wind shear and bank3. Set limits on EDTVA to use onlyor onlyvalues
TABLE 2 .2-INPUT DATA FOR INTEG
TABLE 55.-OUTPUT VARIABLES FROM STPINTVariableDefinitionALPHAAngle of attackENUACNozzle angleFACFlap deflectionSINGAMSine of aerodynamic flightpath angleTHACPower settingTHMINMinimum power settingVADTGVa/gVIASTEquivalent airspeed at intersection of5.6 flap and 84% power contours
TABLE 6 .6-INTERNAL FLAGS AND VARIABLES FOR INTEGDefinition
			such rules must generate
			INTEG, which are
		
		
			
16, Abstr.ctA fuel-conservative guidance system forpowered~lift STOL aircraft operating in terminal areas has been developed and evaluated in flight.In the predictive mode, the system synthesizes a horizontal path from an initial aircraft position and heading to a desired final position and heading and then synthesizes a fuel-efficient speed-altitude profile along the path.In the track mode, the synthesized trajectory is reconstructed and tracked automatically.This paper presents an analytical basis for the design of the system and a description of the airborne computer implementation.A detailed discussion of the software, which should be helpful to those who use the actual software developed for these tests, is also provided.			
			

				


	
		4D Area Navigation System Description and Flight Tests
		
			HomerQLee
		
		
			Frank;Neuman
		
		
			GordonHardy
		
		
			G
		
	
	
		NASA
		
			7874
			1975
		
	
	Lee, Homer Q.; Neuman, Frank; and Hardy, Gordon, G.: 4D Area Navigation System Description and Flight Tests. NASA TN D-7874, 1975.



	
		A New Algorithm for Horizontal Capture Trajectories. NASA Tfj-81186
		
			JolmDMclean
		
		
			Mar. 1980
		
	
	McLean, Jolm D.: A New Algorithm for Horizontal Capture Trajectories. NASA Tfj-81186, Mar. 1980.



	
		Fuel-conservative guidance system for powered-lift aircraft
		
			Heinz;Erzberger
		
		
			JohnDMclean
		
		10.2514/6.1979-1709
	
	
		Guidance and Control Conference
		Boulder, Colorado
		
			American Institute of Aeronautics and Astronautics
			Aug. 1979
			
		
	
	Erzberger, Heinz; and McLean, John D.: Fuel Conservative Guidance System for Powered-Lift Aircraft. AIAA Guidance and Control Conference, Boulder, Colorado; AIAA Paper 79-1709, Aug. 1979.



	
		Development of STOLAND, a versatile navigation, guidance and control system
		
			PaulFFlanagan
		
		10.2514/6.1972-789
	
	
		4th Aircraft Design, Flight Test, and Operations Meeting
		
			American Institute of Aeronautics and Astronautics
			Sept. 1978
		
	
	Flanagan, Paul F.: Implementation of an Optimum Profile Guidance System on STOLAND. NASA CR-152178, Sept. 1978.



	
		Constrained Optimum Trajectories with Specified Range
		
			Heinz;Erzberger
		
		
			HomerLee
		
		10.2514/3.55950
	
	
		Journal of Guidance and Control
		Journal of Guidance and Control
		0162-3192
		
			3
			1
			
			Jan.-Feb. 1980
			American Institute of Aeronautics and Astronautics (AIAA)
		
	
	Erzberger, Heinz; and Lee, Homer Q.: with Specified Range. Journal of Jan.-Feb. 1980.



	
		Constrained Optimum Trajectories with Specified Range
		
			Heinz;Erzberger
		
		
			HomerLee
		
		10.2514/3.55950
	
	
		Journal of Guidance and Control
		Journal of Guidance and Control
		0162-3192
		
			3
			1
			
			Apr. 1972
			American Institute of Aeronautics and Astronautics (AIAA)
		
	
	Erzberger, Heinz; and Lee, Homer Q.: for Automated Air Traffic Control. Constrained Optimum Trajectories Guidance and Control, vol. 3, no. 1, Tenninal-Area Guidance Algorithms NASA TN D-6773, Apr. 1972.



	
		Four-Dimensional Helical Approach of Aircraft in an Air Traffic Control Environment
		
			ThomasPecsvaradi
		
		10.2514/3.56076
	
	
		Journal of Guidance, Control, and Dynamics
		Journal of Guidance, Control, and Dynamics
		0731-5090
		1533-3884
		
			4
			3
			
			Mar. 1975
			American Institute of Aeronautics and Astronautics (AIAA)
		
	
	NASA TN D-7829
	Pecsvaradi, Thomas: Four-Dimensional Cuidance Algorithms for Aircraft in an Air Traffic Control Environment. NASA TN D-7829, Mar. 1975.



	
		An Engineering Optimization Method with Application to Approach and Landing Trajectories
		
			HeinrichJakob
		
	
	
		STOL Aircraft Sept
		
			1972
			6978
		
	
	Jakob, Heinrich: STOL Aircraft Sept. 1972. An Engineering Optimization Method with Application to Approach and Landing Trajectories. NASA TN D-6978,



	
		Analysis of integral controls in linear quadratic regulator design
		
			GarySlater
		
		10.2514/6.1979-1743
	
	
		Guidance and Control Conference
		Boulder, Colorado
		
			American Institute of Aeronautics and Astronautics
			Aug. 1979
			
		
	
	Slater, Gary: Analysis of Integral Controls in Linear Quadratic Regulator Design. AIlV\ Guidance and Control Conference, Boulder, Colorado; AIAA Paper 79-1743, Aug. 1979.


				
			
		
	
